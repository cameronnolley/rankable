(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(e,t,a){},126:function(e,t,a){e.exports=a.p+"static/media/rankabl-logo.251c7ee4.png"},129:function(e,t,a){},131:function(e,t,a){},133:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(66),s=a.n(l),c=(a(85),a(3)),i=(a(88),a(50)),o=a(69),u=a(70),m=a(128),d=a(71),f=a(135),b=(a(90),function(e,t){var a=parseInt(e,16),n=Math.round(2.55*t),r=(a>>16)+n,l=(a>>8&255)+n,s=(255&a)+n;return(16777216+65536*(r<255?r<1?0:r:255)+256*(l<255?l<1?0:l:255)+(s<255?s<1?0:s:255)).toString(16).slice(1)}),h=a(32),g=a.n(h),p=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"mouseDown",value:function(){document.getElementById().style.transform="scale(0.99)"}},{key:"mouseUp",value:function(){document.getElementById().style.transform="scale(1)"}},{key:"getArtistName",value:function(){return Array.isArray(this.props.album.attributes.artistName)?this.props.album.attributes.artistName.join(" & "):this.props.album.attributes.artistName}},{key:"replaceUrl",value:function(e){return e.replace("{w}","600").replace("{h}","600")}},{key:"render",value:function(){if(this.props.album){var e={"--bg-color":"#"+this.props.album.attributes.artwork.bgColor,"--text-color-1":"#"+this.props.album.attributes.artwork.textColor1,"--text-color-2":"#"+this.props.album.attributes.artwork.textColor2,"--text-color-3":"#"+this.props.album.attributes.artwork.textColor3,"--text-color-4":"#"+this.props.album.attributes.artwork.textColor4,"--shadow":"#"+this.props.album.attributes.artwork.textColor4+"25","--shadow-hover":"#"+this.props.album.attributes.artwork.textColor4+"50","--bg-gradient":"#"+b(this.props.album.attributes.artwork.bgColor,8)};return r.a.createElement("div",{className:"album",id:this.props.id,style:e,onMouseDown:this.mouseDown,onMouseUp:this.mouseUp,onClick:this.props.onClick},r.a.createElement("img",{src:this.replaceUrl(this.props.album.attributes.artwork.url),alt:this.props.album.attributes.name}),r.a.createElement("h1",{className:"album-title"},this.props.album.attributes.name),r.a.createElement("h2",{className:"album-artist"},this.getArtistName()))}}}]),t}(r.a.Component);a(94);var E=a(20),v=a.n(E);function y(){y=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",l=n.asyncIterator||"@@asyncIterator",s=n.toStringTag||"@@toStringTag";function c(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,a){return e[t]=a}}function i(e,t,a,n){var r=t&&t.prototype instanceof m?t:m,l=Object.create(r.prototype),s=new O(n||[]);return l._invoke=function(e,t,a){var n="suspendedStart";return function(r,l){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw l;return L()}for(a.method=r,a.arg=l;;){var s=a.delegate;if(s){var c=w(s,a);if(c){if(c===u)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var i=o(e,t,a);if("normal"===i.type){if(n=a.done?"completed":"suspendedYield",i.arg===u)continue;return{value:i.arg,done:a.done}}"throw"===i.type&&(n="completed",a.method="throw",a.arg=i.arg)}}}(e,a,s),l}function o(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(C){return{type:"throw",arg:C}}}e.wrap=i;var u={};function m(){}function d(){}function f(){}var b={};c(b,r,function(){return this});var h=Object.getPrototypeOf,g=h&&h(h(j([])));g&&g!==t&&a.call(g,r)&&(b=g);var p=f.prototype=m.prototype=Object.create(b);function E(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function v(e,t){var n;this._invoke=function(r,l){function s(){return new t(function(n,s){!function n(r,l,s,c){var i=o(e[r],e,l);if("throw"!==i.type){var u=i.arg,m=u.value;return m&&"object"==typeof m&&a.call(m,"__await")?t.resolve(m.__await).then(function(e){n("next",e,s,c)},function(e){n("throw",e,s,c)}):t.resolve(m).then(function(e){u.value=e,s(u)},function(e){return n("throw",e,s,c)})}c(i.arg)}(r,l,n,s)})}return n=n?n.then(s,s):s()}}function w(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=o(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var r=n.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function j(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:L}}function L(){return{value:void 0,done:!0}}return d.prototype=f,c(p,"constructor",f),c(f,"constructor",d),d.displayName=c(f,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,s,"GeneratorFunction")),e.prototype=Object.create(p),e},e.awrap=function(e){return{__await:e}},E(v.prototype),c(v.prototype,l,function(){return this}),e.AsyncIterator=v,e.async=function(t,a,n,r,l){void 0===l&&(l=Promise);var s=new v(i(t,a,n,r),l);return e.isGeneratorFunction(a)?s:s.next().then(function(e){return e.done?e.value:s.next()})},E(p),c(p,s,"Generator"),c(p,r,function(){return this}),c(p,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=j,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return s.type="throw",s.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var l=this.tryEntries[r],s=l.completion;if("root"===l.tryLoc)return n("end");if(l.tryLoc<=this.prev){var c=a.call(l,"catchLoc"),i=a.call(l,"finallyLoc");if(c&&i){if(this.prev<l.catchLoc)return n(l.catchLoc,!0);if(this.prev<l.finallyLoc)return n(l.finallyLoc)}else if(c){if(this.prev<l.catchLoc)return n(l.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return n(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var l=r;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var s=l?l.completion:{};return s.type=e,s.arg=t,l?(this.method="next",this.next=l.finallyLoc,u):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),N(a),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;N(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:j(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}},e}a(35);var w=function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),l=a[0],s=a[1],o=Object(n.useState)([]),u=Object(c.a)(o,2),m=u[0],d=u[1],f=Object(n.useState)([]),b=Object(c.a)(f,2),h=b[0],g=b[1],E=Object(n.useState)([]),w=Object(c.a)(E,2),k=w[0],N=w[1],O=Object(n.useState)(!1),j=Object(c.a)(O,2),L=j[0],C=j[1],S=Object(n.useState)([]),I=Object(c.a)(S,2),x=I[0],M=I[1],A=Object(n.useState)(!1),B=Object(c.a)(A,2),F=B[0],T=B[1];Object(n.useEffect)(function(){C(!0)},[]),Object(n.useEffect)(function(){0===l.length&&e.albumsLoaded&&e.loadedUserData&&M(e.seenPairs)},[e.albumsLoaded,e.loadedUserData]),Object(n.useEffect)(function(){if(e.loadedUserData&&e.albums){var t=R(e.albums);s(t)}},[x]),Object(n.useEffect)(function(){l.length>0?(T(!0),console.log("new pair")):e.albumsLoaded&&e.loadedUserData&&(setTimeout(function(){C(!1)},300),console.log(" no more albums "))},[l]),Object(n.useEffect)(function(){F&&l.length>0&&H(l).then(function(){T(!1),C(!1)})},[F]),Object(n.useEffect)(function(){e.albumsLoaded&&(console.log("albums changed"),C(!0),setTimeout(function(){s(R(e.albums))},300))},[e.albums]);var P,R=function(e){for(var t=function(e){for(var t=[],a=0;a<e.length-1;a++)for(var n=a+1;n<e.length;n++)t.push([e[a].id,e[n].id]);return t}(e),a=[],n=0;n<x.length;n++)for(var r=0;r<t.length;r++)x[n].includes(t[r][0])&&x[n].includes(t[r][1])&&a.push(t[r]);return console.log(t),console.log(a),console.log(x),t.filter(function(e){return!a.includes(e)})},D=function(e){return e[Math.floor(Math.random()*e.length)]},H=function(){var t=Object(i.a)(y().mark(function t(a){var n,r,l,s,c;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=D(a),r=Math.floor(Math.random()*n.length),l=1-r,t.next=5,d(n);case 5:return t.next=7,g(e.albums.find(function(e){return e.id===n[r]}));case 7:return t.next=9,N(e.albums.find(function(e){return e.id===n[l]}));case 9:s=Array.from(document.getElementsByClassName("skip-error-message")),c=Array.from(document.getElementsByClassName("skip-button")),s.forEach(function(e){e.style.visibility="hidden"}),c.forEach(function(e){e.removeAttribute("disabled")});case 13:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),_=function(t){var a=h.id,n=k.id,r={};"album1"===t.currentTarget.id&&(r[a]=1,r[n]=-1,r={album1:{id:a,result:1},album2:{id:n,result:-1}},C(!0),v()({url:"https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/results/save",method:"POST",params:{userId:e.userId},data:{result:r,seenPair:m}}).then(function(e){M(e.data.userResult.seenPairs),console.log(e.data.userResult.seenPairs)}).catch(function(e){console.log(e)})),"album2"===t.currentTarget.id&&(r[a]=-1,r[n]=1,r={album1:{id:a,result:-1},album2:{id:n,result:1}},C(!0),v()({url:"https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/results/save",method:"POST",params:{userId:e.userId},data:{result:r,seenPair:m}}).then(function(e){M(e.data.userResult.seenPairs),console.log(e.data.userResult.seenPairs)}).catch(function(e){console.log(e)}))},U=function(){var e=Object(i.a)(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),q=function(t){var a=h.id,n=k.id;if("second"===t.target.id){var r=l.filter(function(e){return e.includes(a)&&!e.includes(n)});if(0===r.length)return document.getElementById("second").setAttribute("disabled","disabled"),document.getElementById("first").setAttribute("disabled","disabled"),void(document.getElementById("skip-error-second").style.visibility="visible");var s=D(r);d(s),N(e.albums.find(function(e){return e.id===s.find(function(e){return e!==a})}))}else if("first"===t.target.id){var c=l.filter(function(e){return e.includes(n)&&!e.includes(a)});if(0===c.length)return document.getElementById("first").setAttribute("disabled","disabled"),document.getElementById("second").setAttribute("disabled","disabled"),void(document.getElementById("skip-error-first").style.visibility="visible");var i=D(c);d(i),g(e.albums.find(function(e){return e.id===i.find(function(e){return e!==n})}))}},G=e.filters;return P=L?r.a.createElement("span",{className:"loader"}):0===l.length?G?r.a.createElement("h1",null,"No available pairs of albums. Widen filters and try again."):r.a.createElement("h1",null,"No available pairs of albums."):r.a.createElement("div",{className:"albums"},r.a.createElement(p,{className:"album",id:"album1",album:h,onClick:U}),r.a.createElement(p,{className:"album",id:"album2",album:k,onClick:U})),r.a.createElement("div",{className:"album-container"},P,r.a.createElement("button",{className:"skip skip-button",id:"first",onClick:q},"Skip"),r.a.createElement("button",{className:"skip skip-button skip-both",id:"skip-both",onClick:function(){var t=h.id,a=k.id,n=l.filter(function(e){return!e.includes(t)&&!e.includes(a)});if(0===n.length)document.getElementById("skip-both").setAttribute("disabled","disabled"),document.getElementById("skip-error-both").classList.add("is-visible");else{var r=D(n),s=Math.floor(Math.random()*r.length),c=1-s;d(r),g(e.albums.find(function(e){return e.id===r[s]})),N(e.albums.find(function(e){return e.id===r[c]}))}}},"Skip both"),r.a.createElement("button",{className:"skip skip-button",id:"second",onClick:q},"Skip"),r.a.createElement("p",{className:"skip-error-message",id:"skip-error-first"},"No available albums"),r.a.createElement("p",{className:"skip-error-both",id:"skip-error-both"},"No available albums"),r.a.createElement("p",{className:"skip-error-message",id:"skip-error-second"},"No available albums"))},k=a(29),N=a.n(k);a(121);var O=function(e){for(var t=[],a=0;a<e.length;a++)if(Array.isArray(e[a].attributes.artistName))for(var n=function(n){var r=e[a].attributes.artistName[n];t.some(function(e){return e.name===r})||t.push({name:r,id:t.length+1})},r=0;r<e[a].attributes.artistName.length;r++)n(r);else!function(){var n=e[a].attributes.artistName;t.some(function(e){return e.name===n})||t.push({name:n,id:t.length+1})}();return t},j=a(164),L=a(173),C=a(134),S=Object(C.a)({palette:{primary:{main:"#CFCFCF",contrastText:"#fff"},secondary:{main:"#8673FA",contrastText:"#fff"}}}),I=function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),l=a[0],s=a[1],i=Object(n.useState)([]),o=Object(c.a)(i,2),u=o[0],m=o[1];Object(n.useEffect)(function(){s(O(e.albums))},[e.albums]),Object(n.useEffect)(function(){l.length>0&&m(e.queryParams.map(function(e){return l.find(function(t){return t.name===e})}))},[l]),Object(n.useEffect)(function(){s(O(d()))},[e.yearFilter,e.typeFilter]);var d=function(){var t=e.albums.map(function(e){return e});if(e.yearFilter.length>0&&(t=t.filter(function(t){return e.yearFilter.some(function(e){return t.attributes.releaseDate.includes(e)})})),e.typeFilter&&e.typeFilter.length>0){var a=e.albums.filter(function(t){return e.typeFilter.includes(t.type)});t=t.filter(function(e){return a.includes(e)}),console.log(t)}return t};return r.a.createElement(N.a,{id:"artist-filter",options:l,selectedValues:u,onSelect:e.onSelect,onRemove:e.onRemove,displayValue:"name",avoidHighlightFirstOption:"true",placeholder:"Artists",closeIcon:"cancel",hidePlaceholder:"true",closeOnSelect:"true",customArrow:r.a.createElement(L.a,{theme:S},r.a.createElement(j.a,{color:"primary",fontSize:"small"})),showArrow:"true"})},x=a(12),M=(a(139),a(125)),A=a.n(M),B=a(168),F=function(e){var t=e.children,a=e.width;return r.a.createElement("div",{className:"carousal-item",style:{width:a}},t)},T=function(e){var t=e.children,a=Object(n.useState)(2),l=Object(c.a)(a,2),s=l[0],i=l[1],o=function(e){e<0?e=0:e>=r.a.Children.count(t)&&(e=r.a.Children.count(t)-1),i(e)};return r.a.createElement("div",{className:"carousal"},r.a.createElement("div",{className:"indicators"},r.a.createElement("button",{className:"next-prev-button",onClick:function(){o(s-1)}},"\u2039"),r.a.createElement("span",{id:"decade"},function(e){switch(e){case 0:return"2000's";case 1:return"2010's";case 2:return"2020's";default:return"Select years"}}(s)),r.a.createElement("button",{className:"next-prev-button",onClick:function(){o(s+1)}},"\u203a")),r.a.createElement("div",{className:"inner",style:{transform:"translateX(-".concat(100*s,"%)")}},r.a.Children.map(t,function(e,t){return r.a.cloneElement(e,{width:"100%"})})))},P=function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),l=a[0],s=a[1],i=Object(n.useState)(!1),o=Object(c.a)(i,2),u=o[0],m=o[1],d=Object(n.useState)(["2000","2001","2002","2003","2004","2005","2006","2007","2008","2009"]),f=Object(c.a)(d,2),b=f[0],h=f[1],g=Object(n.useState)(["2010","2011","2012","2013","2014","2015","2016","2017","2018","2019"]),p=Object(c.a)(g,2),E=p[0],v=p[1],y=Object(n.useState)(["2020","2021","2022"]),w=Object(c.a)(y,2),k=w[0],N=w[1];Object(n.useEffect)(function(){document.getElementById("calendar").classList.toggle("display")},[u]);var O=Object(n.useRef)();Object(n.useEffect)(function(){var e=function(e){O.current.contains(e.target)||document.getElementById("calendar").classList.add("display")};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),Object(n.useEffect)(function(){e.onChange(l)},[l]),Object(n.useEffect)(function(){s(C)},[]),Object(n.useEffect)(function(){e.albums.length>0&&_()},[e.albums,e.artistFilter,e.typeFilter]);var j=new URLSearchParams(window.location.search),C=function(){var e=j.get("years");return null!==e?e.split(","):[]};function I(e){e.target.classList.add("hover")}function M(e){e.target.classList.remove("hover"),e.target.classList.remove("select-hover")}function P(e){if(e.target.classList.contains("year-selected"))D(e.target.innerHTML),e.target.classList.contains("aughts")?document.getElementById("select-all-aughts").classList.remove("year-selected"):e.target.classList.contains("teens")?document.getElementById("select-all-teens").classList.remove("year-selected"):e.target.classList.contains("twenties")&&document.getElementById("select-all-twenties").classList.remove("year-selected");else{e.target.classList.toggle("year-selected");var t=[].concat(Object(x.a)(l),[e.target.innerHTML]);s(t.sort())}}function R(e){if(e.target.classList.contains("aughts"))if(e.target.classList.contains("year-selected"))s(l.filter(function(e){return!b.includes(e)})),Array.from(document.querySelectorAll(".aughts")).forEach(function(e){return e.classList.remove("year-selected")}),document.getElementById("select-all-aughts").innerHTML="Select All";else{var t=b.filter(function(e){return!l.includes(e)});s([].concat(Object(x.a)(l),Object(x.a)(t))),Array.from(document.querySelectorAll(".aughts")).forEach(function(e){return e.classList.add("year-selected")})}else if(e.target.classList.contains("teens"))if(e.target.classList.contains("year-selected"))s(l.filter(function(e){return!E.includes(e)})),Array.from(document.querySelectorAll(".teens")).forEach(function(e){return e.classList.remove("year-selected")}),document.getElementById("select-all-teens").innerHTML="Select All";else{var a=E.filter(function(e){return!l.includes(e)});s([].concat(Object(x.a)(l),Object(x.a)(a))),Array.from(document.querySelectorAll(".teens")).forEach(function(e){return e.classList.add("year-selected")})}else if(e.target.classList.contains("twenties"))if(e.target.classList.contains("year-selected"))s(l.filter(function(e){return!k.includes(e)})),Array.from(document.querySelectorAll(".twenties")).forEach(function(e){return e.classList.remove("year-selected")}),document.getElementById("select-all-twenties").innerHTML="Select All";else{var n=k.filter(function(e){return!l.includes(e)});console.log(n),s([].concat(Object(x.a)(l),Object(x.a)(n))),Array.from(document.querySelectorAll(".twenties")).forEach(function(e){return e.classList.add("year-selected")})}}function D(e){"2000's"===e?(s(l.filter(function(e){return!b.includes(e)})),Array.from(document.querySelectorAll(".aughts")).forEach(function(e){return e.classList.remove("year-selected")}),document.getElementById("select-all-aughts").innerHTML="Select All"):"2010's"===e?(s(l.filter(function(e){return!E.includes(e)})),Array.from(document.querySelectorAll(".teens")).forEach(function(e){return e.classList.remove("year-selected")}),document.getElementById("select-all-teens").innerHTML="Select All"):"2020's"===e?(s(l.filter(function(e){return!k.includes(e)})),Array.from(document.querySelectorAll(".twenties")).forEach(function(e){return e.classList.remove("year-selected")}),document.getElementById("select-all-twenties").innerHTML="Select All"):(s(l.filter(function(t){return t!==e})),document.getElementById(e).classList.remove("year-selected"),document.getElementById(e).classList.contains("aughts")?(document.getElementById("select-all-aughts").classList.remove("year-selected"),document.getElementById("select-all-aughts").innerHTML="Select All"):document.getElementById(e).classList.contains("teens")?(document.getElementById("select-all-teens").classList.remove("year-selected"),document.getElementById("select-all-teens").innerHTML="Select All"):document.getElementById(e).classList.contains("twenties")&&(document.getElementById("select-all-twenties").classList.remove("year-selected"),document.getElementById("select-all-twenties").innerHTML="Select All"))}function H(){m(!u)}var _=function(){var t=A()(".year").map(function(e,t){return t.id}).get(),a=e.albums.map(function(e){return e}),n=["2000","2001","2002","2003","2004","2005","2006","2007","2008","2009"],r=["2010","2011","2012","2013","2014","2015","2016","2017","2018","2019"],c=["2020","2021","2022"];if(e.artistFilter.length>0&&e.albums.forEach(function(t){Array.isArray(t.attributes.artistName)?!1===t.attributes.artistName.some(function(t){return e.artistFilter.includes(t)})&&a.splice(a.findIndex(function(e){return e===t}),1):!1===e.artistFilter.some(function(e){return e===t.attributes.artistName})&&a.splice(a.findIndex(function(e){return e===t}),1)}),e.typeFilter&&e.typeFilter.length>0){var i=e.albums.filter(function(t){return e.typeFilter.includes(t.type)});a=a.filter(function(e){return i.includes(e)}),console.log(a)}(b.every(function(e){return document.getElementById(e).disabled})||0===b.length)&&(document.getElementById("select-all-aughts").disabled="true");var o=a.map(function(e){return e.attributes.releaseDate.split("-")[0]}),u=Object(x.a)(new Set(o));t.filter(function(e){return!u.includes(e)});t.forEach(function(e){u.includes(e)?document.getElementById(e).disabled=!1:document.getElementById(e).disabled=!0});var m=n.filter(function(e){return u.includes(e)});h(m);var d=r.filter(function(e){return u.includes(e)});v(d);var f=c.filter(function(e){return u.includes(e)});if(N(f),(b.every(function(e){return document.getElementById(e).disabled})||0===b.length)&&(document.getElementById("select-all-aughts").disabled="true"),(E.every(function(e){return document.getElementById(e).disabled})||0===E.length)&&(document.getElementById("select-all-teens").disabled="true"),(k.every(function(e){return document.getElementById(e).disabled})||0===k.length)&&(document.getElementById("select-all-twenties").disabled="true"),document.getElementById("select-all-aughts").classList.contains("year-selected")){var g=n.filter(function(e){return u.includes(e)}).filter(function(e){return!l.includes(e)});console.log(g),s([].concat(Object(x.a)(l),Object(x.a)(g)))}if(document.getElementById("select-all-teens").classList.contains("year-selected")){var p=r.filter(function(e){return u.includes(e)}).filter(function(e){return!l.includes(e)});console.log(p),s([].concat(Object(x.a)(l),Object(x.a)(p)))}if(document.getElementById("select-all-twenties").classList.contains("year-selected")){var y=c.filter(function(e){return u.includes(e)}).filter(function(e){return!l.includes(e)});console.log(y),s([].concat(Object(x.a)(l),Object(x.a)(y)))}};return r.a.createElement("div",{ref:O},r.a.createElement("div",{className:"year-filter-container",id:"year-filter-container"},r.a.createElement("div",{className:"chip-wrapper",onClick:function(e){e.target!==e.currentTarget||H()}},function(){var e=l;return b.length>0&&b.every(function(t){return e.includes(t)})&&((e=e.filter(function(e){return!b.includes(e)})).push("2000's"),e.sort(),document.getElementById("select-all-aughts").classList.add("year-selected"),document.getElementById("select-all-aughts").innerHTML="Remove All"),E.length>0&&E.every(function(t){return e.includes(t)})&&((e=e.filter(function(e){return!E.includes(e)})).push("2010's"),e.sort(),document.getElementById("select-all-teens").classList.add("year-selected"),document.getElementById("select-all-teens").innerHTML="Remove All"),k.length>0&&k.every(function(t){return e.includes(t)})&&((e=e.filter(function(e){return!k.includes(e)})).push("2020's"),e.sort(),document.getElementById("select-all-twenties").classList.add("year-selected"),document.getElementById("select-all-twenties").innerHTML="Remove All"),0===l.length?r.a.createElement("div",{className:"placeholder",onClick:H},r.a.createElement("p",{className:"placeholder-text"},"Years"),r.a.createElement(L.a,{theme:S},r.a.createElement(B.a,{color:"primary",baseClassName:"icon",id:"year-filter-icon"}))):e.map(function(e,t){return r.a.createElement("span",{className:"chip-year",key:t},e," ",r.a.createElement("img",{className:"icon_cancel closeIcon",alt:"Cancel icon",src:"data:image/svg+xml,%3Csvg%20height%3D%22512px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20width%3D%22512px%22%20xml%3Aspace%3D%22preserve%22%20%20%20%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20%20%20%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%20%20%20%20%3Cstyle%20type%3D%22text%2Fcss%22%3E%20%20%20%20%20%20%20%20.st0%7B%20%20%20%20%20%20%20%20%20%20%20%20fill%3A%23fff%3B%20%20%20%20%20%20%20%20%7D%20%3C%2Fstyle%3E%20%20%20%20%3Cpath%20class%3D%22st0%22%20d%3D%22M443.6%2C387.1L312.4%2C255.4l131.5-130c5.4-5.4%2C5.4-14.2%2C0-19.6l-37.4-37.6c-2.6-2.6-6.1-4-9.8-4c-3.7%2C0-7.2%2C1.5-9.8%2C4%20%20L256%2C197.8L124.9%2C68.3c-2.6-2.6-6.1-4-9.8-4c-3.7%2C0-7.2%2C1.5-9.8%2C4L68%2C105.9c-5.4%2C5.4-5.4%2C14.2%2C0%2C19.6l131.5%2C130L68.4%2C387.1%20%20c-2.6%2C2.6-4.1%2C6.1-4.1%2C9.8c0%2C3.7%2C1.4%2C7.2%2C4.1%2C9.8l37.4%2C37.6c2.7%2C2.7%2C6.2%2C4.1%2C9.8%2C4.1c3.5%2C0%2C7.1-1.3%2C9.8-4.1L256%2C313.1l130.7%2C131.1%20%20c2.7%2C2.7%2C6.2%2C4.1%2C9.8%2C4.1c3.5%2C0%2C7.1-1.3%2C9.8-4.1l37.4-37.6c2.6-2.6%2C4.1-6.1%2C4.1-9.8C447.7%2C393.2%2C446.2%2C389.7%2C443.6%2C387.1z%22%2F%3E%3C%2Fsvg%3E",onClick:function(){return D(e)}}))})}())),r.a.createElement("div",{className:"calendar-wrapper",id:"calendar"},r.a.createElement(T,null,r.a.createElement(F,null,r.a.createElement("div",{className:"years-wrapper"},r.a.createElement("button",{className:"year aughts first-year",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2000"},"2000"),r.a.createElement("button",{className:"year aughts",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2001"},"2001"),r.a.createElement("button",{className:"year aughts",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2002"},"2002"),r.a.createElement("button",{className:"year aughts",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2003"},"2003"),r.a.createElement("button",{className:"year aughts",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2004"},"2004"),r.a.createElement("button",{className:"year aughts",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2005"},"2005"),r.a.createElement("button",{className:"year aughts",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2006"},"2006"),r.a.createElement("button",{className:"year aughts",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2007"},"2007"),r.a.createElement("button",{className:"year aughts",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2008"},"2008"),r.a.createElement("button",{className:"year aughts",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2009"},"2009"),r.a.createElement("button",{className:"select-all aughts",id:"select-all-aughts",onMouseEnter:I,onMouseLeave:M,onClick:R},"Select All"))),r.a.createElement(F,null,r.a.createElement("div",{className:"years-wrapper"},r.a.createElement("button",{className:"year teens first-year",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2010"},"2010"),r.a.createElement("button",{className:"year teens",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2011"},"2011"),r.a.createElement("button",{className:"year teens",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2012"},"2012"),r.a.createElement("button",{className:"year teens",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2013"},"2013"),r.a.createElement("button",{className:"year teens",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2014"},"2014"),r.a.createElement("button",{className:"year teens",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2015"},"2015"),r.a.createElement("button",{className:"year teens",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2016"},"2016"),r.a.createElement("button",{className:"year teens",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2017"},"2017"),r.a.createElement("button",{className:"year teens",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2018"},"2018"),r.a.createElement("button",{className:"year teens",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2019"},"2019"),r.a.createElement("button",{className:"select-all teens",id:"select-all-teens",onMouseEnter:I,onMouseLeave:M,onClick:R},"Select All"))),r.a.createElement(F,null,r.a.createElement("div",{className:"years-wrapper"},r.a.createElement("button",{className:"year twenties first-year",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2020"},"2020"),r.a.createElement("button",{className:"year twenties",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2021"},"2021"),r.a.createElement("button",{className:"year twenties",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2022"},"2022"),r.a.createElement("button",{className:"year twenties",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2023"},"2023"),r.a.createElement("button",{className:"year twenties",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2024"},"2024"),r.a.createElement("button",{className:"year twenties",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2025"},"2025"),r.a.createElement("button",{className:"year twenties",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2026"},"2026"),r.a.createElement("button",{className:"year twenties",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2027"},"2027"),r.a.createElement("button",{className:"year twenties",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2028"},"2028"),r.a.createElement("button",{className:"year twenties",onMouseEnter:I,onMouseLeave:M,onClick:P,id:"2029"},"2029"),r.a.createElement("button",{className:"select-all twenties",id:"select-all-twenties",onMouseEnter:I,onMouseLeave:M,onClick:R},"Select All"))))))},R=a(24),D=a.n(R),H=(a(141),a(126)),_=a.n(H),U=a(30),q=function(e){return Object(n.useEffect)(function(){"/"===window.location.pathname&&document.getElementById("rank").classList.add("active"),"/rankings"===window.location.pathname&&document.getElementById("rankings").classList.add("active")},[]),r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"header-logo"},r.a.createElement("img",{src:_.a,alt:"rankabl-logo",className:"logo"}),r.a.createElement("h1",{className:"brand"},"rankabl")),r.a.createElement("div",{className:"nav-container"},r.a.createElement("nav",{className:"nav"},r.a.createElement("ul",{className:"nav-list"},r.a.createElement("li",{className:"nav-item",id:"rank"},r.a.createElement(U.b,{to:"/".concat(e.artistFilter&&e.artistFilter.length>0&&e.yearFilter&&e.yearFilter>0?"?artist="+e.artistFilter.join("%2C")+"&years="+e.yearFilter.join("%2C"):e.artistFilter&&e.artistFilter.length>0?"?artist="+e.artistFilter.join("%2C"):e.yearFilter&&e.yearFilter.length>0?"?years="+e.yearFilter.join("%2C"):"")},"RANK")),r.a.createElement("li",{className:"nav-item",id:"rankings"},r.a.createElement(U.b,{to:e.headerParams?"/rankings?"+e.headerParams.toString():"/rankings"},"RANKINGS"))))))},G=function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],l=t[1],s=Object(n.useState)([]),i=Object(c.a)(s,2),o=i[0],u=i[1],m=Object(n.useState)([]),d=Object(c.a)(m,2),f=d[0],b=d[1],h=Object(n.useState)([]),p=Object(c.a)(h,2),E=p[0],y=p[1],k=Object(n.useState)(!1),N=Object(c.a)(k,2),O=N[0],j=N[1],L=Object(n.useState)(!1),C=Object(c.a)(L,2),S=C[0],x=C[1],M=Object(n.useState)(""),A=Object(c.a)(M,2),B=A[0],F=A[1],T=Object(n.useState)({_id:"",userId:"",results:[],seenPairs:[]}),R=Object(c.a)(T,2),H=R[0],_=R[1],U=Object(n.useState)(!1),G=Object(c.a)(U,2),Y=G[0],V=G[1],z=Object(n.useState)(""),K=Object(c.a)(z,2),J=K[0],Q=K[1];Object(n.useEffect)(function(){Z(),X(),Q(ee())},[]),Object(n.useEffect)(function(){""!==B&&$()},[B]),Object(n.useEffect)(function(){if(te(),a.length>0||o.length>0?x(!0):x(!1),0===a.length){W.delete("artist");var e=window.location.pathname+"?"+W.toString();window.history.pushState(null,"",e)}0===o.length&&(W.delete("years"),e=window.location.pathname+"?"+W.toString(),window.history.pushState(null,"",e))},[a,o]),Object(n.useEffect)(function(){f.length>0&&(j(!0),l(J))},[f]);var W=new URLSearchParams(window.location.search),X=function(){v.a.get("https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/albums",{params:{verification_method:"SECRET_AS_QUERY_PARAM",secret:"temperature"}}).then(function(e){b(e.data),y(e.data)}).catch(function(e){console.log(e)})},Z=function(){D.a.get("user")?F(D.a.get("user")):(D.a.set("user",g.a.v4(),{expires:1e4}),F(D.a.get("user")))},$=function(){""!==B&&v.a.get("https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/getuser",{params:{userId:B}}).then(function(e){null!==e.data?(_(e.data),V(!0),console.log(H)):V(!0)})},ee=function(){var e=W.get("artist");if(null!==e){var t=e.split(",");return console.log("filter set from params"),t}return[]},te=function(){if(0===a.length&&0===o.length)y(f);else{var e=f.map(function(e){return e});if(console.log(e),a.length>0){f.forEach(function(t){Array.isArray(t.attributes.artistName)?!1===t.attributes.artistName.some(function(e){return a.includes(e)})&&e.splice(e.findIndex(function(e){return e===t}),1):!1===a.some(function(e){return e===t.attributes.artistName})&&e.splice(e.findIndex(function(e){return e===t}),1)}),W.set("artist",a);var t=window.location.pathname+"?"+W.toString();window.history.pushState(null,"",t)}o.length>0&&(e=e.filter(function(e){return o.some(function(t){return e.attributes.releaseDate.includes(t)})}),W.set("years",o),t=window.location.pathname+"?"+W.toString(),window.history.pushState(null,"",t)),console.log(e),y(e)}},ae=function(e){var t=e.map(function(e){return e.name});l(t)};return r.a.createElement("div",null,r.a.createElement(q,{headerParams:W}),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"filters"},r.a.createElement(I,{id:"artist-filter",onSelect:ae,onRemove:ae,albums:f,queryParams:a,yearFilter:o}),r.a.createElement(P,{onChange:function(e){u(e)},albums:f,artistFilter:a})),r.a.createElement(w,{albums:E,albumsLoaded:O,filters:S,userId:B,seenPairs:H.seenPairs,loadedUserData:Y})))},Y=(a(143),a(127)),V=a.n(Y),z=(a(146),function(e){var t=e.children,a=e.width;return r.a.createElement("div",{className:"carousal-item",style:{width:a}},t)}),K=function(e){var t=e.children,a=Object(n.useState)(0),l=Object(c.a)(a,2),s=l[0],i=l[1],o=function(e){i(e)};return r.a.createElement("div",{className:"carousel"},r.a.createElement("div",{className:"inner",style:{transform:"translateX(-".concat(100*s,"%)")}},r.a.Children.map(t,function(e,t){return r.a.cloneElement(e,{width:"100%"})})),r.a.createElement("div",{className:"carousel-dots"},r.a.createElement("div",{className:"dot ".concat(0===s?"active":""),id:"dot-0",onClick:function(){return o(0)}}),r.a.createElement("div",{className:"dot ".concat(1===s?"active":""),id:"dot-1",onClick:function(){return o(1)}})))},J=function(e){var t=Object(n.useState)({}),a=Object(c.a)(t,2),l=a[0],s=a[1];Object(n.useEffect)(function(){e.album&&(document.getElementById("editorial-notes-"+e.rank).innerHTML=e.album.attributes.editorialNotes.standard,s({"--bg-color":"#"+e.album.attributes.artwork.bgColor,"--text-color-1":"#"+e.album.attributes.artwork.textColor1,"--text-color-2":"#"+e.album.attributes.artwork.textColor2,"--text-color-3":"#"+e.album.attributes.artwork.textColor3,"--text-color-4":"#"+e.album.attributes.artwork.textColor4,"--shadow":"#"+e.album.attributes.artwork.textColor4+"25","--shadow-hover":"#"+e.album.attributes.artwork.textColor4+"80","--bg-gradient":"#"+b(e.album.attributes.artwork.bgColor,4)}))},[e.album]);var i,o=function(e){return e.replace("{w}","600").replace("{h}","600")},u=function(t){var a=[];return e.albums.forEach(function(e){Array.isArray(e.attributes.artistName)?e.attributes.artistName.some(function(e){return e===t})&&a.push(e):e.attributes.artistName===t&&a.push(e)}),("global"===e.selectedRanking?a.map(function(t){return{album:t,ranking:e.rankingGlobal.findIndex(function(e){return e.albumId===t.id})+1}}):a.map(function(t){return{album:t,ranking:e.rankingUser.findIndex(function(e){return e.albumId===t.id})+1}})).sort(function(e,t){return e.ranking-t.ranking})},m=function(t){return function(t){var a=[];e.albums.forEach(function(e){Array.isArray(e.attributes.artistName)?e.attributes.artistName.some(function(e){return e===t})&&a.push(e):e.attributes.artistName===t&&a.push(e)}),e.albums.filter(function(e){return e.attributes.artistName===t});var n=a.filter(function(t){return t.id!==e.album.id});return("global"===e.selectedRanking?n.map(function(t){return{album:t,ranking:e.rankingGlobal.findIndex(function(e){return e.albumId===t.id})+1}}):n.map(function(t){return{album:t,ranking:e.rankingUser.findIndex(function(e){return e.albumId===t.id})+1}})).sort(function(e,t){return e.ranking-t.ranking})}(t).map(function(e,t){return r.a.createElement("div",{className:"other-album",key:t},r.a.createElement("div",{className:"other-album-rank"},e.ranking),r.a.createElement("img",{src:o(e.album.attributes.artwork.url),alt:e.album.attributes.name,className:"other-album-image"}),r.a.createElement("p",{className:"other-album-name"},e.album.attributes.name))})},d=function(t){if(e.artists)return e.artists.find(function(e){return e.attributes.name===t}).attributes.artwork.url.replace("{w}","300").replace("{h}","300")};if(e.album)return r.a.createElement("div",{className:"table-row",id:"table-row-".concat(e.rank),style:l},r.a.createElement("div",{className:"row-default"},r.a.createElement("div",{className:"table-cell",id:"rank-cell"},r.a.createElement("div",{className:"rank-container"},r.a.createElement("p",null,e.rank))),r.a.createElement("div",{className:"table-cell",id:"album-cell"},e.album&&r.a.createElement("div",{className:"album-info"},r.a.createElement("img",{src:o(e.album.attributes.artwork.url),alt:"album artwork",className:"albumArtwork"}),r.a.createElement("div",{className:"album-name-artist"},r.a.createElement("div",{className:"album-text"},r.a.createElement("p",{className:"album-name-table"},e.album.attributes.name),r.a.createElement("p",{className:"album-artist-table"},Array.isArray(e.album.attributes.artistName)?e.album.attributes.artistName.join(" & "):e.album.attributes.artistName))))),r.a.createElement("div",{className:"table-cell",id:"release-cell"},r.a.createElement("p",null,e.album&&(i=e.album.attributes.releaseDate,V()(i).format("MMMM Do, YYYY")))),r.a.createElement("div",{className:"table-cell",id:"more-cell"},r.a.createElement("button",{className:"more",id:"more-button-".concat(e.rank),onClick:function(){"More"===document.getElementById("more ".concat(e.rank)).innerHTML?(document.getElementById("table-row-".concat(e.rank)).style.height="481px",setTimeout(function(){document.getElementById("table-row-".concat(e.rank)).scrollIntoView({behavior:"smooth",block:"nearest"})},300),document.getElementById("more ".concat(e.rank)).innerHTML="Less",document.getElementById("chevron ".concat(e.rank)).style.transform="rotate(180deg)",document.getElementById("more ".concat(e.rank)).style.visibility="visible",e.isExpanded(e.rank)):(document.getElementById("table-row-".concat(e.rank)).style.height="120px",document.getElementById("more ".concat(e.rank)).innerHTML="More",document.getElementById("chevron ".concat(e.rank)).style.transform="rotate(0deg)",document.getElementById("more ".concat(e.rank)).style.visibility="",e.isExpanded(""))}},r.a.createElement("p",{className:"button-text",id:"more ".concat(e.rank)},"More"),r.a.createElement(B.a,{size:"small",id:"chevron ".concat(e.rank)})))),r.a.createElement("div",{className:"row-expanded",id:"row-expanded-".concat(e.rank)},r.a.createElement("div",{className:"album-info-expanded"},r.a.createElement("div",{className:"album-facts"},r.a.createElement("p",{className:"label"},"PROJECT TYPE:"),r.a.createElement("p",null,e.album&&e.album.type),r.a.createElement("p",{className:"label"},"GENRE:"),r.a.createElement("p",null,e.album&&e.album.attributes.genreNames[0]),r.a.createElement("p",{className:"label"},"TRACKs:"),r.a.createElement("p",null,e.album&&e.album.attributes.trackCount)),r.a.createElement("div",{className:"editorial-notes"},r.a.createElement("p",{id:"editorial-label"},"EDITORIAL NOTES:"),r.a.createElement("p",{className:"editorial-notes-standard",id:"editorial-notes-"+e.rank}))),r.a.createElement("div",{className:"recent-results"},r.a.createElement("p",{className:"label"},"RECENT RESULTS:"),r.a.createElement("div",{className:"recent-results-albums"},function(){var t=("global"===e.selectedRanking?e.resultsGlobal.reverse():e.resultsUser.reverse()).filter(function(t){return t.album1.id===e.album.id||t.album2.id===e.album.id}),a=[];return t.map(function(t){t.album1.id===e.album.id?a.push({album:e.albums.find(function(e){return e.id===t.album2.id}),result:t.album2.result}):t.album2.id===e.album.id&&a.push({album:e.albums.find(function(e){return e.id===t.album1.id}),result:t.album1.result})}),a}().map(function(e,t){return r.a.createElement("div",{className:"recent-result",key:t},r.a.createElement("div",{className:"recent-result-outcome"},-1===e.result?"Win":"Loss"),r.a.createElement("img",{src:o(e.album.attributes.artwork.url),alt:e.album.attributes.name,className:"recent-result-image"}),r.a.createElement("p",{className:"recent-result-name"},e.album.attributes.name))}))),r.a.createElement("vl",null),Array.isArray(e.album.attributes.artistName)?r.a.createElement(K,null,e.album.attributes.artistName.map(function(e,t){return r.a.createElement(z,{index:t},r.a.createElement("div",{className:"artist"},r.a.createElement("div",{className:"artist-info"},r.a.createElement("img",{src:d(e),alt:"artist artwork",className:"artist-artwork"}),r.a.createElement("p",{className:"artist-name"},e),r.a.createElement("div",{className:"artist-stats"},r.a.createElement("div",{className:"artist-stats-labels"},r.a.createElement("p",null,"Highest album rank: "),r.a.createElement("p",null,"Lowest album rank: "),r.a.createElement("p",null,"Average album rank: ")),r.a.createElement("div",{className:"artist-stats-values"},r.a.createElement("p",null,"#".concat(u(e)[0].ranking)),r.a.createElement("p",null,"#".concat(u(e)[u(e).length-1].ranking)),r.a.createElement("p",null,"#".concat((u(e).reduce(function(e,t){return e+t.ranking},0)/u(e).length).toFixed(1)))))),r.a.createElement("div",{className:"other-albums-container"},r.a.createElement("p",{className:"label"},"OTHER ALBUMS:"),r.a.createElement("div",{className:"other-albums"},m(e)))))})):r.a.createElement("div",{className:"artist"},r.a.createElement("div",{className:"artist-info"},r.a.createElement("img",{src:d(e.album.attributes.artistName),alt:"artist artwork",className:"artist-artwork"}),r.a.createElement("p",{className:"artist-name"},e.album.attributes.artistName),r.a.createElement("div",{className:"artist-stats"},r.a.createElement("div",{className:"artist-stats-labels"},r.a.createElement("p",null,"Highest album rank: "),r.a.createElement("p",null,"Lowest album rank: "),r.a.createElement("p",null,"Average album rank: ")),r.a.createElement("div",{className:"artist-stats-values"},r.a.createElement("p",null,"#".concat(u(e.album.attributes.artistName)[0].ranking)),r.a.createElement("p",null,"#".concat(u(e.album.attributes.artistName)[u(e.album.attributes.artistName).length-1].ranking)),r.a.createElement("p",null,"#".concat((u(e.album.attributes.artistName).reduce(function(e,t){return e+t.ranking},0)/u(e.album.attributes.artistName).length).toFixed(1)))))),r.a.createElement("div",{className:"other-albums-container"},r.a.createElement("p",{className:"label"},"OTHER ALBUMS:"),r.a.createElement("div",{className:"other-albums"},m(e.album.attributes.artistName))))),r.a.createElement("div",{className:"expanded-row-bg",id:"expanded-row-bg-".concat(e.rank)}))},Q=(a(148),function(){return r.a.createElement("div",{className:"table-header"},r.a.createElement("div",{className:"table-label",id:"rank-label"},"RANK"),r.a.createElement("div",{className:"table-label",id:"album-label"},"ALBUM"),r.a.createElement("div",{className:"table-label",id:"release-label"},"RELEASE DATE"))}),W=(a(150),a(129),function(e){var t=Object(n.useState)([{label:"Global",value:"global"}]),a=Object(c.a)(t,2),l=a[0],s=a[1];return Object(n.useEffect)(function(){"personal"===e.queryParams?s([{label:"Personal",value:"personal"}]):s([{label:"Global",value:"global"}])},[e.queryParams]),r.a.createElement(N.a,{id:"ranking-select",options:[{label:"Global",value:"global"},{label:"Personal",value:"personal"}],displayValue:"label",avoidHighlightFirstOption:"true",singleSelect:"true",selectedValues:l,hidePlaceholder:"true",placeholder:"",showArrow:"true",onSelect:e.onSelect,customArrow:r.a.createElement(L.a,{theme:S},r.a.createElement(B.a,{color:"primary"}))})}),X=a(35),Z=a.n(X),$=function(e){var t=[];e.forEach(function(e){var a={};a[e.album1.id]=e.album1.result,a[e.album2.id]=e.album2.result,t.push(a)}),console.log(t);for(var a=[],n=0;n<t.length;n++)a.push(Object.keys(t[n]));console.log(a);var r=a.flat();console.log(r);var l=Object(x.a)(new Set(r));console.log(l);var s=Z.a.matrix(l.length);s=s.map(function(e){return 0});for(var c=function(e){s.set(e,e,r.filter(function(t){return t===l[e]}).length+2);for(var a=e+1;a<l.length;a++)for(var n=s.get(e,a)||0,c=0;c<t.length;c++)l[e]in t[c]&&l[a]in t[c]&&(s.set(e,a,n-1),s.set(a,e,n-1))},i=0;i<l.length;i++)c(i);console.log(s);for(var o=[],u=0;u<l.length;u++){for(var m=[],d=0;d<t.length;d++)l[u]in t[d]&&m.push(t[d][l[u]]);var f=1+.5*m.reduce(function(e,t){return e+t},0);o.push(f)}for(var b=Z.a.matrix(l.length,o),h=Z.a.lu(s).solve(b),g=[],p=0;p<l.length;p++)g.push({albumId:l[p],rating:h.array[p]});return g.sort(function(e,t){return t.rating-e.rating})},ee=(a(131),function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),l=a[0],s=a[1],i=Object(n.useState)([]),o=Object(c.a)(i,2),u=o[0],m=o[1];Object(n.useEffect)(function(){e.albums.length>0&&m(d(e.albums))},[e.albums]),Object(n.useEffect)(function(){e.queryParams.length>0&&u.length>0&&s(e.queryParams.map(function(e){return u.find(function(t){return t.label===e})}))},[u]),Object(n.useEffect)(function(){e.albums.length>0&&m(d(f()))},[e.yearFilter,e.artistFilter]);var d=function(e){var t=[];return e.forEach(function(e){t.some(function(t){return t.label===e.type})||t.push({label:e.type,value:e.type.toLowerCase()})}),t},f=function(){var t=e.albums.map(function(e){return e});if(e.artistFilter.length>0&&e.albums.forEach(function(a){Array.isArray(a.attributes.artistName)?!1===a.attributes.artistName.some(function(t){return e.artistFilter.includes(t)})&&t.splice(t.findIndex(function(e){return e===a}),1):!1===e.artistFilter.some(function(e){return e===a.attributes.artistName})&&t.splice(t.findIndex(function(e){return e===a}),1)}),e.yearFilter.length>0){var a=e.albums.filter(function(t){return e.yearFilter.some(function(e){return t.attributes.releaseDate.includes(e)})}).map(function(e){return e});t=t.filter(function(e){return a.includes(e)})}return console.log(t),t};return r.a.createElement(N.a,{id:"type-select",options:u,selectedValues:l,displayValue:"label",avoidHighlightFirstOption:"true",singleSelect:"true",placeholder:"Type",showArrow:"true",onSelect:e.onSelect,onRemove:e.onRemove,closeIcon:"cancel",customArrow:r.a.createElement(L.a,{theme:S},r.a.createElement(B.a,{color:"primary"}))})}),te=a(169),ae=a(171),ne=function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],l=t[1],s=Object(n.useState)([]),i=Object(c.a)(s,2),o=i[0],u=i[1],m=Object(n.useState)([]),d=Object(c.a)(m,2),f=d[0],b=d[1],h=Object(n.useState)([]),p=Object(c.a)(h,2),E=p[0],y=p[1],w=Object(n.useState)([]),k=Object(c.a)(w,2),N=k[0],O=k[1],j=Object(n.useState)([]),C=Object(c.a)(j,2),x=C[0],M=C[1],A=Object(n.useState)([]),B=Object(c.a)(A,2),F=B[0],T=B[1],R=Object(n.useState)(""),H=Object(c.a)(R,2),_=H[0],U=H[1],G=Object(n.useState)("global"),Y=Object(c.a)(G,2),V=Y[0],z=Y[1],K=Object(n.useState)(!1),X=Object(c.a)(K,2),Z=X[0],ne=X[1],re=Object(n.useState)(""),le=Object(c.a)(re,2),se=le[0],ce=le[1],ie=Object(n.useState)([]),oe=Object(c.a)(ie,2),ue=oe[0],me=oe[1],de=Object(n.useState)([]),fe=Object(c.a)(de,2),be=fe[0],he=fe[1],ge=Object(n.useState)([]),pe=Object(c.a)(ge,2),Ee=pe[0],ve=pe[1];Object(n.useEffect)(function(){ke(),Ne(),Oe(),je(),ne(!0),me(Ce()),ve(we.getAll("type")),null!==we.get("ranking")&&z(we.get("ranking"))},[]),Object(n.useEffect)(function(){Le()},[_]),Object(n.useEffect)(function(){f.length>0&&O($(f))},[f]),Object(n.useEffect)(function(){E.length>0&&M($(E))},[E]),Object(n.useEffect)(function(){"global"===V&&T(N),N&&ne(!1)},[N]),Object(n.useEffect)(function(){Me(),we.set("ranking",V);var e=window.location.pathname+"?"+we.toString();window.history.pushState(null,"",e)},[V]),Object(n.useEffect)(function(){if(Me(),0===ue.length){we.delete("artist");var e=window.location.pathname+"?"+we.toString();window.history.pushState(null,"",e)}ue.length>0&&(we.set("artist",ue),e=window.location.pathname+"?"+we.toString(),window.history.pushState(null,"",e)),0===be.length&&(we.delete("years"),e=window.location.pathname+"?"+we.toString(),window.history.pushState(null,"",e)),0===Ee.length&&(we.delete("type"),e=window.location.pathname+"?"+we.toString(),window.history.pushState(null,"",e)),Ee.length>0&&(we.set("type",Ee[0]),e=window.location.pathname+"?"+we.toString(),window.history.pushState(null,"",e))},[ue,be,Ee]),Object(n.useEffect)(function(){N&&Me()},[N,a]),Object(n.useEffect)(function(){""!==ye&&""!==se&&Ae(ye)},[se]);var ye=function(e){var t=Object(n.useRef)();return Object(n.useEffect)(function(){t.current=e}),t.current}(se),we=new URLSearchParams(window.location.search),ke=function(){D.a.get("user")?U(D.a.get("user")):D.a.set("user",g.a.v4(),{expires:1e4})},Ne=function(){v.a.get("https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/albums",{params:{verification_method:"SECRET_AS_QUERY_PARAM",secret:"temperature"}}).then(function(e){l(e.data)}).catch(function(e){console.log(e)})},Oe=function(){v.a.get("https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/artists",{}).then(function(e){u(e.data)}).catch(function(e){console.log(e)})},je=function(){v.a.get("https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/getResults",{}).then(function(e){b(e.data)}).catch(function(e){console.log(e)})},Le=function(){""!==_&&v.a.get("https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/getuser",{params:{userId:_}}).then(function(e){null!==e.data&&y(e.data.results)})},Ce=function(){var e=we.get("artist");return null!==e?e.split(","):[]},Se=function(e){ce(e)},Ie=function(e){var t=e.map(function(e){return e.name});me(t)},xe=function(e){var t=e.map(function(e){return e.label});ve(t)},Me=function(){if(0===ue.length&&0===be.length&&0===Ee.length)"global"===V?T(N):"personal"===V&&T(x);else{var e=a.map(function(e){return e.id});if(ue.length>0&&a.forEach(function(t){Array.isArray(t.attributes.artistName)?!1===t.attributes.artistName.some(function(e){return ue.includes(e)})&&e.splice(e.findIndex(function(e){return e===t.id}),1):!1===ue.some(function(e){return e===t.attributes.artistName})&&e.splice(e.findIndex(function(e){return e===t.id}),1)}),be.length>0){var t=a.filter(function(e){return be.some(function(t){return e.attributes.releaseDate.includes(t)})}).map(function(e){return e.id});e=e.filter(function(e){return t.includes(e)}),we.set("years",be);var n=window.location.pathname+"?"+we.toString();window.history.pushState(null,"",n)}if(Ee.length>0){var r=a.filter(function(e){return Ee.includes(e.type)}).map(function(e){return e.id});e=e.filter(function(e){return r.includes(e)})}var l=[];l="global"===V?N.filter(function(t){return e.includes(t.albumId)}):x.filter(function(t){return e.includes(t.albumId)}),T(l)}},Ae=function(e){document.getElementById("table-row-".concat(e)).style.height="120px",document.getElementById("more ".concat(e)).innerHTML="More",document.getElementById("chevron ".concat(e)).style.transform="rotate(0deg)",document.getElementById("more ".concat(e)).style.visibility=""};return r.a.createElement("div",null,r.a.createElement(q,{artistFilter:ue,yearFilter:be}),r.a.createElement("div",{className:"filters-rankings"},r.a.createElement(W,{onSelect:function(e){z(e[0].value)},queryParams:V}),r.a.createElement(I,{albums:a,onSelect:Ie,onRemove:Ie,queryParams:ue,yearFilter:be,typeFilter:Ee}),r.a.createElement(P,{onChange:function(e){he(e)},queryParams:be,albums:a,artistFilter:ue,typeFilter:Ee}),r.a.createElement(ee,{onSelect:xe,onRemove:xe,queryParams:Ee,albums:a,artistFilter:ue,yearFilter:be}),r.a.createElement("div",{className:"share"},"personal"===V?r.a.createElement(L.a,{theme:S},r.a.createElement(ae.a,{variant:"contained",onClick:function(){var e=ue.map(function(e){return e}),t=e.pop(),n="";Ee.length>0&&(n=Ee[0].toLowerCase());var r=be.map(function(e){return e}),l=r.pop(),s="My top ranked ".concat(ue.length>1?"".concat(e.join(", ")+" & "+t+" "):ue.length>0?"".concat(ue[0]," "):"").concat(Ee.length>0?"".concat(n,"s"):"albums"," of ").concat(document.getElementById("select-all-twenties").classList.contains("year-selected")?"the 2020's":document.getElementById("select-all-teens").classList.contains("year-selected")?"the 2010's":document.getElementById("select-all-aughts").classList.contains("year-selected")?"the 2000's":be.length>1?"".concat(r.join(", ")+" & "+l):be.length>0?"".concat(be[0]):"all time",": \n").concat(F.map(function(e,t){return"".concat(t+1,". ").concat(a.find(function(t){return t.id===e.albumId}).attributes.name," ").concat(void 0!==a.find(function(t){return t.id===e.albumId}).attributes.emoji?a.find(function(t){return t.id===e.albumId}).attributes.emoji:"")}).join("\n"));navigator.clipboard.writeText(s)},color:"secondary",sx:{borderRadius:"20px",height:"40px",padding:"0px 32px 0px 32px",textTransform:"none",fontSize:"16px",fontFamily:"Helvetica",color:"#FFFFFF"},endIcon:r.a.createElement(te.a,{size:"small"})},"Share")):null)),r.a.createElement(Q,null),r.a.createElement("div",{className:"table-container",id:"table-container"},Z?r.a.createElement("span",{className:"loader"}):F.map(function(e,t){return r.a.createElement(J,{key:t,album:a.find(function(t){return t.id===e.albumId}),rank:t+1,albums:a,artists:o,rankingGlobal:N,rankingUser:x,resultsGlobal:f,resultsUser:E,selectedRanking:V,isExpanded:Se})})),r.a.createElement("div",{className:"embed"}))};var re=function(){return r.a.createElement(G,null)},le=function(e){e&&e instanceof Function&&a.e(1).then(a.bind(null,170)).then(function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,l=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),l(e),s(e)})},se=a(1);s.a.createRoot(document.getElementById("root")).render(r.a.createElement(U.a,null,r.a.createElement(se.c,null,r.a.createElement(se.a,{path:"/",element:r.a.createElement(re,null)}),r.a.createElement(se.a,{index:!0,element:r.a.createElement(G,null)}),r.a.createElement(se.a,{path:"rankings",element:r.a.createElement(ne,null)})))),le()},139:function(e,t,a){},141:function(e,t,a){},143:function(e,t,a){},146:function(e,t,a){},148:function(e,t,a){},150:function(e,t,a){},77:function(e,t,a){e.exports=a(133)},85:function(e,t,a){},88:function(e,t,a){},90:function(e,t,a){},94:function(e,t,a){}},[[77,3,2]]]);
//# sourceMappingURL=main.aeee95a4.chunk.js.map