{"version":3,"sources":["Images/rankabl-logo.png","util/newShade.js","Components/Album/Album.js","Components/AlbumContainer/AlbumContainer.js","util/generatePairs.js","util/getArtists.js","Components/MuiTheme/Theme.js","Components/ArtistFilter/ArtistFilter.js","Components/YearFilter/YearFilter.js","Components/Header/Header.js","Components/RankingFilter/RankingFilter.js","util/solveRanking.js","Components/Rank/Rank.js","Components/TableRow/TableRowCarousel.js","Components/TableRow/TableRow.js","Components/TableHeader/TableHeader.js","Components/RankingSelect/RankingSelect.js","Components/TypeSelect/TypeSelect.js","Components/Ranking/Rankings.js","App.js","reportWebVitals.js","index.js"],"names":["module","exports","__webpack_require__","p","newShade","color","percent","num","parseInt","amt","Math","round","R","B","G","toString","slice","Album","Array","isArray","this","props","album","attributes","artistName","join","url","replace","style","--bg-color","artwork","bgColor","--text-color-1","textColor1","--text-color-2","textColor2","--text-color-3","textColor3","--text-color-4","textColor4","--shadow","--shadow-hover","--bg-gradient","react_default","a","createElement","className","id","onMouseDown","mouseDown","onMouseUp","mouseUp","onClick","src","replaceUrl","alt","name","getArtistName","React","Component","require","AlbumContainer","_useState","useState","_useState2","Object","slicedToArray","albumPairs","setAlbumPairs","_useState3","_useState4","selectedPair","setSelectedPair","_useState5","_useState6","album1","setAlbum1","_useState7","_useState8","album2","setAlbum2","_useState9","_useState10","loading","setLoading","_useState11","_useState12","seenPairs","setSeenPairs","_useState13","_useState14","needNewPair","setNeedNewPair","useEffect","length","albumsLoaded","loadedUserData","albums","filteredPairs","filterPairs","console","log","setTimeout","getNewAlbums","then","view","array","pairs","results","i","j","push","generatePairs","votedPairs","includes","filter","pair","selectAlbums","floor","random","_ref","asyncToGenerator","_regeneratorRuntime","mark","_callee","albumArray","selectedAlbums","album1Index","album2Index","errorMessages","skipButtons","wrap","_context","prev","next","find","from","document","getElementsByClassName","forEach","element","visibility","removeAttribute","stop","_x","apply","arguments","pushResults","e","album1Id","album2Id","result","currentTarget","axios","method","params","userId","data","seenPair","res","userResult","catch","err","handleClick","_ref2","_callee2","_context2","_x2","skip","target","filteredArray","getElementById","setAttribute","newAlbums","albumId","filters","Components_Album_Album","classList","add","getArtists","_loop","some","obj","count","sort","b","theme","createTheme","palette","primary","main","contrastText","secondary","ArtistFilter","options","setOptions","selectedValues","setSelectedValues","queryParams","map","artist","option","filterArtists","yearFilter","typeFilter","filteredAlbums","year","releaseDate","typeAlbums","type","dist_default","onSelect","onRemove","displayValue","avoidHighlightFirstOption","placeholder","closeIcon","hidePlaceholder","closeOnSelect","customArrow","ThemeProvider","SearchRounded","fontSize","showArrow","CarousalItem","children","width","Carousal","activeIndex","setActiveIndex","updateIndex","newIndex","Children","index","getDecade","transform","concat","child","cloneElement","YearFilter","selectedList","setSelectedList","isOpen","setIsOpen","setCount","aughts","setAughts","teens","setTeens","twenties","setTwenties","toggle","calendarRef","useRef","handler","event","current","contains","addEventListener","removeEventListener","onChange","splitYearParams","disableYears","artistFilter","searchParams","URLSearchParams","window","location","search","yearParams","get","split","yearHover","yearHoverLeave","remove","selectYear","onRemoveSelectedItem","innerHTML","newList","toConsumableArray","selectDecade","querySelectorAll","el","pushedArray","item","toggleCalendar","years","$","_","x","aughtsDefault","teensDefault","twentiesDefault","splice","findIndex","filterAlbum","albumYears","uniqueYears","Set","disabled","aughtsFiltered","teensFiltered","twentiesFiltered","every","ref","chipArray","ExpandMoreRounded","baseClassName","value","key","renderSelectedList","YearFilter_Carousal","YearFilter_CarousalItem","onMouseEnter","onMouseLeave","Header","pathname","logo","react_router_dom","to","headerParams","RankingFilter","sliderValue","setSliderValue","toggleSlider","sliderMarks","label","chipValue","FormControl","RadioGroup","row","defaultValue","FormControlLabel","control","Radio","size","sx","marginRight","Slider","marks","step","max","newValue","filterRanking","solveRanking","formattedResults","newResult","ids","keys","flatIds","flat","uniqueIds","matrix","m4th","set","gameCount","k","ratings","albumWL","albumRating","reduce","previousValue","currentValue","y","solution","lu","solve","rankings","rating","App","setArtistFilter","setYearFilter","rankingFilterValue","setRankingFilterValue","allAlbums","setAllAlbums","availableAlbums","setAvailableAlbums","loadedAlbums","setLoadedAlbums","filtersEnabled","setFiltersEnabled","_useState15","_useState16","setUserId","_useState17","_id","_useState18","userData","setUserData","_useState19","_useState20","setLoadedUserData","_useState21","_useState22","artistParams","setArtistParams","_useState23","_useState24","resultsGlobal","setResultsGlobal","_useState25","_useState26","resultsUser","setResultsUser","_useState27","_useState28","rankingGlobal","setRankingGlobal","_useState29","_useState30","setRankingUser","getUserId","fetchAlbums","fetchResults","splitArtistParams","getUserData","filterAlbums","delete","newRelativePathQuery","history","pushState","verification_method","secret","response","jsCookie","uuid","v4","expires","artistArray","rankingFilterAlbums","filterArtist","filterYear","classNyarn","run","deployame","Components_Header_Header","Components_ArtistFilter_ArtistFilter","YearFilter_YearFilter_YearFilter","RankingFilter_RankingFilter_RankingFilter","Button","top","overflow","variant","textTransform","borderRadius","endIcon","FilterAltRounded","Components_AlbumContainer_AlbumContainer","IconButton","CloseRounded","CarouselItem","Carousel","TableRow","setStyle","editorialNotes","rank","standard","date","getAllArtistAlbums","artistInput","sameArtist","globalIds","ranking","userIds","rankingUser","selectedRanking","renderOtherAlbums","otherAlbums","getOtherAlbums","getArtistArtworkUrl","artists","moment","format","height","scrollIntoView","behavior","block","isExpanded","genreNames","trackCount","filteredResults","recentResults","reverse","getRecentResults","TableRowCarousel_Carousel","TableRowCarousel_CarouselItem","toFixed","TableHeader","RankingSelect","singleSelect","TypeSelect","getTypeOptions","filterTypes","toLowerCase","albumA","foundAlbum","Rankings","setAlbums","setArtists","currentRanking","setCurrentRanking","setSelectedRanking","isLoading","setIsLoading","rowExpanded","setRowExpanded","setTypeFilter","fetchArtists","getAll","filterRankings","closeRow","prevRow","usePrevious","filterType","filteredIds","yearIds","typeIds","filteredRanking","Components_RankingSelect_RankingSelect","selectedItem","Components_TypeSelect_TypeSelect","artistFilterShare","artistFilterLast","pop","yearFilterShare","yearFilterLast","shareRanking","sharedText","undefined","emoji","navigator","clipboard","writeText","padding","fontFamily","ShareOutlined","Components_TableHeader_TableHeader","Components_TableRow_TableRow","Fragment","react_router","reportWebVitals","onPerfEntry","Function","bind","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","render","basename","path","src_App","Rank_Rank","Components_Ranking_Rankings"],"mappings":"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","file":"static/js/main.b70ce00f.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/rankabl-logo.251c7ee4.png\";","const newShade = function(color, percent) {\n    var num = parseInt(color,16),\n      amt = Math.round(2.55 * percent),\n      R = (num >> 16) + amt,\n      B = (num >> 8 & 0x00FF) + amt,\n      G = (num & 0x0000FF) + amt;\n\n      return (0x1000000 + (R<255?R<1?0:R:255)*0x10000 + (B<255?B<1?0:B:255)*0x100 + (G<255?G<1?0:G:255)).toString(16).slice(1);\n};\n\nexport default newShade;","import React from \"react\";\nimport \"./Album.css\";\nimport newShade from \"../../util/newShade\";\nimport { stringify } from \"uuid\";\n\nclass Album extends React.Component {\n  \n  /* mouseDown() {\n    document.getElementById().style.transform = \"scale(0.99)\";\n  }\n\n  mouseUp() {\n    document.getElementById().style.transform = \"scale(1)\";\n  } */\n\n  getArtistName() {\n    if (Array.isArray(this.props.album.attributes.artistName)) {\n      return this.props.album.attributes.artistName.join(' & ');\n    } else {\n      return this.props.album.attributes.artistName;\n    }\n  }\n\n  replaceUrl(url) {\n    let coverArtUrl = url.replace('{w}', '600').replace('{h}', '600')\n    return coverArtUrl;\n  }\n  \n  \n  render() {\n    if (this.props.album) {\n      const style = { '--bg-color': '#' + this.props.album.attributes.artwork.bgColor, \n                  '--text-color-1': '#' + this.props.album.attributes.artwork.textColor1, \n                  '--text-color-2': '#' + this.props.album.attributes.artwork.textColor2, \n                  '--text-color-3': '#' + this.props.album.attributes.artwork.textColor3, \n                  '--text-color-4': '#' + this.props.album.attributes.artwork.textColor4,\n                  '--shadow': '#' + this.props.album.attributes.artwork.textColor4 + '25',\n                  '--shadow-hover': '#' + this.props.album.attributes.artwork.textColor4 + '50',\n                  '--bg-gradient': '#' + newShade(this.props.album.attributes.artwork.bgColor, 8)}\n\n      return (\n        <div className=\"album\" id={this.props.id} style={style} onMouseDown={this.mouseDown} onMouseUp={this.mouseUp} onClick={this.props.onClick}>\n          <img src={this.replaceUrl(this.props.album.attributes.artwork.url)} alt={this.props.album.attributes.name} />\n          <h1 className=\"album-title\" >{this.props.album.attributes.name}</h1>\n          <h2 className=\"album-artist\" >{this.getArtistName()}</h2>\n        </div>\n      );\n    } \n  }\n}\n\nexport default Album;","import React, { useState, useEffect } from \"react\";\nimport Album from \"../Album/Album\";\nimport './AlbumContainer.css';\nimport { generatePairs } from \"../../util/generatePairs\";\nimport axios from \"axios\";\nimport { arrayEquals } from \"../../util/generatePairs\";\n\nconst m4th = require('m4th');\n\nconst AlbumContainer = (props) => {\n    \n    let [albumPairs, setAlbumPairs] = useState([]);\n    let [selectedPair, setSelectedPair] = useState([]);\n    let [album1, setAlbum1] = useState([]);\n    let [album2, setAlbum2] = useState([]);\n    let [loading, setLoading] = useState(false);\n    let [seenPairs, setSeenPairs] = useState([]);\n    let [needNewPair, setNeedNewPair] = useState(false);\n\n    useEffect(() => {\n        setLoading(true);\n    }, []);\n\n    useEffect(() => {\n        if (albumPairs.length === 0  && props.albumsLoaded && props.loadedUserData) {\n            setSeenPairs(props.seenPairs)\n        }\n    }, [props.albumsLoaded, props.loadedUserData]);\n\n    useEffect(() => {\n        if (props.loadedUserData && props.albums) {\n            const filteredPairs = filterPairs(props.albums)\n            setAlbumPairs(filteredPairs)\n        };\n    }, [seenPairs]);\n\n    useEffect(() => {\n        if (albumPairs.length > 0) {\n            setNeedNewPair(true);\n            console.log('new pair')\n        } else if (props.albumsLoaded && props.loadedUserData) {\n            setTimeout(() => {setLoading(false)}, 300);\n            console.log(' no more albums ')\n        }\n    }, [albumPairs]);\n\n    useEffect(() => {\n        if (needNewPair && albumPairs.length > 0) {\n            getNewAlbums(albumPairs)\n            .then(() => {\n                setNeedNewPair(false);\n                setLoading(false);\n            });\n        }\n    }, [needNewPair]);\n\n    useEffect(() => {\n        if (props.albumsLoaded) {\n            console.log('albums changed');\n            setLoading(true);\n            setTimeout(() => {setAlbumPairs(filterPairs(props.albums))}, 300);\n        }\n    }, [props.albums]);\n\n    const filterPairs = (array) => {\n        const pairs = generatePairs(array);\n        let votedPairs = [];\n        for (let i = 0; i < seenPairs.length; i++) {\n            for (let j = 0; j < pairs.length; j++) {\n                if (seenPairs[i].includes(pairs[j][0]) && seenPairs[i].includes(pairs[j][1])) {\n                    votedPairs.push(pairs[j]);\n                }\n            }\n        }\n        const finalTry = pairs.filter(pair => !votedPairs.includes(pair))\n        return finalTry;  \n    }\n\n    const selectAlbums = (array) => {\n        const selectedPair = array[Math.floor(Math.random() * array.length)];\n        return selectedPair;\n    }\n\n    const filterAvailablePairs = (seenPairsFilter, albumPairs) =>{\n        for (let i = 0; i < albumPairs.length; i++) {\n            for (let j = 0; j < seenPairs.length; j++) {\n                if (arrayEquals(albumPairs[i], seenPairs[j])) {\n                    seenPairsFilter.push(albumPairs[i]);\n                }\n            }\n        }\n    }\n\n    const getNewAlbums= async (albumArray) => {\n        const selectedAlbums = selectAlbums(albumArray);\n        const album1Index = Math.floor(Math.random() * selectedAlbums.length);\n        const album2Index = 1 - album1Index;\n        await setSelectedPair(selectedAlbums);\n        await setAlbum1(props.albums.find(album => album.id === selectedAlbums[album1Index]));\n        await setAlbum2(props.albums.find(album => album.id === selectedAlbums[album2Index]));\n        const errorMessages = Array.from(document.getElementsByClassName('skip-error-message'))\n        const skipButtons = Array.from(document.getElementsByClassName('skip-button'))\n        errorMessages.forEach(element => {\n            element.style.visibility = 'hidden';\n        });\n        skipButtons.forEach(element => {\n            element.removeAttribute('disabled');\n        }); \n    }\n\n    const pushResults = (e) => {\n        let album1Id = album1.id;\n        let album2Id = album2.id;\n        let result = {};\n        if (e.currentTarget.id === 'album1') {\n            result[album1Id] = 1;\n            result[album2Id] = -1;\n            result = {\n                album1: {\n                    id: album1Id,\n                    result: 1\n                },\n                album2: {\n                    id: album2Id,\n                    result: -1\n                }\n            }\n            setLoading(true);\n            axios({\n                url: 'https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/results/save',\n                method: 'POST',\n                params: {\n                    userId: props.userId,\n                },\n                data: {\n                    result: result,\n                    seenPair: selectedPair\n                }\n            }).then(res => {\n                setSeenPairs(res.data.userResult.seenPairs);\n                console.log(res.data.userResult.seenPairs);\n            }).catch(err => {\n                console.log(err);\n            });\n        }\n        if (e.currentTarget.id === 'album2') {\n            result[album1Id] = -1;\n            result[album2Id] = 1;\n            result = {\n                album1: {\n                    id: album1Id,\n                    result: -1\n                },\n                album2: {\n                    id: album2Id,\n                    result: 1\n                }\n            }\n            setLoading(true);\n            axios({\n                url: 'https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/results/save',\n                method: 'POST',\n                params: {\n                    userId: props.userId,\n                },\n                data: {\n                    result: result,\n                    seenPair: selectedPair\n                }\n            }).then(res => {\n                setSeenPairs(res.data.userResult.seenPairs);\n                console.log(res.data.userResult.seenPairs);\n            }).catch(err => {\n                console.log(err);\n            });\n        }\n    }\n\n    const handleClick = async (e) => {\n        await pushResults(e);\n    }\n\n    const skip = (e) => {\n        const album1Id = album1.id;\n        const album2Id = album2.id;\n\n        if (e.target.id === 'second') {\n            const filteredArray = albumPairs.filter(function(pairs) {\n                return pairs.includes(album1Id) && !pairs.includes(album2Id)\n            })\n            if (filteredArray.length === 0) {\n                document.getElementById('second').setAttribute(\"disabled\", \"disabled\")\n                document.getElementById('first').setAttribute(\"disabled\", \"disabled\")\n                document.getElementById('skip-error-second').style.visibility = \"visible\"\n                return\n            } else {\n                const newAlbums = selectAlbums(filteredArray);\n                setSelectedPair(newAlbums);\n                setAlbum2(props.albums.find(album => album.id === newAlbums.find(albumId => albumId !== album1Id)));\n            }\n        } else if (e.target.id === 'first') {\n            const filteredArray = albumPairs.filter(function(pairs) {\n                return pairs.includes(album2Id) && !pairs.includes(album1Id)\n            })\n            if (filteredArray.length === 0) {\n                document.getElementById('first').setAttribute(\"disabled\", \"disabled\");\n                document.getElementById('second').setAttribute(\"disabled\", \"disabled\");\n                document.getElementById('skip-error-first').style.visibility = \"visible\"\n                return\n            } else {\n                const newAlbums = selectAlbums(filteredArray);\n                setSelectedPair(newAlbums);\n                setAlbum1(props.albums.find(album => album.id === newAlbums.find(albumId => albumId !== album2Id)));\n            }\n        }\n    }\n\n    const skipBoth = () => {\n        const album1Id = album1.id;\n        const album2Id = album2.id;\n        const filteredArray = albumPairs.filter(function(pairs) {\n            return !pairs.includes(album1Id) && !pairs.includes(album2Id)\n        });\n        if (filteredArray.length === 0) {\n            document.getElementById('skip-both').setAttribute(\"disabled\", \"disabled\");\n            document.getElementById('skip-error-both').classList.add('is-visible');\n        } else {\n            const selectedAlbums = selectAlbums(filteredArray);\n            const album1Index = Math.floor(Math.random() * selectedAlbums.length);\n            const album2Index = 1 - album1Index;\n            setSelectedPair(selectedAlbums);\n            setAlbum1(props.albums.find(album => album.id === selectedAlbums[album1Index]));\n            setAlbum2(props.albums.find(album => album.id === selectedAlbums[album2Index]));\n        }\n    }\n\n    const filters = props.filters;\n    let view;\n    if (loading) {\n        view =  <div className=\"album-container\">\n                    <span className='loader' ></span>\n                </div>\n    } else if (albumPairs.length === 0) {\n        if (filters) {\n            view = <h1>No available pairs of albums. Widen filters and try again.</h1>\n            document.getElementById('first').setAttribute(\"disabled\", \"disabled\");\n            document.getElementById('second').setAttribute(\"disabled\", \"disabled\");\n            document.getElementById('skip-both').setAttribute(\"disabled\", \"disabled\");\n        } else {\n            view = <h1>No available pairs of albums.</h1>\n            document.getElementById('first') && document.getElementById('first').setAttribute(\"disabled\", \"disabled\");\n            document.getElementById('second') && document.getElementById('second').setAttribute(\"disabled\", \"disabled\");\n            document.getElementById('skip-both') && document.getElementById('skip-both').setAttribute(\"disabled\", \"disabled\");\n        }\n    } else {\n        view =  <div className='album-container'>\n                    <Album className='album' id='album1' album={album1} onClick={handleClick} />\n                    <button className='skip skip-button' id=\"first\" onClick={skip} >Skip</button>\n                    <button className='skip skip-button skip-both' id='skip-both' onClick={skipBoth} >Skip both</button>\n                    <Album className='album' id='album2' album={album2} onClick={handleClick} />\n                    <button className='skip skip-button' id=\"second\" onClick={skip} >Skip</button>\n                    <p className='skip-error-message' id='skip-error-first' >No available albums</p>\n                    <p className='skip-error-both' id='skip-error-both' >No available albums</p>\n                    <p className='skip-error-message' id='skip-error-second' >No available albums</p>\n                </div>\n\n    }\n\n    return (\n        <div className='view-container'>\n            {view}\n        </div>\n    )\n\n}\n\nexport default AlbumContainer;","import seenPairs from \"../seenPairs\";\n\nexport const generatePairs = (array) => {\n    let results = [];\n    for (let i = 0; i < array.length - 1; i++) {\n        for (let j = i + 1; j < array.length; j++)\n        results.push([array[i].id, array[j].id])\n    };\n    return results;\n}\nexport function arrayEquals(a, b) {\n    return Array.isArray(a) &&\n      Array.isArray(b) &&\n      a.length === b.length &&\n      a.every((val, index) => val === b[index]);\n  }\n\n\n","function getArtists(array) {\n    let results = [];\n    for (let i = 0; i < array.length; i++) {\n        if (Array.isArray(array[i].attributes.artistName)){\n            for (let j = 0; j < array[i].attributes.artistName.length; j++) {\n                let artistName = array[i].attributes.artistName[j];\n                let exists = results.some(obj => obj.name === artistName);\n                 if (!exists) {\n                    results.push({\n                        name: artistName,\n                        id: results.length + 1,\n                        count: array.filter(album => album.attributes.artistName === artistName).length})\n                }\n            }\n        } else {\n            let artistName = array[i].attributes.artistName;\n            let exists = results.some(obj => obj.name === artistName);\n            if (!exists) {\n            results.push({\n                name: artistName,\n                id: results.length + 1,\n                count: array.filter(album => album.attributes.artistName === artistName).length})\n            }\n        }\n    };\n    let sortedResults = results.sort((a, b) => b.count - a.count);\n    return sortedResults;\n}\n\nexport default getArtists;","import { createTheme } from \"@mui/material\";\n\nconst theme = createTheme({\n    palette: {\n        primary: {\n            main: \"#CFCFCF\",\n            contrastText: \"#fff\"\n        },\n        secondary: {\n            main: \"#8673FA\",\n            contrastText: \"#fff\"\n        }\n    },\n\n    mark: {\n        color: \"red\"\n      }\n});\n\nexport default theme;","import React, { useState, useEffect } from \"react\";\nimport Multiselect from \"multiselect-react-dropdown\";\nimport './ArtistFilter.css'\nimport getArtists from \"../../util/getArtists\";\nimport { SearchRounded } from \"@mui/icons-material\";\nimport { ThemeProvider } from \"@mui/system\";\nimport theme from '../MuiTheme/Theme';\n\nconst ArtistFilter = (props) => {\n    let [options, setOptions] = useState([]);\n    let [selectedValues, setSelectedValues] = useState([]);\n\n    useEffect(() => {\n        setOptions(getArtists(props.albums));\n    }, [props.albums]);\n\n    useEffect(() => {\n        if (options.length > 0) {\n            setSelectedValues(props.queryParams.map(artist => options.find(option => option.name === artist)));\n        }\n    }, [options])\n\n    useEffect( () => {\n        setOptions(getArtists(filterArtists()));\n    }, [props.yearFilter, props.typeFilter])\n\n    const filterArtists = () => {\n        let filteredAlbums = props.albums.map(album => album);\n\n        if (props.yearFilter.length > 0) {\n            filteredAlbums = filteredAlbums.filter(album => props.yearFilter.some(year => album.attributes.releaseDate.includes(year)));\n        }\n\n        if (props.typeFilter && props.typeFilter.length > 0) {\n            let typeAlbums = props.albums.filter(album => props.typeFilter.includes(album.type));\n            filteredAlbums = filteredAlbums.filter(album => typeAlbums.includes(album));\n            console.log(filteredAlbums);\n        }\n\n        return filteredAlbums\n    }\n\n\n\n    return (\n        <Multiselect id={props.id}\n        options={options} // Options to display in the dropdown\n        selectedValues={selectedValues} // Preselected value to persist in dropdown\n        onSelect={props.onSelect} // Function will trigger on select event\n        onRemove={props.onRemove} // Function will trigger on remove event\n        displayValue=\"name\" // Property name to display in the dropdown options\n        avoidHighlightFirstOption='true'\n        placeholder={'Artists'}\n        closeIcon={'cancel'}\n        hidePlaceholder={'true'}\n        closeOnSelect={'true'}\n        customArrow={<ThemeProvider theme={theme} ><SearchRounded color=\"primary\" fontSize=\"small\"/></ThemeProvider>}\n        showArrow={'true'}\n        />     \n    )\n\n}\n\nexport default ArtistFilter;","import React, { useEffect, useRef, useState } from \"react\";\nimport './YearFilter.css';\nimport $ from 'jquery';\nimport { ExpandMoreRounded } from \"@mui/icons-material\";\nimport { ThemeProvider } from \"@mui/system\";\nimport theme from '../MuiTheme/Theme';\n\nconst CarousalItem = ({children, width}) => {\n    return (\n        <div className=\"carousal-item\" style={{width: width}}>\n            {children}\n        </div>\n    );\n}\n\nconst Carousal = ({children}) => {\n    const [activeIndex, setActiveIndex] = useState(2);\n    \n    const updateIndex = (newIndex) => {\n        if (newIndex < 0) {\n            newIndex = 0;\n        } else if (newIndex >= React.Children.count(children)) {\n            newIndex = React.Children.count(children) - 1;\n        }\n\n        setActiveIndex(newIndex);\n    }\n\n    const getDecade = (index) => {\n        switch (index) {\n            case 0:\n                return \"2000's\";\n            case 1:\n                return \"2010's\";\n            case 2:\n                return \"2020's\";\n            default:\n                return \"Select years\";\n        }\n    }\n\n    return (\n        <div className=\"carousal\">\n            <div className='indicators'>\n                <button className='next-prev-button' onClick={() => {\n                    updateIndex(activeIndex - 1);\n                }}\n                >\n                    &lsaquo;\n                </button>\n                <span id='decade' >{getDecade(activeIndex)}</span>\n                <button className='next-prev-button' onClick={() => {\n                    updateIndex(activeIndex + 1);\n                }}\n                >\n                    \n                </button>\n            </div>\n            <div className=\"inner\" style={{ transform: `translateX(-${activeIndex * 100}%)` }}>\n                {React.Children.map(children, (child, index) => {\n                    return React.cloneElement(child, {width: \"100%\" });\n                })}\n            </div>\n        </div>\n    );\n}\n\nexport const YearFilter = (props) => {\n    let [selectedList, setSelectedList] = useState([]);\n    let [isOpen, setIsOpen] = useState(false);\n    let [count, setCount] = useState(0);\n    let [aughts, setAughts] = useState(['2000', '2001', '2002', '2003', '2004', '2005', '2006', '2007', '2008', '2009']);\n    let [teens, setTeens] = useState(['2010', '2011', '2012', '2013', '2014', '2015', '2016', '2017', '2018', '2019']);\n    let [twenties, setTwenties] = useState(['2020', '2021', '2022']);\n    \n    useEffect(() => {\n        if (count > 0) {\n            document.getElementById('calendar').classList.toggle('display');\n            console.log('filter display toggled');\n        }\n    }, [isOpen]);\n\n    let calendarRef= useRef();\n\n    useEffect(() => {\n        let handler = (event) => {\n            if (!calendarRef.current.contains(event.target)) {\n                document.getElementById('calendar').classList.add('display');\n            }\n        };\n\n        document.addEventListener('mousedown', handler);\n\n        return () => {\n            document.removeEventListener('mousedown', handler);\n        };\n    });\n\n    useEffect(() => {\n        props.onChange(selectedList);\n    }, [selectedList]);\n\n    useEffect(() => {\n        setSelectedList(splitYearParams);\n    }, [])\n\n    useEffect(() => {\n        if (props.albums.length > 0) {\n            disableYears();\n        }\n    }, [props.albums, props.artistFilter, props.typeFilter])\n\n    let searchParams = new URLSearchParams(window.location.search);\n    \n    const splitYearParams = () => {\n        let yearParams = searchParams.get('years');\n        if (yearParams !== null) {\n            let yearArray = yearParams.split(',');\n            return yearArray;\n        } else {\n            return [];\n        }\n    }\n\n    function yearHover(e) {\n        e.target.classList.add(\"hover\");\n    }\n\n    function yearHoverLeave(e) {\n        e.target.classList.remove(\"hover\");\n        e.target.classList.remove(\"select-hover\");\n    }\n\n    function selectYear(e) {\n        \n        if (e.target.classList.contains(\"year-selected\")) {\n            onRemoveSelectedItem(e.target.innerHTML)\n            if (e.target.classList.contains('aughts')) {\n                document.getElementById('select-all-aughts').classList.remove('year-selected');\n            } else if (e.target.classList.contains('teens')) {\n                document.getElementById('select-all-teens').classList.remove('year-selected');\n            } else if (e.target.classList.contains('twenties')) {\n                document.getElementById('select-all-twenties').classList.remove('year-selected');\n            }\n        } else {\n            e.target.classList.toggle(\"year-selected\");\n            let newList = [...selectedList, e.target.innerHTML];\n            setSelectedList(newList.sort());\n        }\n    }\n\n    function selectDecade(e) {\n        if (e.target.classList.contains('aughts')) {\n            if (!e.target.classList.contains('year-selected')) {\n                let pushedArray = aughts.filter(year => !selectedList.includes(year));\n                setSelectedList([...selectedList, ...pushedArray]);\n                Array.from(document.querySelectorAll('.aughts')).forEach((el) => el.classList.add('year-selected')); \n            } else {\n                setSelectedList(selectedList.filter(year => !aughts.includes(year)))\n                Array.from(document.querySelectorAll('.aughts')).forEach((el) => el.classList.remove('year-selected'));\n                document.getElementById('select-all-aughts').innerHTML = 'Select All';\n            }\n        } else if (e.target.classList.contains('teens')) {\n            if (!e.target.classList.contains('year-selected')) {\n                let pushedArray = teens.filter(year => !selectedList.includes(year));\n                setSelectedList([...selectedList, ...pushedArray]);\n                Array.from(document.querySelectorAll('.teens')).forEach((el) => el.classList.add('year-selected')); \n            } else {\n                setSelectedList(selectedList.filter(year => !teens.includes(year)))\n                Array.from(document.querySelectorAll('.teens')).forEach((el) => el.classList.remove('year-selected'));\n                document.getElementById('select-all-teens').innerHTML = 'Select All';\n            }\n        } else if (e.target.classList.contains('twenties')) {\n            if (!e.target.classList.contains('year-selected')) {\n                let pushedArray = twenties.filter(year => !selectedList.includes(year));\n                console.log(pushedArray);\n                setSelectedList([...selectedList, ...pushedArray]);\n                Array.from(document.querySelectorAll('.twenties')).forEach((el) => el.classList.add('year-selected')); \n            } else {\n                setSelectedList(selectedList.filter(year => !twenties.includes(year)))\n                Array.from(document.querySelectorAll('.twenties')).forEach((el) => el.classList.remove('year-selected'));\n                document.getElementById('select-all-twenties').innerHTML = 'Select All';\n            }\n        }\n    }\n\n    \n    function renderSelectedList() { \n        let chipArray = selectedList; \n        if (aughts.length > 0 && aughts.every(year => chipArray.includes(year))) {\n            chipArray = chipArray.filter(year=> !aughts.includes(year));\n            chipArray.push(\"2000's\")\n            chipArray.sort()\n            document.getElementById('select-all-aughts').classList.add(\"year-selected\");\n            document.getElementById('select-all-aughts').innerHTML = 'Remove All'\n        }\n        if (teens.length > 0 && teens.every(year => chipArray.includes(year))) {\n            chipArray = chipArray.filter(year=> !teens.includes(year));\n            chipArray.push(\"2010's\")\n            chipArray.sort();\n            document.getElementById('select-all-teens').classList.add(\"year-selected\");\n            document.getElementById('select-all-teens').innerHTML = 'Remove All'\n        }\n        if (twenties.length > 0 && twenties.every(year => chipArray.includes(year))) {\n            chipArray = chipArray.filter(year=> !twenties.includes(year));\n            chipArray.push(\"2020's\")\n            chipArray.sort();\n            document.getElementById('select-all-twenties').classList.add(\"year-selected\");\n            document.getElementById('select-all-twenties').innerHTML = 'Remove All'\n        }\n        if (selectedList.length === 0) {\n            return <div className='placeholder' onClick={toggleCalendar} >\n                <p className='placeholder-text'>Years</p>\n                <ThemeProvider theme={theme}>\n                    <ExpandMoreRounded color=\"primary\" baseClassName=\"icon\" id=\"year-filter-icon\"/>\n                </ThemeProvider>\n                </div>\n        } else {\n            return chipArray.map((value, index) => (\n                <span className='chip-year' key={index}>\n                    {value} <img\n                    className=\"icon_cancel closeIcon\" \n                    alt='Cancel icon'\n                    src=\"data:image/svg+xml,%3Csvg%20height%3D%22512px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20width%3D%22512px%22%20xml%3Aspace%3D%22preserve%22%20%20%20%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20%20%20%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%20%20%20%20%3Cstyle%20type%3D%22text%2Fcss%22%3E%20%20%20%20%20%20%20%20.st0%7B%20%20%20%20%20%20%20%20%20%20%20%20fill%3A%23fff%3B%20%20%20%20%20%20%20%20%7D%20%3C%2Fstyle%3E%20%20%20%20%3Cpath%20class%3D%22st0%22%20d%3D%22M443.6%2C387.1L312.4%2C255.4l131.5-130c5.4-5.4%2C5.4-14.2%2C0-19.6l-37.4-37.6c-2.6-2.6-6.1-4-9.8-4c-3.7%2C0-7.2%2C1.5-9.8%2C4%20%20L256%2C197.8L124.9%2C68.3c-2.6-2.6-6.1-4-9.8-4c-3.7%2C0-7.2%2C1.5-9.8%2C4L68%2C105.9c-5.4%2C5.4-5.4%2C14.2%2C0%2C19.6l131.5%2C130L68.4%2C387.1%20%20c-2.6%2C2.6-4.1%2C6.1-4.1%2C9.8c0%2C3.7%2C1.4%2C7.2%2C4.1%2C9.8l37.4%2C37.6c2.7%2C2.7%2C6.2%2C4.1%2C9.8%2C4.1c3.5%2C0%2C7.1-1.3%2C9.8-4.1L256%2C313.1l130.7%2C131.1%20%20c2.7%2C2.7%2C6.2%2C4.1%2C9.8%2C4.1c3.5%2C0%2C7.1-1.3%2C9.8-4.1l37.4-37.6c2.6-2.6%2C4.1-6.1%2C4.1-9.8C447.7%2C393.2%2C446.2%2C389.7%2C443.6%2C387.1z%22%2F%3E%3C%2Fsvg%3E\" \n                    onClick={() => onRemoveSelectedItem(value)}>\n                    </img>\n                </span>\n            ));\n        }\n    }\n\n    \n    function onRemoveSelectedItem(item) {\n        if (item === \"2000's\") {\n            setSelectedList(selectedList.filter(year => !aughts.includes(year)))\n            Array.from(document.querySelectorAll('.aughts')).forEach((el) => el.classList.remove('year-selected'));\n            document.getElementById('select-all-aughts').innerHTML = 'Select All';\n        } else if (item === \"2010's\") {\n            setSelectedList(selectedList.filter(year => !teens.includes(year)))\n            Array.from(document.querySelectorAll('.teens')).forEach((el) => el.classList.remove('year-selected'));\n            document.getElementById('select-all-teens').innerHTML = 'Select All';\n        } else if (item === \"2020's\") {\n            setSelectedList(selectedList.filter(year => !twenties.includes(year)))\n            Array.from(document.querySelectorAll('.twenties')).forEach((el) => el.classList.remove('year-selected'));\n            document.getElementById('select-all-twenties').innerHTML = 'Select All';\n        } else {\n            setSelectedList(selectedList.filter(year => year !== item));\n            document.getElementById(item).classList.remove(\"year-selected\");\n            if (document.getElementById(item).classList.contains('aughts')) {\n                document.getElementById('select-all-aughts').classList.remove(\"year-selected\");\n                document.getElementById('select-all-aughts').innerHTML = 'Select All';\n            } else if (document.getElementById(item).classList.contains('teens')) {\n                document.getElementById('select-all-teens').classList.remove(\"year-selected\");\n                document.getElementById('select-all-teens').innerHTML = 'Select All';\n            } else if (document.getElementById(item).classList.contains('twenties')) {\n                document.getElementById('select-all-twenties').classList.remove(\"year-selected\");\n                document.getElementById('select-all-twenties').innerHTML = 'Select All';\n            }\n        }\n\t\t\n    }\n\n    function toggleCalendar() {\n        setCount(1);\n        setIsOpen(!isOpen);\n    }\n\n    function handleLabelClick(event) {\n        if (event.target !== event.currentTarget) {\n        } else {\n            toggleCalendar();\n        }\n    }\n\n    const disableYears = () => {\n        let years = $('.year').map(function(_, x) {return x.id; }).get();\n        let filteredAlbums = props.albums.map(album => album);\n        let aughtsDefault = ['2000', '2001', '2002', '2003', '2004', '2005', '2006', '2007', '2008', '2009'];\n        let teensDefault = ['2010', '2011', '2012', '2013', '2014', '2015', '2016', '2017', '2018', '2019'];\n        let twentiesDefault = ['2020', '2021', '2022'];\n\n        if (props.artistFilter.length > 0) {\n            props.albums.forEach(album => {\n                if (Array.isArray(album.attributes.artistName)) {\n                  if (album.attributes.artistName.some(artist => props.artistFilter.includes(artist)) === false) {\n                    filteredAlbums.splice(filteredAlbums.findIndex(filterAlbum => filterAlbum === album), 1);\n                  } \n                } else {\n                  if ((props.artistFilter.some(artist => artist === album.attributes.artistName)) === false) {\n                    filteredAlbums.splice(filteredAlbums.findIndex(filterAlbum => filterAlbum === album), 1);\n                  }\n                }\n            });\n        }\n\n        if (props.typeFilter && props.typeFilter.length > 0) {\n            let typeAlbums = props.albums.filter(album => props.typeFilter.includes(album.type));\n            filteredAlbums = filteredAlbums.filter(album => typeAlbums.includes(album));\n            console.log(filteredAlbums);\n        }\n\n        const albumYears = filteredAlbums.map(album => album.attributes.releaseDate.split('-')[0]);\n        const uniqueYears = [...new Set(albumYears)];\n        const yearsNotInData = years.filter(year => !uniqueYears.includes(year));\n        years.forEach(year => {\n            uniqueYears.includes(year) ? document.getElementById(year).disabled = false : document.getElementById(year).disabled = true;\n        });\n        \n        let aughtsFiltered = aughtsDefault.filter(year => uniqueYears.includes(year));\n        setAughts(aughtsFiltered);\n        let teensFiltered = teensDefault.filter(year => uniqueYears.includes(year));\n        setTeens(teensFiltered);\n        let twentiesFiltered = twentiesDefault.filter(year => uniqueYears.includes(year));\n        setTwenties(twentiesFiltered);\n\n        if (aughts.every(year => document.getElementById(year).disabled) || aughts.length === 0) {\n            document.getElementById('select-all-aughts').disabled = true;\n        }\n        if (twenties.some(year => document.getElementById(year).disabled === false) || twenties.length === 0) {\n            document.getElementById('select-all-aughts').disabled = false;\n        }\n        if (teens.every(year => document.getElementById(year).disabled) || teens.length === 0) {\n            document.getElementById('select-all-teens').disabled = true;\n        }\n        if (twenties.some(year => document.getElementById(year).disabled === false) || twenties.length === 0) {\n            document.getElementById('select-all-teens').disabled = false;\n        }\n        if (twenties.every(year => document.getElementById(year).disabled) || twenties.length === 0) {\n            document.getElementById('select-all-twenties').disabled = true;\n        }\n        if (twenties.some(year => document.getElementById(year).disabled === false) || twenties.length === 0) {\n            document.getElementById('select-all-twenties').disabled = false;\n        }\n\n        if (document.getElementById('select-all-aughts').classList.contains('year-selected')) {\n            let pushedArray = aughtsDefault.filter(year => uniqueYears.includes(year)).filter(year => !selectedList.includes(year));\n            console.log(pushedArray);\n            setSelectedList([...selectedList, ...pushedArray]);\n        }\n        if (document.getElementById('select-all-teens').classList.contains('year-selected')) {\n            let pushedArray = teensDefault.filter(year => uniqueYears.includes(year)).filter(year => !selectedList.includes(year));\n            console.log(pushedArray);\n            setSelectedList([...selectedList, ...pushedArray]);\n        }\n        if (document.getElementById('select-all-twenties').classList.contains('year-selected')) {\n            let pushedArray = twentiesDefault.filter(year => uniqueYears.includes(year)).filter(year => !selectedList.includes(year));\n            console.log(pushedArray);\n            setSelectedList([...selectedList, ...pushedArray]);\n        }\n    }\n\n\n    return (\n        <div ref={calendarRef} id={props.id}>\n            <div className='year-filter-container' id='year-filter-container' >\n                <div className='chip-wrapper' onClick={handleLabelClick}>\n                    {renderSelectedList()}\n                </div>\n            </div>\n            <div className='calendar-wrapper display' id='calendar'>\n                <Carousal>\n                    <CarousalItem>\n                        <div className='years-wrapper'>\n                            <button className='year aughts first-year' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2000'>2000</button>\n                            <button className='year aughts' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2001'>2001</button>\n                            <button className='year aughts' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2002' >2002</button>\n                            <button className='year aughts' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2003' >2003</button>\n                            <button className='year aughts' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2004' >2004</button>\n                            <button className='year aughts' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2005' >2005</button>\n                            <button className='year aughts' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2006' >2006</button>\n                            <button className='year aughts' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2007' >2007</button>\n                            <button className='year aughts' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2008' >2008</button>\n                            <button className='year aughts' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2009' >2009</button>\n                            <button className='select-all aughts' id='select-all-aughts' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectDecade} >Select All</button>\n                        </div>\n                    </CarousalItem>\n                    <CarousalItem>\n                        <div className='years-wrapper'>\n                            <button className='year teens first-year' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2010'>2010</button>\n                            <button className='year teens' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2011'>2011</button>\n                            <button className='year teens' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2012' >2012</button>\n                            <button className='year teens' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2013' >2013</button>\n                            <button className='year teens' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2014' >2014</button>\n                            <button className='year teens' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2015' >2015</button>\n                            <button className='year teens' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2016' >2016</button>\n                            <button className='year teens' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2017' >2017</button>\n                            <button className='year teens' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2018' >2018</button>\n                            <button className='year teens' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2019' >2019</button>\n                            <button className='select-all teens' id='select-all-teens' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectDecade} >Select All</button>\n                        </div>\n                    </CarousalItem>\n                    <CarousalItem>\n                        <div className='years-wrapper'>\n                            <button className='year twenties first-year' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2020'>2020</button>\n                            <button className='year twenties' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2021'>2021</button>\n                            <button className='year twenties' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2022' >2022</button>\n                            <button className='year twenties' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2023' >2023</button>\n                            <button className='year twenties' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2024' >2024</button>\n                            <button className='year twenties' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2025' >2025</button>\n                            <button className='year twenties' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2026' >2026</button>\n                            <button className='year twenties' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2027' >2027</button>\n                            <button className='year twenties' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2028' >2028</button>\n                            <button className='year twenties' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2029' >2029</button>\n                            <button className='select-all twenties' id='select-all-twenties' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectDecade} >Select All</button>\n                        </div>\n                    </CarousalItem>\n                </Carousal>                 \n            </div>           \n        </div>\n    )\n}","import React, { useEffect } from \"react\";\nimport './Header.css';\nimport logo from '../../Images/rankabl-logo.png';\nimport { Link } from \"react-router-dom\";\n\nconst Header = (props) => {\n    useEffect(() => {\n        if (window.location.pathname === '/') {\n            document.getElementById('rank').classList.add('active');\n        }\n        if (window.location.pathname === '/rankings') {\n            document.getElementById('rankings').classList.add('active');\n        }\n    }, [])\n\n    return (\n        <header className=\"header\">\n            <div className=\"header-logo\">\n                <img src={logo} alt='rankabl-logo' className='logo' />\n                <h1 className=\"brand\">rankabl</h1>\n            </div>\n            <div className=\"nav-container\">\n                <nav className=\"nav\">\n                    <ul className=\"nav-list\">\n                        <li className=\"nav-item\" id='rank'>\n                            <Link to={`/${(props.artistFilter && props.artistFilter.length > 0 && props.yearFilter && props.yearFilter > 0) ? '?artist=' + props.artistFilter.join('%2C') + '&years=' + props.yearFilter.join('%2C') : (props.artistFilter && props.artistFilter.length > 0) ? '?artist=' + props.artistFilter.join('%2C') : (props.yearFilter && props.yearFilter.length > 0) ? '?years=' + props.yearFilter.join('%2C') : ''}`}>RANK</Link>\n                        </li>\n                        <li className=\"nav-item\" id='rankings'>\n                            <Link to={props.headerParams ? '/rankings' + '?' + props.headerParams.toString() : '/rankings' }>RANKINGS</Link>\n                        </li>\n                    </ul>\n                </nav>\n            </div>\n        </header>\n    );\n}\n\nexport default Header;","import React, { useEffect, useRef, useState } from \"react\";\nimport './RankingFilter.css';\nimport $ from 'jquery';\nimport { ExpandMoreRounded } from \"@mui/icons-material\";\nimport { ThemeProvider } from \"@mui/system\";\nimport theme from '../MuiTheme/Theme';\nimport { Slider } from \"@mui/material\";\nimport { RadioGroup } from \"@mui/material\";\nimport {FormControl} from \"@mui/material\";\nimport {FormControlLabel} from \"@mui/material\";\nimport {FormLabel} from \"@mui/material\";\nimport { Radio } from \"@mui/material\";\n\nexport const RankingFilter = (props) => {\n    let [selectedList, setSelectedList] = useState([]);\n    let [isOpen, setIsOpen] = useState(false);\n    let [count, setCount] = useState(0);\n    let [sliderValue, setSliderValue] = useState();\n    let [aughts, setAughts] = useState(['2000', '2001', '2002', '2003', '2004', '2005', '2006', '2007', '2008', '2009']);\n    let [teens, setTeens] = useState(['2010', '2011', '2012', '2013', '2014', '2015', '2016', '2017', '2018', '2019']);\n    let [twenties, setTwenties] = useState(['2020', '2021', '2022']);\n    \n    useEffect(() => {\n        if (count > 0) {\n            document.getElementById('ranking-slider').classList.toggle('display');\n        }\n    }, [isOpen]);\n\n    useEffect(() => {\n        if (props.albums.length > 0) {\n            setSliderValue(props.albums.length);\n        }\n    }, [props.albums]);\n\n    let calendarRef= useRef();\n\n    useEffect(() => {\n        let handler = (event) => {\n            if (!calendarRef.current.contains(event.target)) {\n                document.getElementById('ranking-slider').classList.add('display');\n            }\n        };\n\n        document.addEventListener('mousedown', handler);\n\n        return () => {\n            document.removeEventListener('mousedown', handler);\n        };\n    });\n\n    useEffect(() => {\n        // props.onChange(selectedList);\n    }, [selectedList]);\n\n\n    let searchParams = new URLSearchParams(window.location.search);\n\n    \n    function renderSelectedList() { \n        let chipValue; \n        let sliderValues = [10, 20, 50, 100, 200]\n        if (sliderValues.some(value => value === sliderValue)) {\n            return (\n                <div className='chip-container'>\n                    <span className='chip-ranking'>\n                        {`Top ${sliderValue}`} <img\n                        className=\"icon_cancel closeIcon\" \n                        alt='Cancel icon'\n                        src=\"data:image/svg+xml,%3Csvg%20height%3D%22512px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20width%3D%22512px%22%20xml%3Aspace%3D%22preserve%22%20%20%20%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20%20%20%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%20%20%20%20%3Cstyle%20type%3D%22text%2Fcss%22%3E%20%20%20%20%20%20%20%20.st0%7B%20%20%20%20%20%20%20%20%20%20%20%20fill%3A%23fff%3B%20%20%20%20%20%20%20%20%7D%20%3C%2Fstyle%3E%20%20%20%20%3Cpath%20class%3D%22st0%22%20d%3D%22M443.6%2C387.1L312.4%2C255.4l131.5-130c5.4-5.4%2C5.4-14.2%2C0-19.6l-37.4-37.6c-2.6-2.6-6.1-4-9.8-4c-3.7%2C0-7.2%2C1.5-9.8%2C4%20%20L256%2C197.8L124.9%2C68.3c-2.6-2.6-6.1-4-9.8-4c-3.7%2C0-7.2%2C1.5-9.8%2C4L68%2C105.9c-5.4%2C5.4-5.4%2C14.2%2C0%2C19.6l131.5%2C130L68.4%2C387.1%20%20c-2.6%2C2.6-4.1%2C6.1-4.1%2C9.8c0%2C3.7%2C1.4%2C7.2%2C4.1%2C9.8l37.4%2C37.6c2.7%2C2.7%2C6.2%2C4.1%2C9.8%2C4.1c3.5%2C0%2C7.1-1.3%2C9.8-4.1L256%2C313.1l130.7%2C131.1%20%20c2.7%2C2.7%2C6.2%2C4.1%2C9.8%2C4.1c3.5%2C0%2C7.1-1.3%2C9.8-4.1l37.4-37.6c2.6-2.6%2C4.1-6.1%2C4.1-9.8C447.7%2C393.2%2C446.2%2C389.7%2C443.6%2C387.1z%22%2F%3E%3C%2Fsvg%3E\" \n                        onClick={() => onRemoveSelectedItem(chipValue)}>\n                        </img>\n                    </span>\n                    <ThemeProvider theme={theme}>\n                        <ExpandMoreRounded color=\"primary\" baseClassName=\"icon\" id=\"ranking-filter-icon-chip\" onClick={toggleSlider}/>\n                    </ThemeProvider>\n                </div>\n            );\n        } else {\n            return (\n                <div className='placeholder' onClick={toggleSlider} >\n                    <p className='placeholder-text'>Ranking</p>\n                    <ThemeProvider theme={theme}>\n                        <ExpandMoreRounded color=\"primary\" baseClassName=\"icon\" id=\"ranking-filter-icon\"/>\n                    </ThemeProvider>\n                </div>\n            )\n        }\n    }\n\n    \n    function onRemoveSelectedItem(item) {\n        if (item === \"2000's\") {\n            setSelectedList(selectedList.filter(year => !aughts.includes(year)))\n            Array.from(document.querySelectorAll('.aughts')).forEach((el) => el.classList.remove('year-selected'));\n            document.getElementById('select-all-aughts').innerHTML = 'Select All';\n        } else if (item === \"2010's\") {\n            setSelectedList(selectedList.filter(year => !teens.includes(year)))\n            Array.from(document.querySelectorAll('.teens')).forEach((el) => el.classList.remove('year-selected'));\n            document.getElementById('select-all-teens').innerHTML = 'Select All';\n        } else if (item === \"2020's\") {\n            setSelectedList(selectedList.filter(year => !twenties.includes(year)))\n            Array.from(document.querySelectorAll('.twenties')).forEach((el) => el.classList.remove('year-selected'));\n            document.getElementById('select-all-twenties').innerHTML = 'Select All';\n        } else {\n            setSelectedList(selectedList.filter(year => year !== item));\n            document.getElementById(item).classList.remove(\"year-selected\");\n            if (document.getElementById(item).classList.contains('aughts')) {\n                document.getElementById('select-all-aughts').classList.remove(\"year-selected\");\n                document.getElementById('select-all-aughts').innerHTML = 'Select All';\n            } else if (document.getElementById(item).classList.contains('teens')) {\n                document.getElementById('select-all-teens').classList.remove(\"year-selected\");\n                document.getElementById('select-all-teens').innerHTML = 'Select All';\n            } else if (document.getElementById(item).classList.contains('twenties')) {\n                document.getElementById('select-all-twenties').classList.remove(\"year-selected\");\n                document.getElementById('select-all-twenties').innerHTML = 'Select All';\n            }\n        }\n\t\t\n    }\n\n    function toggleSlider() {\n        setCount(1);\n        setIsOpen(!isOpen);\n    }\n\n    function handleLabelClick(event) {\n        if (event.target !== event.currentTarget) {\n        } else {\n            toggleSlider();\n        }\n    }\n\n    const sliderValueChange = (event, newValue) => {\n        setSliderValue(newValue);\n        props.filterRanking(newValue);\n    }\n    \n\n    const sliderMarks = [{value: 10, label: '10'}, {value: 20, label: '20'}, {value: props.albums.length, label: 'All'}];\n\n    return (\n        <div ref={calendarRef} id={props.id}>\n            <div className='ranking-filter-container' id='ranking-filter-container' >\n                <div className='chip-wrapper' onClick={handleLabelClick}>\n                    {renderSelectedList()}\n                </div>\n            </div>\n            <div className='ranking-slider display' id='ranking-slider'>\n                <ThemeProvider theme={theme}>\n                    <FormControl>\n                        <RadioGroup row defaultValue=\"global\" color='primary'>\n                            <FormControlLabel value=\"global\" control={<Radio color='secondary' size='small'/>} label=\"Global\" sx={{color: '#cfcfcf', marginRight: '24px'}}/>\n                            <FormControlLabel value=\"personal\" control={<Radio color='secondary' size='small' id='radio-personal' />} label=\"Personal\" sx={{color: '#cfcfcf'}}/>\n                        </RadioGroup>\n                    </FormControl>\n                    <Slider \n                    color=\"secondary\"\n                    marks={sliderMarks}\n                    step={null}\n                    defaultValue={48}\n                    max={props.albums.length} \n                    onChange={sliderValueChange}/>\n                    \n                </ThemeProvider>\n            </div>           \n        </div>\n    )\n}","import m4th from 'm4th';\n\nconst solveRanking = (results) => {\n    let formattedResults = [];\n    results.forEach(result => {\n        let newResult = {};\n        newResult[result.album1.id] = result.album1.result;\n        newResult[result.album2.id] = result.album2.result;\n        formattedResults.push(newResult);\n    });\n    console.log(formattedResults);\n    let ids = [];\n    for (let i = 0; i < formattedResults.length; i++) {\n        ids.push(Object.keys(formattedResults[i]))\n    };\n    console.log(ids);\n    let flatIds = ids.flat();\n    console.log(flatIds);\n    let uniqueIds = [...new Set(flatIds)];\n    console.log(uniqueIds);\n    let matrix = m4th.matrix(uniqueIds.length);\n    matrix = matrix.map(function(element){\n        return 0;\n      });\n    for (let i = 0; i < uniqueIds.length; i++) {\n        matrix.set(i, i, flatIds.filter(id => id === uniqueIds[i]).length + 2);\n        for (let j = i+1; j < uniqueIds.length; j++) {\n            let gameCount = matrix.get(i, j) || 0;\n            for (let k = 0; k < formattedResults.length; k++) {\n                if (uniqueIds[i] in formattedResults[k] && uniqueIds[j] in formattedResults[k]) {\n                    matrix.set(i, j, gameCount-1);\n                    matrix.set(j, i, gameCount-1);\n                }\n            }\n        }\n    }\n    console.log(matrix);\n    let ratings = [];\n    for (let i = 0; i < uniqueIds.length; i++) {\n        let albumWL = [];\n        for (let j = 0; j < formattedResults.length; j++) {\n            if (uniqueIds[i] in formattedResults[j]) {\n                albumWL.push(formattedResults[j][uniqueIds[i]])\n            }\n        };\n        let albumRating = 1 + 0.5 * (albumWL.reduce((previousValue, currentValue) => previousValue + currentValue,\n        0));\n        ratings.push(albumRating);\n    }\n    let y = m4th.matrix(uniqueIds.length, ratings);\n    const solution = m4th.lu(matrix).solve(y);\n    const rankings = [];\n    for (let i = 0; i < uniqueIds.length; i++) {\n        rankings.push({\n            albumId: uniqueIds[i],\n            rating: solution.array[i]\n        })\n    };\n    const sortedRankings = rankings.sort((a, b) => b.rating - a.rating);\n    return sortedRankings;\n}\n\nexport default solveRanking;","import './Rank.css';\nimport AlbumContainer from '../AlbumContainer/AlbumContainer';\nimport React, { useState, useEffect } from 'react';\nimport ArtistFilter from '../ArtistFilter/ArtistFilter';\nimport { YearFilter } from '../YearFilter/YearFilter';\nimport axios from 'axios';\nimport jsCookie from 'js-cookie';\nimport uuid from 'uuid';\nimport Header from '../Header/Header';\nimport { RankingFilter } from '../RankingFilter/RankingFilter';\nimport solveRanking from '../../util/solveRanking';\nimport { Button } from '@mui/material';\nimport { FilterAltRounded } from '@mui/icons-material';\nimport { ThemeProvider } from '@mui/system';\nimport theme from '../MuiTheme/Theme';\nimport { IconButton } from '@mui/material';\nimport { CloseRounded } from '@mui/icons-material';\n\nconst App = () => {\n\n  let [artistFilter, setArtistFilter] = useState([]);\n  let [yearFilter, setYearFilter] = useState([]);\n  let [rankingFilterValue, setRankingFilterValue] = useState(0);\n  let [allAlbums, setAllAlbums] = useState([]);\n  let [availableAlbums, setAvailableAlbums] = useState([]);\n  let [loadedAlbums, setLoadedAlbums] = useState(false);\n  let [filtersEnabled, setFiltersEnabled] = useState(false);\n  let [userId, setUserId] = useState('');\n  let [userData, setUserData] = useState({ _id: '', userId: '', results: [], seenPairs: [] });\n  let [loadedUserData, setLoadedUserData] = useState(false);\n  let [artistParams, setArtistParams] = useState('');\n  let [resultsGlobal, setResultsGlobal] = useState([]);\n  let [resultsUser, setResultsUser] = useState([]);\n  let [rankingGlobal, setRankingGlobal] = useState([]);\n  let [rankingUser, setRankingUser] = useState([]);\n\n  useEffect(() => {\n    getUserId();\n    fetchAlbums();\n    fetchResults();\n    setArtistParams(splitArtistParams());\n  }, []) \n\n  useEffect(() => {\n    if (userId !== '') {\n      getUserData();\n    }\n  }, [userId]);\n\n  useEffect(() => {\n    if (resultsGlobal.length > 0) {\n        setRankingGlobal(solveRanking(resultsGlobal));\n    }\n  }, [resultsGlobal]);\n\n  useEffect(() => {\n    if (resultsUser.length > 0) {\n        setRankingUser(solveRanking(resultsUser));\n    }\n  }, [resultsUser]);\n\n  useEffect(() => {\n    filterAlbums();\n    if (artistFilter.length > 0 || yearFilter.length > 0) {\n      setFiltersEnabled(true);\n    } else {\n      setFiltersEnabled(false);\n    }\n    if (artistFilter.length === 0) {\n      searchParams.delete('artist');\n      var newRelativePathQuery = window.location.pathname + '?' + searchParams.toString();\n      window.history.pushState(null, '', newRelativePathQuery);\n    }\n    if (yearFilter.length === 0) {\n      searchParams.delete('years');\n      var newRelativePathQuery = window.location.pathname + '?' + searchParams.toString();\n      window.history.pushState(null, '', newRelativePathQuery);\n    }\n      \n  }, [artistFilter, yearFilter, rankingFilterValue]);\n\n  useEffect(() => {\n    filterAlbums();\n  }, [rankingFilterValue]);\n\n  useEffect(() => {\n    if (allAlbums.length > 0) {\n      setLoadedAlbums(true);\n      setArtistFilter(artistParams);\n      setRankingFilterValue(allAlbums.length);\n    }\n  }, [allAlbums])\n\n  let searchParams = new URLSearchParams(window.location.search);\n\n  const fetchAlbums = () => {\n    axios.get('https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/albums', {\n      params: {\n        \"verification_method\": \"SECRET_AS_QUERY_PARAM\",\n        \"secret\": \"temperature\"\n      }\n    })\n    .then(response => {\n      setAllAlbums(response.data);\n      setAvailableAlbums(response.data);\n    })\n    .catch(err => {\n      console.log(err);\n    });\n  }\n\n  const getUserId = () => {\n    if (!jsCookie.get('user')) {\n      jsCookie.set('user', uuid.v4(), { expires: 10000 });\n      setUserId(jsCookie.get('user'));\n    } else {\n      setUserId(jsCookie.get('user'));\n    }\n  }\n\n  const getUserData = () => {\n    if (userId !== '') {\n      axios.get('https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/getuser', {\n        params: {\n          userId: userId\n        }\n      }).then (response => {\n        if (response.data !== null) {\n        setUserData(response.data);\n        setLoadedUserData(true);\n        setResultsUser(response.data.results);\n        } else {\n          setLoadedUserData(true);\n        }\n      })\n    }\n  }\n\n  const fetchResults = () => {\n    axios.get('https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/getResults', {\n    })\n    .then(response => {\n        setResultsGlobal(response.data);\n    })\n    .catch(err => {\n        console.log(err);\n     });\n}\n\n  const splitArtistParams = () => {\n    let artistParams = searchParams.get('artist');\n    if (artistParams !== null) {\n        let artistArray = artistParams.split(',');\n        console.log('filter set from params');\n        return artistArray;\n    } else {\n        return [];\n    }\n  }\n\n  const filterAlbums = () => {\n    console.log(rankingFilterValue);\n    if (artistFilter.length === 0 && yearFilter.length === 0 && rankingFilterValue === allAlbums.length) {\n      setAvailableAlbums(allAlbums);\n    } else {\n      let filteredAlbums = allAlbums.map(album => album);\n      if (artistFilter.length > 0) {\n        allAlbums.forEach(album => {\n            if (Array.isArray(album.attributes.artistName)) {\n              if (album.attributes.artistName.some(artist => artistFilter.includes(artist)) === false) {\n                filteredAlbums.splice(filteredAlbums.findIndex(filterAlbum => filterAlbum === album), 1);\n              } \n            } else {\n              if ((artistFilter.some(artist => artist === album.attributes.artistName)) === false) {\n                filteredAlbums.splice(filteredAlbums.findIndex(filterAlbum => filterAlbum === album), 1);\n              }\n            }\n          });\n          searchParams.set('artist', artistFilter);\n          var newRelativePathQuery = window.location.pathname + '?' + searchParams.toString();\n          window.history.pushState(null, '', newRelativePathQuery);\n      }\n      if (yearFilter.length > 0) {\n        filteredAlbums = filteredAlbums.filter(album => yearFilter.some(year => album.attributes.releaseDate.includes(year)));\n        searchParams.set('years', yearFilter);\n        var newRelativePathQuery = window.location.pathname + '?' + searchParams.toString();\n        window.history.pushState(null, '', newRelativePathQuery);\n      }\n      if (rankingGlobal.length > 0 && rankingFilterValue < allAlbums.length) {\n        const rankingFilterAlbums = rankingGlobal.map(album => album.albumId).slice(0, rankingFilterValue);\n        console.log(rankingFilterAlbums);\n        filteredAlbums = filteredAlbums.filter(album => rankingFilterAlbums.includes(album.id));\n        console.log(filteredAlbums);\n      }\n      setAvailableAlbums(filteredAlbums);   \n    }\n  }\n\n  const filterArtist = (selectedList) => {\n    const artistFilter = selectedList.map(artist => artist.name);\n    setArtistFilter(artistFilter);\n  }\n\n  const filterYear = (selectedList) => {\n    setYearFilter(selectedList);\n  }\n\n  const filterRanking = (value) => {\n    setRankingFilterValue(value);\n  }\n\n  const openFilterDrawer = () => {\n    document.getElementById('filter-drawer').style.top = '0';\n    document.getElementById('rank-page-container').style.overflow = 'hidden';\n  }\n\n  const closeFilterDrawer = () => {\n    document.getElementById('filter-drawer').style.top = '100%';\n    document.getElementById('rank-page-container').style.overflow = 'auto';\n  }\n\n  return (\n    <div classNyarn run deployame=\"page-container\" id=\"rank-page-container\">\n      <Header headerParams={searchParams}/>\n      <div className=\"container\">\n        <div className=\"Rank\">\n          <div className='filters'>\n            <ArtistFilter id='artist-filter' onSelect={filterArtist} onRemove={filterArtist} albums={allAlbums} queryParams={artistFilter} yearFilter={yearFilter}/>\n            <YearFilter id='year-filter' onChange={filterYear} albums={allAlbums} artistFilter={artistFilter} />\n            <RankingFilter id='ranking-filter' albums={allAlbums} filterRanking={filterRanking}/>\n            <ThemeProvider theme={theme}>\n              <Button id='filter-button' onClick={openFilterDrawer} variant=\"outlined\" color=\"primary\" size=\"small\" sx={{ textTransform: \"none\", borderRadius: \"15px\" }}endIcon={<FilterAltRounded size=\"small\" />}>\n                Filters\n              </Button>\n            </ThemeProvider>\n          </div>\n          <AlbumContainer albums={availableAlbums} albumsLoaded={loadedAlbums} filters={filtersEnabled} userId={userId} seenPairs={userData.seenPairs} loadedUserData={loadedUserData}/>\n        </div>\n      </div>\n      <div className=\"filter-drawer\" id=\"filter-drawer\">\n        <div className=\"filter-drawer-content\">\n          <div className=\"filter-drawer-header\">\n            <div></div>\n            <div className=\"filter-drawer-header-title\">\n              Filters\n            </div>\n            <ThemeProvider theme={theme}>\n              <IconButton color='primary' size=\"large\" onClick={closeFilterDrawer}>\n                <CloseRounded fontSize=\"inherit\"/>\n              </IconButton>\n            </ThemeProvider>\n          </div>\n          <div className=\"filter-drawer-body\">\n            <ArtistFilter id='artist-filter-drawer' onSelect={filterArtist} onRemove={filterArtist} albums={allAlbums} queryParams={artistFilter} yearFilter={yearFilter}/>\n            <YearFilter id='year-filter-drawer' onChange={filterYear} albums={allAlbums} artistFilter={artistFilter} />\n            <RankingFilter id='ranking-filter-drawer' albums={allAlbums} filterRanking={filterRanking}/>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React, { useState } from \"react\";\nimport './TableRowCarousel.css';\n\n\n\nexport const CarouselItem = ({children, width}) => {\n    return (\n        <div className=\"carousal-item\" style={{width: width}}>\n            {children}\n        </div>\n    );\n}\n\nexport const Carousel = ({children}) => {\n    const [activeIndex, setActiveIndex] = useState(0);\n    \n    const updateIndex = (newIndex) => {\n        setActiveIndex(newIndex);\n    }\n\n    return (\n        <div className=\"carousel\">\n            <div className=\"inner\" style={{ transform: `translateX(-${activeIndex * 100}%)` }}>\n                {React.Children.map(children, (child, index) => {\n                    return React.cloneElement(child, {width: \"100%\" });\n                })}\n            </div>\n            <div className='carousel-dots'>\n                    <div className={`dot ${ activeIndex === 0 ? 'active' : ''}`} id='dot-0' onClick={() => updateIndex(0)}></div>\n                    <div className={`dot ${ activeIndex === 1 ? 'active' : ''}`} id='dot-1' onClick={() => updateIndex(1)}></div>\n            </div>\n        </div>\n    );\n}","import React, { useState, useEffect } from \"react\";\nimport './TableRow.css';\nimport moment from \"moment\";\nimport newShade from \"../../util/newShade\";\nimport { Carousel, CarouselItem } from \"./TableRowCarousel.js\";\nimport { ExpandMoreRounded } from \"@mui/icons-material\";\n\nconst TableRow = (props) => {\n    let [style, setStyle] = useState({});\n\n    const formatDate = (date) => {\n    return moment(date).format('MMMM Do, YYYY');\n    }\n\n    useEffect(() => {\n        if (props.album) {\n            if (props.album.attributes.editorialNotes) {\n                document.getElementById('editorial-notes-' + props.rank).innerHTML = props.album.attributes.editorialNotes.standard;\n            }\n            setStyle({\n                '--bg-color': '#' + props.album.attributes.artwork.bgColor, \n                '--text-color-1': '#' + props.album.attributes.artwork.textColor1, \n                '--text-color-2': '#' + props.album.attributes.artwork.textColor2, \n                '--text-color-3': '#' + props.album.attributes.artwork.textColor3, \n                '--text-color-4': '#' + props.album.attributes.artwork.textColor4,\n                '--shadow': '#' + props.album.attributes.artwork.textColor4 + '25',\n                '--shadow-hover': '#' + props.album.attributes.artwork.textColor4 + '80',\n                '--bg-gradient': '#' + newShade(props.album.attributes.artwork.bgColor, 4),\n            });\n        }\n    }, [props.album]);\n\n    const getArtistName = () => {\n        if (Array.isArray(props.album.attributes.artistName)) {\n          return props.album.attributes.artistName.join(' & ');\n        } else {\n          return props.album.attributes.artistName;\n        }\n    }\n\n    const replaceUrl = (url) => {\n        let coverArtUrl = url.replace('{w}', '600').replace('{h}', '600')\n        return coverArtUrl;\n      }\n\n    const expandTableRow = () => {\n        if (document.getElementById(`more ${props.rank}`).innerHTML === 'More') {\n            document.getElementById(`table-row-${props.rank}`).style.height = '481px';\n            setTimeout(() => {\n                document.getElementById(`table-row-${props.rank}`).scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n            }, 300);\n            document.getElementById(`more ${props.rank}`).innerHTML = 'Less';\n            document.getElementById(`chevron ${props.rank}`).style.transform = 'rotate(180deg)';\n            document.getElementById(`chevron ${props.rank}`).style.visibility = 'visible';\n            document.getElementById(`more ${props.rank}`).style.visibility = 'visible';\n            props.isExpanded(props.rank);\n        } else {\n            document.getElementById(`table-row-${props.rank}`).style.height = '120px';\n            document.getElementById(`more ${props.rank}`).innerHTML = 'More';\n            document.getElementById(`chevron ${props.rank}`).style.transform = 'rotate(0deg)';\n            document.getElementById(`more ${props.rank}`).style.visibility = '';\n            document.getElementById(`chevron ${props.rank}`).style.visibility = '';\n            props.isExpanded('')\n        }  \n    }\n\n    const getOtherAlbums = (artistInput) => {\n        const sameArtist = [];\n        props.albums.forEach(album => {\n            if (Array.isArray(album.attributes.artistName)) {\n                if (album.attributes.artistName.some(artist => artist === artistInput)) {\n                    sameArtist.push(album);\n                  }\n            } else { \n                if (album.attributes.artistName === artistInput) {\n                    sameArtist.push(album);\n                }\n            }\n        });\n        props.albums.filter(album => album.attributes.artistName === artistInput);\n        const otherAlbums = sameArtist.filter(album => album.id !== props.album.id);\n        let rankings = [];\n        let globalIds = props.rankingGlobal.map(ranking => ranking.albumId);\n        let userIds = props.rankingUser.map(ranking => ranking.albumId);\n        if (props.selectedRanking === 'global') {\n            rankings = otherAlbums.filter(album => globalIds.includes(album.id)).map(album => {\n                return {\n                    album: album,\n                    ranking: props.rankingGlobal.findIndex(ranking => ranking.albumId === album.id) + 1\n                }\n            });\n        } else {\n            rankings = otherAlbums.filter(album => userIds.includes(album.id)).map(album => {\n                return {\n                    album: album,\n                    ranking: props.rankingUser.findIndex(ranking => ranking.albumId === album.id) + 1\n                }\n            });\n        }\n        const sortedAlbums = rankings.sort((a, b) => a.ranking - b.ranking);\n        return sortedAlbums;\n    }\n\n    const getAllArtistAlbums = (artistInput) => {\n        let sameArtist = [];\n        props.albums.forEach(album => {\n            if (Array.isArray(album.attributes.artistName)) {\n                if (album.attributes.artistName.some(artist => artist === artistInput)) {\n                    sameArtist.push(album);\n                  }\n            } else { \n                if (album.attributes.artistName === artistInput) {\n                    sameArtist.push(album);\n                }\n            }\n        });\n        let rankings = [];\n        let globalIds = props.rankingGlobal.map(ranking => ranking.albumId);\n        let userIds = props.rankingUser.map(ranking => ranking.albumId);\n        if (props.selectedRanking === 'global') {\n            rankings = sameArtist.filter(album => globalIds.includes(album.id)).map(album => {\n                return {\n                    album: album,\n                    ranking: props.rankingGlobal.findIndex(ranking => ranking.albumId === album.id) + 1\n                }\n            });\n        } else {    \n            rankings = sameArtist.filter(album => userIds.includes(album.id)).map(album => {\n                return {\n                    album: album,\n                    ranking: props.rankingUser.findIndex(ranking => ranking.albumId === album.id) + 1\n                }\n            });\n        }\n        const sortedAlbums = rankings.sort((a, b) => a.ranking - b.ranking);\n        return sortedAlbums;\n    }\n\n    const renderOtherAlbums = (artistInput) => {\n        return getOtherAlbums(artistInput).map((album, index) => (\n            <div className='other-album' key={index}>\n                <div className='other-album-rank'>\n                    {album.ranking}\n                </div>\n                <img src={replaceUrl(album.album.attributes.artwork.url)} alt={album.album.attributes.name} className='other-album-image'/>\n                <p className='other-album-name'>{album.album.attributes.name}</p>\n            </div>\n        ))\n    };\n\n    const getRecentResults = () => {\n        let results = [];\n        if (props.selectedRanking === 'global') {\n            results = props.resultsGlobal\n        } else {\n            results = props.resultsUser\n        }\n        const filteredResults = results.filter(result => result.album1.id === props.album.id || result.album2.id === props.album.id);\n        let recentResults = [];\n        filteredResults.map(result => {\n            if (result.album1.id === props.album.id) {\n                recentResults.push({\n                    album: props.albums.find(album => album.id === result.album2.id),\n                    result: result.album2.result\n                });\n            } else if (result.album2.id === props.album.id) {\n                recentResults.push({\n                    album: props.albums.find(album => album.id === result.album1.id),\n                    result: result.album1.result\n                });\n            }\n        });\n        return recentResults.reverse().slice(0, 20);\n    }\n\n    const renderRecentResults = () => {\n        return getRecentResults().map((result, index) => (\n            <div className='recent-result' key={index}>\n                <div className='recent-result-outcome'>\n                    {result.result === -1 ? 'Win' : 'Loss'}\n                </div>\n                <img src={replaceUrl(result.album.attributes.artwork.url)} alt={result.album.attributes.name} className='recent-result-image'/>\n                <p className='recent-result-name'>{result.album.attributes.name}</p>\n            </div>\n        ))\n    }\n\n    const getArtistArtworkUrl = (artistInput) => { \n        if (props.artists.length > 0 && props.album && getAllArtistAlbums(artistInput).length > 0) {\n            return props.artists.find(artist => artist.attributes.name === artistInput).attributes.artwork.url.replace('{w}', '300').replace('{h}', '300');\n        }\n    }\n\n    /* const getWinLoss = () => {\n        let albumWL = [];\n        for (let i = 0; i < props.resultsGlobal.length; i++) {\n            if (props.album.id in formattedResults[i]) {\n                albumWL.push(formattedResults[j][uniqueIds[i]])\n            }\n        };\n    } */\n\n    if (props.album) {\n        return (\n            <div className=\"table-row\" id={`table-row-${props.rank}`} style={style}>\n                <div className=\"row-default\">\n                    <div className=\"table-cell\" id=\"rank-cell\">\n                        <div className='rank-container'>\n                            <p>{props.rank}</p>\n                        </div>\n                    </div>\n                    <div className=\"table-cell\" id=\"album-cell\">\n                        {props.album &&\n                        <div className=\"album-info\">\n                            <img src={replaceUrl(props.album.attributes.artwork.url)} alt=\"album artwork\" className=\"albumArtwork\"/>\n                            <div className=\"album-name-artist\">\n                                <div className=\"album-text\">\n                                    <p className=\"album-name-table\">{props.album.attributes.name}</p>\n                                    <p className=\"album-artist-table\">{getArtistName()}</p>\n                                </div>\n                            </div>\n                        </div>\n                        }\n                    </div>\n                    <div className=\"table-cell\" id=\"release-cell\">\n                        <p>{props.album && formatDate(props.album.attributes.releaseDate)}</p>\n                    </div>\n                    <div className=\"table-cell\" id=\"more-cell\">\n                        <button className='more' id={`more-button-${props.rank}`} onClick={expandTableRow}><p className='button-text' id={`more ${props.rank}`}>More</p><ExpandMoreRounded size='small' id={`chevron ${props.rank}`}></ExpandMoreRounded></button>\n                    </div>\n                </div>\n                <div className=\"row-expanded\" id={`row-expanded-${props.rank}`}>\n                    <div className='album-info-expanded'>\n                        <div className='album-facts'>\n                                <p className=\"label\">PROJECT TYPE:</p>\n                                <p>{props.album && props.album.type}</p>\n                                <p className=\"label\">GENRE:</p>\n                                <p>{props.album && props.album.attributes.genreNames[0]}</p>\n                                <p className=\"label\">TRACKs:</p>\n                                <p>{props.album && props.album.attributes.trackCount}</p>\n                        </div>\n                        {props.album.attributes.editorialNotes && <div className='editorial-notes'>\n                            <p id='editorial-label'>EDITORIAL NOTES:</p>\n                            <p className='editorial-notes-standard' id={'editorial-notes-' + props.rank}></p>\n                        </div>}\n                    </div>\n                    <div className=\"recent-results\">\n                        <p className='label'>RECENT RESULTS:</p>\n                        <div className='recent-results-albums'>\n                            {renderRecentResults()}\n                        </div>\n                    </div>\n                    <vl/>\n                    { !Array.isArray(props.album.attributes.artistName) ?\n                    <div className=\"artist\">\n                        <div className=\"artist-info\">\n                            <img src={getArtistArtworkUrl(props.album.attributes.artistName)} alt=\"artist artwork\" className=\"artist-artwork\"/>\n                            <p className='artist-name'>{props.album.attributes.artistName}</p>\n                            <div className='artist-stats'>\n                                <div className='artist-stats-labels'>\n                                    <p>{`Highest album rank: `}</p>\n                                    <p>{`Lowest album rank: `}</p>\n                                    <p>{`Average album rank: `}</p>\n                                </div>\n                                <div className='artist-stats-values'>\n                                    <p>{getAllArtistAlbums(props.album.attributes.artistName).length > 0 && `#${getAllArtistAlbums(props.album.attributes.artistName)[0].ranking}`}</p>\n                                    <p>{getAllArtistAlbums(props.album.attributes.artistName).length > 0 && `#${getAllArtistAlbums(props.album.attributes.artistName)[getAllArtistAlbums(props.album.attributes.artistName).length - 1].ranking}`}</p>\n                                    <p>{getAllArtistAlbums(props.album.attributes.artistName).length > 0 && `#${(getAllArtistAlbums(props.album.attributes.artistName).reduce((a, b) => a + b.ranking, 0 ) / getAllArtistAlbums(props.album.attributes.artistName).length).toFixed(1)}`}</p>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"other-albums-container\">\n                            <p className='label'>OTHER ALBUMS:</p>\n                            <div className=\"other-albums\">\n                                {renderOtherAlbums(props.album.attributes.artistName)}\n                            </div>\n                        </div>\n                    </div>\n                    : <Carousel>\n                            {props.album.attributes.artistName.map((artist, index) => {\n                                return <CarouselItem index={index}>\n                                    <div className=\"artist\">\n                                        <div className=\"artist-info\">\n                                            <img src={getArtistArtworkUrl(artist)} alt=\"artist artwork\" className=\"artist-artwork\"/>\n                                            <p className='artist-name'>{artist}</p>\n                                            <div className='artist-stats'>\n                                                <div className='artist-stats-labels'>\n                                                    <p>{`Highest album rank: `}</p>\n                                                    <p>{`Lowest album rank: `}</p>\n                                                    <p>{`Average album rank: `}</p>\n                                                </div>\n                                                <div className='artist-stats-values'>\n                                                    <p>{getAllArtistAlbums(artist).length > 0 && `#${getAllArtistAlbums(artist)[0].ranking}`}</p>\n                                                    <p>{getAllArtistAlbums(artist).length > 0 && `#${getAllArtistAlbums(artist)[getAllArtistAlbums(artist).length - 1].ranking}`}</p>\n                                                    <p>{getAllArtistAlbums(artist).length > 0 && `#${(getAllArtistAlbums(artist).reduce((a, b) => a + b.ranking, 0 ) / getAllArtistAlbums(artist).length).toFixed(1)}`}</p>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div className=\"other-albums-container\">\n                                            <p className='label'>OTHER ALBUMS:</p>\n                                            <div className=\"other-albums\">\n                                                {renderOtherAlbums(artist)}\n                                            </div>\n                                        </div>\n                                    </div>\n                                </CarouselItem> }\n                            )}\n                    </Carousel> }\n                </div>\n                <div className='expanded-row-bg' id={`expanded-row-bg-${props.rank}`}>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default TableRow;","import React from \"react\";\nimport './TableHeader.css';\n\nconst TableHeader = () => {\n    return (\n        <div className=\"table-header\">\n            <div className=\"table-label\" id=\"rank-label\">RANK</div>\n            <div className=\"table-label\" id=\"album-label\">ALBUM</div>\n            <div className=\"table-label\" id=\"release-label\">RELEASE DATE</div>\n        </div>\n    );\n}\n\nexport default TableHeader;","import Multiselect from \"multiselect-react-dropdown\";\nimport React, { useEffect, useState } from \"react\";\nimport './RankingSelect.css';\nimport { ExpandMoreRounded } from \"@mui/icons-material\";\nimport { ThemeProvider } from \"@mui/system\";\nimport theme from '../MuiTheme/Theme';\n\nconst RankingSelect = (props) => {\n    let [selectedValues, setSelectedValues] = useState([{ label: \"Global\", value: \"global\" }]);\n\n    const options = [\n        { label: \"Global\", value: \"global\" },\n        { label: \"Personal\", value: \"personal\" }\n    ];\n\n    useEffect(() => {\n        if (props.queryParams === 'personal') {\n            setSelectedValues([{ label: \"Personal\", value: \"personal\" }]);\n        } else {\n            setSelectedValues([{ label: \"Global\", value: \"global\" }]);\n        }\n    }, [props.queryParams])\n\n\n\n\n    return (\n        <Multiselect id='ranking-select'\n            options={options}\n            displayValue=\"label\"\n            avoidHighlightFirstOption=\"true\"\n            singleSelect=\"true\"\n            selectedValues={selectedValues}\n            hidePlaceholder=\"true\"\n            placeholder=\"\"\n            showArrow=\"true\"\n            onSelect={props.onSelect}\n            customArrow={<ThemeProvider theme={theme}><ExpandMoreRounded color=\"primary\"/></ThemeProvider>}\n        />\n    )\n}\n\nexport default RankingSelect;","import Multiselect from \"multiselect-react-dropdown\";\nimport React, { useState, useEffect } from \"react\";\nimport './TypeSelect.css';\nimport { ExpandMoreRounded } from \"@mui/icons-material\";\nimport { ThemeProvider } from \"@mui/system\";\nimport theme from '../MuiTheme/Theme';\nimport { type } from \"@testing-library/user-event/dist/type\";\n\nconst TypeSelect = (props) => {\n    let [selectedValues, setSelectedValues] = useState([]);\n    let [options, setOptions] = useState([]);\n\n    useEffect(() => {\n        if (props.albums.length > 0) {\n            setOptions(getTypeOptions(props.albums));\n        }\n    },  [props.albums])\n\n    useEffect(() => {\n        if (props.queryParams.length > 0 && options.length > 0) {\n            setSelectedValues(props.queryParams.map(type => options.find(option => option.label === type)));\n        }\n    }, [options])\n\n    useEffect(() => {\n        if (props.albums.length > 0) {\n            setOptions(getTypeOptions(filterTypes()));\n        }\n    }, [props.yearFilter, props.artistFilter])\n\n    const getTypeOptions = (albums) => {\n        let options = [];\n        albums.forEach(album => {\n            if (!options.some(type => type.label === album.type)) {\n                options.push({\n                    label: album.type,\n                    value: album.type.toLowerCase,\n                    count: albums.filter(albumA => albumA.type === album.type).length\n                });\n            }\n\n        });\n        const sortedOptions = options.sort((a, b) => b.count - a.count);\n        return sortedOptions;\n    }\n\n    const filterTypes = () => {\n        let filteredAlbums = props.albums.map(album => album);\n        if (props.artistFilter.length > 0) {\n            props.albums.forEach(album => {\n                if (Array.isArray(album.attributes.artistName)) {\n                    if (album.attributes.artistName.some(artist => props.artistFilter.includes(artist)) === false) {\n                        filteredAlbums.splice(filteredAlbums.findIndex(foundAlbum => foundAlbum === album), 1);\n                    }\n                } else { \n                    if ((props.artistFilter.some(artist => artist === album.attributes.artistName)) === false) {\n                        filteredAlbums.splice(filteredAlbums.findIndex(foundAlbum => foundAlbum === album), 1);\n                    }\n                }\n            });\n        }\n        if (props.yearFilter.length > 0) {\n            let years = props.albums.filter(album => props.yearFilter.some(year => album.attributes.releaseDate.includes(year))).map(album => album);\n            filteredAlbums = filteredAlbums.filter(album => years.includes(album));\n        }\n        console.log(filteredAlbums);\n        return filteredAlbums;\n    }\n\n\n\n    return (\n        <Multiselect id='type-select'\n            options={options}\n            selectedValues={selectedValues}\n            displayValue=\"label\"\n            avoidHighlightFirstOption=\"true\"\n            singleSelect=\"true\"\n            placeholder=\"Type\"\n            showArrow=\"true\"\n            onSelect={props.onSelect}\n            onRemove={props.onRemove}\n            closeIcon={'cancel'}\n            customArrow={<ThemeProvider theme={theme}><ExpandMoreRounded color=\"primary\"/></ThemeProvider>}\n        />\n    )\n}\n\nexport default TypeSelect;","import React, { useState, useEffect, useRef } from \"react\";\nimport TableRow from \"../TableRow/TableRow\";\nimport axios from \"axios\";\nimport TableHeader from \"../TableHeader/TableHeader\";\nimport './Rankings.css';\nimport RankingSelect from \"../RankingSelect/RankingSelect\";\nimport ArtistFilter from \"../ArtistFilter/ArtistFilter\";\nimport { YearFilter } from \"../YearFilter/YearFilter\";\nimport solveRanking from \"../../util/solveRanking\";\nimport jsCookie from \"js-cookie\";\nimport uuid from \"uuid\";\nimport TypeSelect from \"../TypeSelect/TypeSelect\";\nimport { ShareOutlined } from \"@mui/icons-material\";\nimport { Button } from \"@mui/material\";\nimport { ThemeProvider } from \"@mui/system\";\nimport theme from '../MuiTheme/Theme';\nimport Header from \"../Header/Header\";\n\nconst Rankings = () => {\n\n    let [albums, setAlbums] = useState([]);\n    let [artists, setArtists] = useState([]);\n    let [resultsGlobal, setResultsGlobal] = useState([]);\n    let [resultsUser, setResultsUser] = useState([]);\n    let [rankingGlobal, setRankingGlobal] = useState([]);\n    let [rankingUser, setRankingUser] = useState([]);\n    let [currentRanking, setCurrentRanking] = useState([]);\n    let [userId, setUserId] = useState('');\n    let [selectedRanking, setSelectedRanking] = useState('global');\n    let [isLoading, setIsLoading] = useState(false);\n    let [rowExpanded, setRowExpanded] = useState('');\n    let [artistFilter, setArtistFilter] = useState([]);\n    let [yearFilter, setYearFilter] = useState([]);\n    let [typeFilter, setTypeFilter] = useState([]);\n\n    useEffect(() => {\n        getUserId();\n        fetchAlbums();\n        fetchArtists();\n        fetchResults();\n        setIsLoading(true);\n        setArtistFilter(splitArtistParams());\n        setTypeFilter(searchParams.getAll('type'));\n        if(searchParams.get('ranking') !== null) {\n            setSelectedRanking(searchParams.get('ranking'));\n        };\n    }, []);\n\n    useEffect(() => {\n        getUserData();\n    }, [userId]);\n\n    useEffect(() => {\n        if (resultsGlobal.length > 0) {\n            setRankingGlobal(solveRanking(resultsGlobal));\n        }\n    }, [resultsGlobal]);\n\n    useEffect(() => {\n        if (resultsUser.length > 0) {\n            setRankingUser(solveRanking(resultsUser));\n        }\n    }, [resultsUser]);\n\n    useEffect(() => {\n        if (selectedRanking === 'global') {\n            setCurrentRanking(rankingGlobal);\n        }\n        if (rankingGlobal.length > 0) {\n           setIsLoading(false);\n        }\n    }, [rankingGlobal]);\n\n    useEffect(() => {\n        if (selectedRanking === 'personal') {\n            setCurrentRanking(rankingUser);\n        }\n        if (rankingUser.length > 0) {\n           setIsLoading(false);\n        }\n    }, [rankingGlobal]);\n\n    useEffect(() => {\n        filterRankings();\n        searchParams.set('ranking', selectedRanking);\n        var newRelativePathQuery = window.location.pathname + '?' + searchParams.toString();\n        window.history.pushState(null, '', newRelativePathQuery);\n\n    }, [selectedRanking]);\n\n    useEffect(() => {\n        filterRankings(); \n        if (rowExpanded !== '') {\n            closeRow(rowExpanded);\n        }\n        if (artistFilter.length === 0) {\n            searchParams.delete('artist');\n            var newRelativePathQuery = window.location.pathname + '?' + searchParams.toString();\n            window.history.pushState(null, '', newRelativePathQuery);\n        }\n        if (artistFilter.length > 0) {\n            searchParams.set('artist', artistFilter);\n            var newRelativePathQuery = window.location.pathname + '?' + searchParams.toString();\n            window.history.pushState(null, '', newRelativePathQuery);\n        }\n        if (yearFilter.length === 0) {\n            searchParams.delete('years');\n            var newRelativePathQuery = window.location.pathname + '?' + searchParams.toString();\n            window.history.pushState(null, '', newRelativePathQuery);\n        }\n        if (typeFilter.length === 0) {\n            searchParams.delete('type');\n            var newRelativePathQuery = window.location.pathname + '?' + searchParams.toString();\n            window.history.pushState(null, '', newRelativePathQuery);\n        }\n        if (typeFilter.length > 0) {\n            searchParams.set('type', typeFilter[0]);\n            var newRelativePathQuery = window.location.pathname + '?' + searchParams.toString();\n            window.history.pushState(null, '', newRelativePathQuery);\n        }   \n    }, [artistFilter, yearFilter, typeFilter]);\n\n    useEffect(() => {\n        if (rankingGlobal) {\n            filterRankings();\n        }\n    }, [rankingGlobal, albums]);\n\n    useEffect(() => {\n        if (rankingUser) {\n            filterRankings();\n        }\n    }, [rankingUser, albums]);\n\n    useEffect(() => {\n        if (prevRow !== '' && rowExpanded !== '') {\n            closeRow(prevRow);\n        }\n    }, [rowExpanded]);\n\n    function usePrevious(value) {\n        const ref = useRef();\n        useEffect(() => {\n          ref.current = value;\n        });\n        return ref.current;\n      }\n\n    const prevRow = usePrevious(rowExpanded);\n\n    let searchParams = new URLSearchParams(window.location.search);\n        \n    const getUserId = () => {\n        if (!jsCookie.get('user')) {\n          jsCookie.set('user', uuid.v4(), { expires: 10000 });\n        } else {\n          setUserId(jsCookie.get('user'));\n        }\n      }\n\n    const fetchAlbums = () => {\n        axios.get('https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/albums', {\n          params: {\n            \"verification_method\": \"SECRET_AS_QUERY_PARAM\",\n            \"secret\": \"temperature\"\n          }\n        })\n        .then(response => {\n          setAlbums(response.data);\n        })\n        .catch(err => {\n          console.log(err);\n        });\n      }\n\n      const fetchArtists = () => {\n        axios.get('https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/artists', {\n        })\n        .then(response => {\n          setArtists(response.data);\n        })\n        .catch(err => {\n          console.log(err);\n        });\n      }\n\n    const fetchResults = () => {\n        axios.get('https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/getResults', {\n        })\n        .then(response => {\n            setResultsGlobal(response.data);\n        })\n        .catch(err => {\n            console.log(err);\n         });\n    }\n\n    const getUserData = () => {\n        if (userId !== '') {\n          axios.get('https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/getuser', {\n            params: {\n              userId: userId\n            }\n          }).then (response => {\n            if (response.data !== null) {\n            setResultsUser(response.data.results);\n            }\n          })\n        }\n      }\n\n    const splitArtistParams = () => {\n        let artistParams = searchParams.get('artist');\n        if (artistParams !== null) {\n            let artistArray = artistParams.split(',');\n            return artistArray;\n        } else {\n            return [];\n        }\n    }\n\n    const splitYearParams = () => {\n        let yearParams = searchParams.get('years');\n        if (yearParams !== null) {\n            let yearArray = yearParams.split(',');\n            return yearArray;\n        } else {\n            return [];\n        }\n    }\n\n    const changeRanking = (selectedItem) => {\n        setSelectedRanking(selectedItem[0].value);\n    };\n\n    const shareRanking = () => {\n        let artistFilterShare = artistFilter.map(artist => artist)\n        let artistFilterLast = artistFilterShare.pop();\n        let type = '';\n        if (typeFilter.length > 0)  {\n            type = typeFilter[0].toLowerCase();\n        }\n        let yearFilterShare = yearFilter.map(year => year)\n        let yearFilterLast = yearFilterShare.pop();\n        let shareRanking = [];\n        artistFilter.length === 1 ? shareRanking = currentRanking : shareRanking = currentRanking.slice(0, 10)\n        const sharedText = `My top ranked ${artistFilter.length > 1 ? `${artistFilterShare.join(', ') + ' & ' + artistFilterLast + ' '}` : artistFilter.length > 0 ? `${artistFilter[0]} ` : ''}${typeFilter.length > 0 ? `${type}s` : `albums`} of ${document.getElementById('select-all-twenties').classList.contains('year-selected') ? `the 2020's` : document.getElementById('select-all-teens').classList.contains('year-selected') ? `the 2010's` : document.getElementById('select-all-aughts').classList.contains('year-selected') ? `the 2000's` : yearFilter.length > 1 ? `${yearFilterShare.join(', ') + ' & ' + yearFilterLast}` : yearFilter.length > 0 ? `${yearFilter[0]}` : `all time`}: \\n\\n${shareRanking.map((result, index) => `${index + 1}. ${albums.find(album => album.id === result.albumId).attributes.name} ${albums.find(album => album.id === result.albumId).attributes.emoji !== undefined ? albums.find(album => album.id === result.albumId).attributes.emoji : '' }`).join('\\n')}`;\n        navigator.clipboard.writeText(sharedText);\n    }\n\n    const isExpanded = (id) => {\n        setRowExpanded(id);\n    };\n\n    const filterArtist = (selectedList) => {\n        const artistFilter = selectedList.map(artist => artist.name);\n        setArtistFilter(artistFilter);\n    }\n\n    const filterYear = (selectedList) => {\n        setYearFilter(selectedList);\n    }\n\n    const filterType = (selectedList) => {\n        const typeFilter = selectedList.map(type => type.label);\n        setTypeFilter(typeFilter);\n    }\n\n    const filterRankings = () => {\n        if (artistFilter.length === 0 && yearFilter.length === 0 && typeFilter.length === 0) {\n            if (selectedRanking === 'global') {\n                setCurrentRanking(rankingGlobal);\n            } else if (selectedRanking === 'personal') {\n                setCurrentRanking(rankingUser);\n            }\n        } else {\n            let filteredIds = albums.map(album => album.id);\n            if (artistFilter.length > 0) {\n                albums.forEach(album => {\n                    if (Array.isArray(album.attributes.artistName)) {\n                        if (album.attributes.artistName.some(artist => artistFilter.includes(artist)) === false) {\n                            filteredIds.splice(filteredIds.findIndex(id => id === album.id), 1);\n                        }\n                    } else { \n                        if ((artistFilter.some(artist => artist === album.attributes.artistName)) === false) {\n                            filteredIds.splice(filteredIds.findIndex(id => id === album.id), 1);\n                        }\n                    }\n                });\n            }\n            if (yearFilter.length > 0) {\n                let yearIds = albums.filter(album => yearFilter.some(year => album.attributes.releaseDate.includes(year))).map(album => album.id);\n                filteredIds = filteredIds.filter(id => yearIds.includes(id));\n                searchParams.set('years', yearFilter);\n                var newRelativePathQuery = window.location.pathname + '?' + searchParams.toString();\n                window.history.pushState(null, '', newRelativePathQuery);\n            }\n            if (typeFilter.length > 0) {\n                let typeIds = albums.filter(album => typeFilter.includes(album.type)).map(album => album.id);\n                filteredIds = filteredIds.filter(id => typeIds.includes(id));\n            }\n            let filteredRanking = [];\n            selectedRanking === 'global' ? filteredRanking = rankingGlobal.filter(album => filteredIds.includes(album.albumId)) : filteredRanking = rankingUser.filter(album => filteredIds.includes(album.albumId));\n            setCurrentRanking(filteredRanking);\n        }\n    };\n\n    const closeRow = (id) => {\n        document.getElementById(`table-row-${id}`).style.height = '120px';\n        document.getElementById(`more ${id}`).innerHTML = 'More';\n        document.getElementById(`chevron ${id}`).style.transform = 'rotate(0deg)';\n        document.getElementById(`more ${id}`).style.visibility = '';\n        document.getElementById(`chevron ${id}`).style.visibility = '';\n    }\n\n    const renderTable = () => {\n        if (isLoading) {\n            return <span className='loader' ></span>\n        } else {\n            return currentRanking.map((result, index) => (\n                <TableRow \n                    key={index} \n                    album={albums.find(album => album.id === result.albumId)} \n                    rank={index + 1} \n                    albums={albums} \n                    artists={artists}\n                    rankingGlobal={rankingGlobal} \n                    rankingUser={rankingUser}\n                    resultsGlobal={resultsGlobal} \n                    resultsUser={resultsUser}\n                    selectedRanking={selectedRanking}\n                    isExpanded={isExpanded}\n                />\n            ));\n        }\n    }\n\n    return (\n        <div>\n            <Header artistFilter={artistFilter} yearFilter={yearFilter}/>\n            <div className='filters-rankings'>\n                <RankingSelect onSelect={changeRanking} queryParams={selectedRanking}/>\n                <ArtistFilter id='artist-filter' albums={albums} onSelect={filterArtist} onRemove={filterArtist} queryParams={artistFilter} yearFilter={yearFilter} typeFilter={typeFilter} />\n                <YearFilter onChange={filterYear} queryParams={yearFilter} albums={albums} artistFilter={artistFilter} typeFilter={typeFilter} />\n                <TypeSelect onSelect={filterType} onRemove={filterType} queryParams={typeFilter} albums={albums} artistFilter={artistFilter} yearFilter={yearFilter} />\n                <div className='share' >\n                    {selectedRanking === 'personal' ? \n                    <ThemeProvider theme={theme}>\n                        <Button variant=\"contained\" onClick ={shareRanking} color='secondary' sx={{ borderRadius: '20px', height: '40px', padding: '0px 32px 0px 32px', textTransform: 'none', fontSize: '16px', fontFamily: 'Helvetica', color: '#FFFFFF' }} endIcon={<ShareOutlined size='small'/>} >\n                            Share\n                        </Button> \n                    </ThemeProvider>\n                    : null}\n                </div>\n            </div>\n            <TableHeader />\n            <div className='table-container' id='table-container'>\n                {renderTable()}\n            </div>\n            <div className='embed'>\n                \n            </div>\n        </div>\n    );\n}\n\nexport default Rankings;","import React from \"react\";\nimport Rank from \"./Components/Rank/Rank\";\nimport Rankings from \"./Components/Ranking/Rankings\";\nimport { Outlet, Link } from \"react-router-dom\";\n\nfunction App() {\n    return (\n        <>\n            <Outlet />\n        </>\n    )\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter, Routes, Route } from 'react-router-dom';\nimport Rank from './Components/Rank/Rank';\nimport Rankings from './Components/Ranking/Rankings';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n    <BrowserRouter basename=\"/rankable\">\n        <Routes>\n            <Route path=\"/\" element={<App />} />\n            <Route index element={<Rank />} />\n            <Route path=\"rankings\" element={<Rankings />} />\n\n        </Routes>\n    </BrowserRouter>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}