{"version":3,"sources":["Images/rankabl-logo.png","util/newShade.js","Components/Album/Album.js","Components/AlbumContainer/AlbumContainer.js","util/generatePairs.js","util/getArtists.js","Components/MuiTheme/Theme.js","Components/ArtistFilter/ArtistFilter.js","Components/YearFilter/YearFilter.js","Components/Header/Header.js","Components/RankingFilter/RankingFilter.js","util/solveRanking.js","Components/Rank/Rank.js","Components/TableRow/TableRowCarousel.js","Components/TableRow/MobileTableRowCarousel.js","Components/TableRow/TableRow.js","Components/TableHeader/TableHeader.js","Components/RankingSelect/RankingSelect.js","Components/TypeSelect/TypeSelect.js","Components/Ranking/Rankings.js","App.js","reportWebVitals.js","index.js"],"names":["module","exports","__webpack_require__","p","newShade","color","percent","num","parseInt","amt","Math","round","R","B","G","toString","slice","Album","Array","isArray","this","props","album","attributes","artistName","join","url","replace","style","--bg-color","artwork","bgColor","--text-color-1","textColor1","--text-color-2","textColor2","--text-color-3","textColor3","--text-color-4","textColor4","--shadow","--shadow-hover","--bg-gradient","react_default","a","createElement","className","id","onMouseDown","mouseDown","onMouseUp","mouseUp","onClick","src","replaceUrl","alt","name","getArtistName","React","Component","require","AlbumContainer","_useState","useState","_useState2","Object","slicedToArray","albumPairs","setAlbumPairs","_useState3","_useState4","selectedPair","setSelectedPair","_useState5","_useState6","album1","setAlbum1","_useState7","_useState8","album2","setAlbum2","_useState9","_useState10","loading","setLoading","_useState11","_useState12","seenPairs","setSeenPairs","_useState13","_useState14","needNewPair","setNeedNewPair","useEffect","length","albumsLoaded","loadedUserData","albums","filteredPairs","filterPairs","console","log","setTimeout","getNewAlbums","then","view","array","pairs","results","i","j","push","generatePairs","votedPairs","includes","filter","pair","selectAlbums","floor","random","_ref","asyncToGenerator","_regeneratorRuntime","mark","_callee","albumArray","selectedAlbums","album1Index","album2Index","errorMessages","skipButtons","wrap","_context","prev","next","find","from","document","getElementsByClassName","forEach","element","visibility","removeAttribute","stop","_x","apply","arguments","pushResults","e","album1Id","album2Id","result","currentTarget","axios","method","params","userId","data","seenPair","res","userResult","catch","err","handleClick","_ref2","_callee2","_context2","_x2","skip","target","filteredArray","getElementById","setAttribute","newAlbums","albumId","handlers","useSwipeable","onSwipedLeft","window","screen","width","onSwipedRight","preventDefaultTouchmoveEvent","preventScrollOnSwipe","touchEventOptions","passive","filters","Components_Album_Album","assign","classList","add","getArtists","_loop","some","obj","count","sort","b","theme","createTheme","palette","primary","main","contrastText","secondary","filterTheme","ArtistFilter","options","setOptions","selectedValues","setSelectedValues","queryParams","map","artist","option","filterArtists","yearFilter","typeFilter","filteredAlbums","year","releaseDate","typeAlbums","type","dist_default","onSelect","onRemove","displayValue","avoidHighlightFirstOption","placeholder","closeIcon","hidePlaceholder","closeOnSelect","customArrow","ThemeProvider","SearchRounded","fontSize","showArrow","CarousalItem","children","Carousal","activeIndex","setActiveIndex","updateIndex","newIndex","Children","index","getDecade","transform","concat","child","cloneElement","YearFilter","selectedList","setSelectedList","isOpen","setIsOpen","setCount","aughts","setAughts","teens","setTeens","twenties","setTwenties","filterId","toggle","calendarRef","useRef","handler","event","current","contains","addEventListener","removeEventListener","onChange","splitYearParams","disableYears","artistFilter","searchParams","URLSearchParams","location","search","yearParams","get","split","yearHover","yearHoverLeave","remove","selectYear","onRemoveSelectedItem","innerHTML","newList","toConsumableArray","selectDecade","querySelectorAll","el","pushedArray","item","toggleCalendar","years","$","_","x","aughtsDefault","teensDefault","twentiesDefault","splice","findIndex","filterAlbum","albumYears","uniqueYears","Set","disabled","aughtsFiltered","teensFiltered","twentiesFiltered","every","ref","chipArray","ExpandMoreRounded","baseClassName","value","key","renderSelectedList","YearFilter_Carousal","YearFilter_CarousalItem","onMouseEnter","onMouseLeave","Header","pathname","logo","react_router_dom","to","headerParams","RankingFilter","sliderValue","setSliderValue","toggleSlider","sliderMarks","label","chipValue","FormControl","RadioGroup","row","defaultValue","FormControlLabel","control","Radio","size","sx","marginRight","Slider","marks","step","max","newValue","filterRanking","solveRanking","formattedResults","newResult","ids","keys","flatIds","flat","uniqueIds","matrix","m4th","set","gameCount","k","ratings","albumWL","albumRating","reduce","previousValue","currentValue","y","solution","lu","solve","rankings","rating","App","setArtistFilter","setYearFilter","rankingFilterValue","setRankingFilterValue","allAlbums","setAllAlbums","availableAlbums","setAvailableAlbums","loadedAlbums","setLoadedAlbums","filtersEnabled","setFiltersEnabled","_useState15","_useState16","setUserId","_useState17","_id","_useState18","userData","setUserData","_useState19","_useState20","setLoadedUserData","_useState21","_useState22","artistParams","setArtistParams","_useState23","_useState24","resultsGlobal","setResultsGlobal","_useState25","_useState26","resultsUser","setResultsUser","_useState27","_useState28","rankingGlobal","setRankingGlobal","_useState29","_useState30","setRankingUser","_useState31","_useState32","filterButtonColor","setFilterButtonColor","getUserId","fetchAlbums","fetchResults","splitArtistParams","getUserData","filterAlbums","delete","newRelativePathQuery","history","pushState","verification_method","secret","response","jsCookie","uuid","v4","expires","artistArray","rankingFilterAlbums","filterArtist","filterYear","classNyarn","run","deployame","Components_Header_Header","Components_ArtistFilter_ArtistFilter","YearFilter_YearFilter_YearFilter","RankingFilter_RankingFilter_RankingFilter","Button","top","overflow","variant","textTransform","borderRadius","endIcon","FilterAltRounded","Components_AlbumContainer_AlbumContainer","IconButton","CloseRounded","CarouselItem","Carousel","MobileCarouselItem","MobileCarousel","TableRow","setStyle","formatDate","date","moment","format","editorialNotes","rank","standard","expandTableRow","scrollIntoView","behavior","block","isExpanded","getAllArtistAlbums","artistInput","sameArtist","globalIds","ranking","userIds","rankingUser","selectedRanking","renderOtherAlbums","otherAlbums","getOtherAlbums","renderRecentResults","filteredResults","recentResults","reverse","getRecentResults","getArtistArtworkUrl","artists","genreNames","trackCount","TableRowCarousel_Carousel","TableRowCarousel_CarouselItem","toFixed","MobileTableRowCarousel_MobileCarousel","MobileTableRowCarousel_MobileCarouselItem","TableHeader","RankingSelect","singleSelect","TypeSelect","getTypeOptions","filterTypes","toLowerCase","albumA","foundAlbum","Rankings","setAlbums","setArtists","currentRanking","setCurrentRanking","setSelectedRanking","isLoading","setIsLoading","rowExpanded","setRowExpanded","setTypeFilter","fetchArtists","getAll","filterRankings","closeRow","prevRow","usePrevious","filterType","filteredIds","yearIds","typeIds","filteredRanking","Components_RankingSelect_RankingSelect","selectedItem","Components_TypeSelect_TypeSelect","height","artistFilterShare","artistFilterLast","pop","yearFilterShare","yearFilterLast","shareRanking","sharedText","undefined","emoji","navigator","clipboard","writeText","padding","fontFamily","ShareOutlined","Components_TableHeader_TableHeader","Components_TableRow_TableRow","Fragment","react_router","reportWebVitals","onPerfEntry","Function","bind","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","render","basename","path","src_App","Rank_Rank","Components_Ranking_Rankings"],"mappings":"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","file":"static/js/main.f8e4ff86.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/rankabl-logo.251c7ee4.png\";","const newShade = function(color, percent) {\n    var num = parseInt(color,16),\n      amt = Math.round(2.55 * percent),\n      R = (num >> 16) + amt,\n      B = (num >> 8 & 0x00FF) + amt,\n      G = (num & 0x0000FF) + amt;\n\n      return (0x1000000 + (R<255?R<1?0:R:255)*0x10000 + (B<255?B<1?0:B:255)*0x100 + (G<255?G<1?0:G:255)).toString(16).slice(1);\n};\n\nexport default newShade;","import React from \"react\";\nimport \"./Album.css\";\nimport newShade from \"../../util/newShade\";\nimport { stringify } from \"uuid\";\n\nclass Album extends React.Component {\n  \n  /* mouseDown() {\n    document.getElementById().style.transform = \"scale(0.99)\";\n  }\n\n  mouseUp() {\n    document.getElementById().style.transform = \"scale(1)\";\n  } */\n\n  getArtistName() {\n    if (Array.isArray(this.props.album.attributes.artistName)) {\n      return this.props.album.attributes.artistName.join(' & ');\n    } else {\n      return this.props.album.attributes.artistName;\n    }\n  }\n\n  replaceUrl(url) {\n    let coverArtUrl = url.replace('{w}', '600').replace('{h}', '600')\n    return coverArtUrl;\n  }\n  \n  \n  render() {\n    if (this.props.album) {\n      const style = { '--bg-color': '#' + this.props.album.attributes.artwork.bgColor, \n                  '--text-color-1': '#' + this.props.album.attributes.artwork.textColor1, \n                  '--text-color-2': '#' + this.props.album.attributes.artwork.textColor2, \n                  '--text-color-3': '#' + this.props.album.attributes.artwork.textColor3, \n                  '--text-color-4': '#' + this.props.album.attributes.artwork.textColor4,\n                  '--shadow': '#' + this.props.album.attributes.artwork.textColor4 + '25',\n                  '--shadow-hover': '#' + this.props.album.attributes.artwork.textColor4 + '50',\n                  '--bg-gradient': '#' + newShade(this.props.album.attributes.artwork.bgColor, 8)}\n\n      return (\n        <div className=\"album\" id={this.props.id} style={style} onMouseDown={this.mouseDown} onMouseUp={this.mouseUp} onClick={this.props.onClick}>\n          <img src={this.replaceUrl(this.props.album.attributes.artwork.url)} alt={this.props.album.attributes.name} />\n          <h1 className=\"album-title\" >{this.props.album.attributes.name}</h1>\n          <h2 className=\"album-artist\" >{this.getArtistName()}</h2>\n        </div>\n      );\n    } \n  }\n}\n\nexport default Album;","import React, { useState, useEffect } from \"react\";\nimport Album from \"../Album/Album\";\nimport './AlbumContainer.css';\nimport { generatePairs } from \"../../util/generatePairs\";\nimport axios from \"axios\";\nimport { arrayEquals } from \"../../util/generatePairs\";\nimport { useSwipeable } from \"react-swipeable\";\n\nconst m4th = require('m4th');\n\nconst AlbumContainer = (props) => {\n    \n    let [albumPairs, setAlbumPairs] = useState([]);\n    let [selectedPair, setSelectedPair] = useState([]);\n    let [album1, setAlbum1] = useState([]);\n    let [album2, setAlbum2] = useState([]);\n    let [loading, setLoading] = useState(false);\n    let [seenPairs, setSeenPairs] = useState([]);\n    let [needNewPair, setNeedNewPair] = useState(false);\n\n    useEffect(() => {\n        setLoading(true);\n    }, []);\n\n    useEffect(() => {\n        if (albumPairs.length === 0  && props.albumsLoaded && props.loadedUserData) {\n            setSeenPairs(props.seenPairs)\n        }\n    }, [props.albumsLoaded, props.loadedUserData]);\n\n    useEffect(() => {\n        if (props.loadedUserData && props.albums) {\n            const filteredPairs = filterPairs(props.albums)\n            setAlbumPairs(filteredPairs)\n        };\n    }, [seenPairs]);\n\n    useEffect(() => {\n        if (albumPairs.length > 0) {\n            setNeedNewPair(true);\n            console.log('new pair')\n        } else if (props.albumsLoaded && props.loadedUserData) {\n            setTimeout(() => {setLoading(false)}, 300);\n            console.log(' no more albums ')\n        }\n    }, [albumPairs]);\n\n    useEffect(() => {\n        if (needNewPair && albumPairs.length > 0) {\n            getNewAlbums(albumPairs)\n            .then(() => {\n                setNeedNewPair(false);\n                setLoading(false);\n            });\n        }\n    }, [needNewPair]);\n\n    useEffect(() => {\n        if (props.albumsLoaded) {\n            console.log('albums changed');\n            setLoading(true);\n            setTimeout(() => {setAlbumPairs(filterPairs(props.albums))}, 300);\n        }\n    }, [props.albums]);\n\n    const filterPairs = (array) => {\n        const pairs = generatePairs(array);\n        let votedPairs = [];\n        for (let i = 0; i < seenPairs.length; i++) {\n            for (let j = 0; j < pairs.length; j++) {\n                if (seenPairs[i].includes(pairs[j][0]) && seenPairs[i].includes(pairs[j][1])) {\n                    votedPairs.push(pairs[j]);\n                }\n            }\n        }\n        const finalTry = pairs.filter(pair => !votedPairs.includes(pair))\n        return finalTry;  \n    }\n\n    const selectAlbums = (array) => {\n        const selectedPair = array[Math.floor(Math.random() * array.length)];\n        return selectedPair;\n    }\n\n    const filterAvailablePairs = (seenPairsFilter, albumPairs) =>{\n        for (let i = 0; i < albumPairs.length; i++) {\n            for (let j = 0; j < seenPairs.length; j++) {\n                if (arrayEquals(albumPairs[i], seenPairs[j])) {\n                    seenPairsFilter.push(albumPairs[i]);\n                }\n            }\n        }\n    }\n\n    const getNewAlbums= async (albumArray) => {\n        const selectedAlbums = selectAlbums(albumArray);\n        const album1Index = Math.floor(Math.random() * selectedAlbums.length);\n        const album2Index = 1 - album1Index;\n        await setSelectedPair(selectedAlbums);\n        await setAlbum1(props.albums.find(album => album.id === selectedAlbums[album1Index]));\n        await setAlbum2(props.albums.find(album => album.id === selectedAlbums[album2Index]));\n        const errorMessages = Array.from(document.getElementsByClassName('skip-error-message'))\n        const skipButtons = Array.from(document.getElementsByClassName('skip-button'))\n        errorMessages.forEach(element => {\n            element.style.visibility = 'hidden';\n        });\n        skipButtons.forEach(element => {\n            element.removeAttribute('disabled');\n        }); \n    }\n\n    const pushResults = (e) => {\n        let album1Id = album1.id;\n        let album2Id = album2.id;\n        let result = {};\n        if (e.currentTarget.id === 'album1') {\n            result[album1Id] = 1;\n            result[album2Id] = -1;\n            result = {\n                album1: {\n                    id: album1Id,\n                    result: 1\n                },\n                album2: {\n                    id: album2Id,\n                    result: -1\n                }\n            }\n            setLoading(true);\n            axios({\n                url: 'https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/results/save',\n                method: 'POST',\n                params: {\n                    userId: props.userId,\n                },\n                data: {\n                    result: result,\n                    seenPair: selectedPair\n                }\n            }).then(res => {\n                setSeenPairs(res.data.userResult.seenPairs);\n                console.log(res.data.userResult.seenPairs);\n            }).catch(err => {\n                console.log(err);\n            });\n        }\n        if (e.currentTarget.id === 'album2') {\n            result[album1Id] = -1;\n            result[album2Id] = 1;\n            result = {\n                album1: {\n                    id: album1Id,\n                    result: -1\n                },\n                album2: {\n                    id: album2Id,\n                    result: 1\n                }\n            }\n            setLoading(true);\n            axios({\n                url: 'https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/results/save',\n                method: 'POST',\n                params: {\n                    userId: props.userId,\n                },\n                data: {\n                    result: result,\n                    seenPair: selectedPair\n                }\n            }).then(res => {\n                setSeenPairs(res.data.userResult.seenPairs);\n                console.log(res.data.userResult.seenPairs);\n            }).catch(err => {\n                console.log(err);\n            });\n        }\n    }\n\n    const handleClick = async (e) => {\n        await pushResults(e);\n    }\n\n    const skip = (e) => {\n        const album1Id = album1.id;\n        const album2Id = album2.id;\n\n        if (e.target.id === 'second') {\n            const filteredArray = albumPairs.filter(function(pairs) {\n                return pairs.includes(album1Id) && !pairs.includes(album2Id)\n            })\n            if (filteredArray.length === 0) {\n                document.getElementById('second').setAttribute(\"disabled\", \"disabled\")\n                document.getElementById('first').setAttribute(\"disabled\", \"disabled\")\n                document.getElementById('skip-error-second').style.visibility = \"visible\"\n                return\n            } else {\n                const newAlbums = selectAlbums(filteredArray);\n                setSelectedPair(newAlbums);\n                setAlbum2(props.albums.find(album => album.id === newAlbums.find(albumId => albumId !== album1Id)));\n            }\n        } else if (e.target.id === 'first') {\n            const filteredArray = albumPairs.filter(function(pairs) {\n                return pairs.includes(album2Id) && !pairs.includes(album1Id)\n            })\n            if (filteredArray.length === 0) {\n                document.getElementById('first').setAttribute(\"disabled\", \"disabled\");\n                document.getElementById('second').setAttribute(\"disabled\", \"disabled\");\n                document.getElementById('skip-error-first').style.visibility = \"visible\"\n                return\n            } else {\n                const newAlbums = selectAlbums(filteredArray);\n                setSelectedPair(newAlbums);\n                setAlbum1(props.albums.find(album => album.id === newAlbums.find(albumId => albumId !== album2Id)));\n            }\n        }\n    }\n\n\n\n    const skipBoth = () => {\n        const album1Id = album1.id;\n        const album2Id = album2.id;\n        const filteredArray = albumPairs.filter(function(pairs) {\n            return !pairs.includes(album1Id) && !pairs.includes(album2Id)\n        });\n        if (filteredArray.length === 0) {\n            document.getElementById('skip-both').setAttribute(\"disabled\", \"disabled\");\n            document.getElementById('skip-error-both').classList.add('is-visible');\n        } else {\n            const selectedAlbums = selectAlbums(filteredArray);\n            const album1Index = Math.floor(Math.random() * selectedAlbums.length);\n            const album2Index = 1 - album1Index;\n            setSelectedPair(selectedAlbums);\n            setAlbum1(props.albums.find(album => album.id === selectedAlbums[album1Index]));\n            setAlbum2(props.albums.find(album => album.id === selectedAlbums[album2Index]));\n        }\n    }\n\n    const handlers = useSwipeable({\n        onSwipedLeft: () => {window.screen.width < 500 && console.log('swiper no swiping')},\n        onSwipedRight: () => {window.screen.width < 500 && skip()},\n        preventDefaultTouchmoveEvent: true,\n        preventScrollOnSwipe: true,\n        touchEventOptions: { passive: true }\n    })\n\n    const filters = props.filters;\n    let view;\n    if (loading) {\n        view =  <div className=\"album-container\">\n                    <span className='loader' ></span>\n                </div>\n    } else if (albumPairs.length === 0) {\n        if (filters) {\n            view = <h1>No available pairs of albums. Widen filters and try again.</h1>\n            document.getElementById('first') && document.getElementById('first').setAttribute(\"disabled\", \"disabled\");\n            document.getElementById('second') && document.getElementById('second').setAttribute(\"disabled\", \"disabled\");\n            document.getElementById('skip-both') && document.getElementById('skip-both').setAttribute(\"disabled\", \"disabled\");\n        } else {\n            view = <h1>No available pairs of albums.</h1>\n            document.getElementById('first') && document.getElementById('first').setAttribute(\"disabled\", \"disabled\");\n            document.getElementById('second') && document.getElementById('second').setAttribute(\"disabled\", \"disabled\");\n            document.getElementById('skip-both') && document.getElementById('skip-both').setAttribute(\"disabled\", \"disabled\");\n        }\n    } else {\n        view =  <div className='album-container'>\n                    <Album {...handlers} className='album' id='album1' album={album1} onClick={handleClick} />\n                    <button className='skip skip-button' id=\"first\" onClick={skip} ></button>\n                    <button className='skip skip-button skip-both' id='skip-both' onClick={skipBoth} ></button>\n                    <Album {...handlers} className='album' id='album2' album={album2} onClick={handleClick} />\n                    <button className='skip skip-button' id=\"second\" onClick={skip} ></button>\n                    <p className='skip-error-message' id='skip-error-first' >No available albums</p>\n                    <p className='skip-error-both' id='skip-error-both' >No available albums</p>\n                    <p className='skip-error-message' id='skip-error-second' >No available albums</p>\n                </div>\n\n    }\n\n    return (\n        <div className='view-container'>\n            {view}\n        </div>\n    )\n\n}\n\nexport default AlbumContainer;","import seenPairs from \"../seenPairs\";\n\nexport const generatePairs = (array) => {\n    let results = [];\n    for (let i = 0; i < array.length - 1; i++) {\n        for (let j = i + 1; j < array.length; j++)\n        results.push([array[i].id, array[j].id])\n    };\n    return results;\n}\nexport function arrayEquals(a, b) {\n    return Array.isArray(a) &&\n      Array.isArray(b) &&\n      a.length === b.length &&\n      a.every((val, index) => val === b[index]);\n  }\n\n\n","function getArtists(array) {\n    let results = [];\n    for (let i = 0; i < array.length; i++) {\n        if (Array.isArray(array[i].attributes.artistName)){\n            for (let j = 0; j < array[i].attributes.artistName.length; j++) {\n                let artistName = array[i].attributes.artistName[j];\n                let exists = results.some(obj => obj.name === artistName);\n                 if (!exists) {\n                    results.push({\n                        name: artistName,\n                        id: results.length + 1,\n                        count: array.filter(album => album.attributes.artistName === artistName).length})\n                }\n            }\n        } else {\n            let artistName = array[i].attributes.artistName;\n            let exists = results.some(obj => obj.name === artistName);\n            if (!exists) {\n            results.push({\n                name: artistName,\n                id: results.length + 1,\n                count: array.filter(album => album.attributes.artistName === artistName).length})\n            }\n        }\n    };\n    let sortedResults = results.sort((a, b) => b.count - a.count);\n    return sortedResults;\n}\n\nexport default getArtists;","import { createTheme } from \"@mui/material\";\n\nexport const theme = createTheme({\n    palette: {\n        primary: {\n            main: \"#CFCFCF\",\n            contrastText: \"#fff\"\n        },\n        secondary: {\n            main: \"#8673FA\",\n            contrastText: \"#fff\"\n        }\n    },\n\n    mark: {\n        color: \"red\"\n      }\n});\n\nexport const filterTheme = createTheme({\n    palette: {\n        primary: {\n            main: \"#CFCFCF\",\n            contrastText: \"#fff\"\n        },\n        secondary: {\n            main: \"#B1A5FA\",\n            contrastText: \"#fff\"\n        }\n    },\n\n    mark: {\n        color: \"red\"\n      }\n});","import React, { useState, useEffect } from \"react\";\nimport Multiselect from \"multiselect-react-dropdown\";\nimport './ArtistFilter.css'\nimport getArtists from \"../../util/getArtists\";\nimport { SearchRounded } from \"@mui/icons-material\";\nimport { ThemeProvider } from \"@mui/system\";\nimport { theme } from '../MuiTheme/Theme';\n\nconst ArtistFilter = (props) => {\n    let [options, setOptions] = useState([]);\n    let [selectedValues, setSelectedValues] = useState([]);\n\n    useEffect(() => {\n        setOptions(getArtists(props.albums));\n    }, [props.albums]);\n\n    useEffect(() => {\n        if (options.length > 0) {\n            setSelectedValues(props.queryParams.map(artist => options.find(option => option.name === artist)));\n        }\n    }, [options])\n\n    useEffect( () => {\n        setOptions(getArtists(filterArtists()));\n    }, [props.yearFilter, props.typeFilter])\n\n    const filterArtists = () => {\n        let filteredAlbums = props.albums.map(album => album);\n\n        if (props.yearFilter.length > 0) {\n            filteredAlbums = filteredAlbums.filter(album => props.yearFilter.some(year => album.attributes.releaseDate.includes(year)));\n        }\n\n        if (props.typeFilter && props.typeFilter.length > 0) {\n            let typeAlbums = props.albums.filter(album => props.typeFilter.includes(album.type));\n            filteredAlbums = filteredAlbums.filter(album => typeAlbums.includes(album));\n            console.log(filteredAlbums);\n        }\n\n        return filteredAlbums\n    }\n\n\n\n    return (\n        <Multiselect id={props.id}\n        options={options} // Options to display in the dropdown\n        selectedValues={selectedValues} // Preselected value to persist in dropdown\n        onSelect={props.onSelect} // Function will trigger on select event\n        onRemove={props.onRemove} // Function will trigger on remove event\n        displayValue=\"name\" // Property name to display in the dropdown options\n        avoidHighlightFirstOption='true'\n        placeholder={'Artists'}\n        closeIcon={'cancel'}\n        hidePlaceholder={'true'}\n        closeOnSelect={'true'}\n        customArrow={<ThemeProvider theme={theme} ><SearchRounded color=\"primary\" fontSize=\"small\"/></ThemeProvider>}\n        showArrow={'true'}\n        />     \n    )\n\n}\n\nexport default ArtistFilter;","import React, { useEffect, useRef, useState } from \"react\";\nimport './YearFilter.css';\nimport $ from 'jquery';\nimport { ExpandMoreRounded } from \"@mui/icons-material\";\nimport { ThemeProvider } from \"@mui/system\";\nimport { theme } from '../MuiTheme/Theme';\n\nconst CarousalItem = ({children, width}) => {\n    return (\n        <div className=\"carousal-item\" style={{width: width}}>\n            {children}\n        </div>\n    );\n}\n\nconst Carousal = ({children}) => {\n    const [activeIndex, setActiveIndex] = useState(2);\n    \n    const updateIndex = (newIndex) => {\n        if (newIndex < 0) {\n            newIndex = 0;\n        } else if (newIndex >= React.Children.count(children)) {\n            newIndex = React.Children.count(children) - 1;\n        }\n\n        setActiveIndex(newIndex);\n    }\n\n    const getDecade = (index) => {\n        switch (index) {\n            case 0:\n                return \"2000's\";\n            case 1:\n                return \"2010's\";\n            case 2:\n                return \"2020's\";\n            default:\n                return \"Select years\";\n        }\n    }\n\n    return (\n        <div className=\"carousal\">\n            <div className='indicators'>\n                <button className='next-prev-button' onClick={() => {\n                    updateIndex(activeIndex - 1);\n                }}\n                >\n                    &lsaquo;\n                </button>\n                <span id='decade' >{getDecade(activeIndex)}</span>\n                <button className='next-prev-button' onClick={() => {\n                    updateIndex(activeIndex + 1);\n                }}\n                >\n                    ›\n                </button>\n            </div>\n            <div className=\"inner\" style={{ transform: `translateX(-${activeIndex * 100}%)` }}>\n                {React.Children.map(children, (child, index) => {\n                    return React.cloneElement(child, {width: \"100%\" });\n                })}\n            </div>\n        </div>\n    );\n}\n\nexport const YearFilter = (props) => {\n    let [selectedList, setSelectedList] = useState([]);\n    let [isOpen, setIsOpen] = useState(false);\n    let [count, setCount] = useState(0);\n    let [aughts, setAughts] = useState(['2000', '2001', '2002', '2003', '2004', '2005', '2006', '2007', '2008', '2009']);\n    let [teens, setTeens] = useState(['2010', '2011', '2012', '2013', '2014', '2015', '2016', '2017', '2018', '2019']);\n    let [twenties, setTwenties] = useState(['2020', '2021', '2022']);\n    \n    useEffect(() => {\n        if (count > 0) {\n            document.getElementById(props.filterId).classList.toggle('display');\n            console.log('filter display toggled');\n        }\n    }, [isOpen]);\n\n    let calendarRef= useRef();\n\n    useEffect(() => {\n        let handler = (event) => {\n            if (!calendarRef.current.contains(event.target)) {\n                document.getElementById(props.filterId).classList.add('display');\n            }\n        };\n\n        document.addEventListener('mousedown', handler);\n\n        return () => {\n            document.removeEventListener('mousedown', handler);\n        };\n    });\n\n    useEffect(() => {\n        props.onChange(selectedList);\n    }, [selectedList]);\n\n    useEffect(() => {\n        setSelectedList(splitYearParams);\n    }, [])\n\n    useEffect(() => {\n        if (props.albums.length > 0) {\n            disableYears();\n        }\n    }, [props.albums, props.artistFilter, props.typeFilter])\n\n    let searchParams = new URLSearchParams(window.location.search);\n    \n    const splitYearParams = () => {\n        let yearParams = searchParams.get('years');\n        if (yearParams !== null) {\n            let yearArray = yearParams.split(',');\n            return yearArray;\n        } else {\n            return [];\n        }\n    }\n\n    function yearHover(e) {\n        e.target.classList.add(\"hover\");\n    }\n\n    function yearHoverLeave(e) {\n        e.target.classList.remove(\"hover\");\n        e.target.classList.remove(\"select-hover\");\n    }\n\n    function selectYear(e) {\n        \n        if (e.target.classList.contains(\"year-selected\")) {\n            onRemoveSelectedItem(e.target.innerHTML)\n            if (e.target.classList.contains('aughts')) {\n                document.getElementById('select-all-aughts').classList.remove('year-selected');\n            } else if (e.target.classList.contains('teens')) {\n                document.getElementById('select-all-teens').classList.remove('year-selected');\n            } else if (e.target.classList.contains('twenties')) {\n                document.getElementById('select-all-twenties').classList.remove('year-selected');\n            }\n        } else {\n            e.target.classList.toggle(\"year-selected\");\n            let newList = [...selectedList, e.target.innerHTML];\n            setSelectedList(newList.sort());\n        }\n    }\n\n    function selectDecade(e) {\n        if (e.target.classList.contains('aughts')) {\n            if (!e.target.classList.contains('year-selected')) {\n                let pushedArray = aughts.filter(year => !selectedList.includes(year));\n                setSelectedList([...selectedList, ...pushedArray]);\n                Array.from(document.querySelectorAll('.aughts')).forEach((el) => el.classList.add('year-selected')); \n            } else {\n                setSelectedList(selectedList.filter(year => !aughts.includes(year)))\n                Array.from(document.querySelectorAll('.aughts')).forEach((el) => el.classList.remove('year-selected'));\n                document.getElementById('select-all-aughts').innerHTML = 'Select All';\n            }\n        } else if (e.target.classList.contains('teens')) {\n            if (!e.target.classList.contains('year-selected')) {\n                let pushedArray = teens.filter(year => !selectedList.includes(year));\n                setSelectedList([...selectedList, ...pushedArray]);\n                Array.from(document.querySelectorAll('.teens')).forEach((el) => el.classList.add('year-selected')); \n            } else {\n                setSelectedList(selectedList.filter(year => !teens.includes(year)))\n                Array.from(document.querySelectorAll('.teens')).forEach((el) => el.classList.remove('year-selected'));\n                document.getElementById('select-all-teens').innerHTML = 'Select All';\n            }\n        } else if (e.target.classList.contains('twenties')) {\n            if (!e.target.classList.contains('year-selected')) {\n                let pushedArray = twenties.filter(year => !selectedList.includes(year));\n                console.log(pushedArray);\n                setSelectedList([...selectedList, ...pushedArray]);\n                Array.from(document.querySelectorAll('.twenties')).forEach((el) => el.classList.add('year-selected')); \n            } else {\n                setSelectedList(selectedList.filter(year => !twenties.includes(year)))\n                Array.from(document.querySelectorAll('.twenties')).forEach((el) => el.classList.remove('year-selected'));\n                document.getElementById('select-all-twenties').innerHTML = 'Select All';\n            }\n        }\n    }\n\n    \n    function renderSelectedList() { \n        let chipArray = selectedList; \n        if (aughts.length > 0 && aughts.every(year => chipArray.includes(year))) {\n            chipArray = chipArray.filter(year=> !aughts.includes(year));\n            chipArray.push(\"2000's\")\n            chipArray.sort()\n            document.getElementById('select-all-aughts').classList.add(\"year-selected\");\n            document.getElementById('select-all-aughts').innerHTML = 'Remove All'\n        }\n        if (teens.length > 0 && teens.every(year => chipArray.includes(year))) {\n            chipArray = chipArray.filter(year=> !teens.includes(year));\n            chipArray.push(\"2010's\")\n            chipArray.sort();\n            document.getElementById('select-all-teens').classList.add(\"year-selected\");\n            document.getElementById('select-all-teens').innerHTML = 'Remove All'\n        }\n        if (twenties.length > 0 && twenties.every(year => chipArray.includes(year))) {\n            chipArray = chipArray.filter(year=> !twenties.includes(year));\n            chipArray.push(\"2020's\")\n            chipArray.sort();\n            document.getElementById('select-all-twenties').classList.add(\"year-selected\");\n            document.getElementById('select-all-twenties').innerHTML = 'Remove All'\n        }\n        if (selectedList.length === 0) {\n            return <div className='placeholder' onClick={toggleCalendar} >\n                <p className='placeholder-text'>Years</p>\n                <ThemeProvider theme={theme}>\n                    <ExpandMoreRounded color=\"primary\" baseClassName=\"icon\" id=\"year-filter-icon\"/>\n                </ThemeProvider>\n                </div>\n        } else {\n            return chipArray.map((value, index) => (\n                <span className='chip-year' key={index}>\n                    {value} <img\n                    className=\"icon_cancel closeIcon\" \n                    alt='Cancel icon'\n                    src=\"data:image/svg+xml,%3Csvg%20height%3D%22512px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20width%3D%22512px%22%20xml%3Aspace%3D%22preserve%22%20%20%20%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20%20%20%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%20%20%20%20%3Cstyle%20type%3D%22text%2Fcss%22%3E%20%20%20%20%20%20%20%20.st0%7B%20%20%20%20%20%20%20%20%20%20%20%20fill%3A%23fff%3B%20%20%20%20%20%20%20%20%7D%20%3C%2Fstyle%3E%20%20%20%20%3Cpath%20class%3D%22st0%22%20d%3D%22M443.6%2C387.1L312.4%2C255.4l131.5-130c5.4-5.4%2C5.4-14.2%2C0-19.6l-37.4-37.6c-2.6-2.6-6.1-4-9.8-4c-3.7%2C0-7.2%2C1.5-9.8%2C4%20%20L256%2C197.8L124.9%2C68.3c-2.6-2.6-6.1-4-9.8-4c-3.7%2C0-7.2%2C1.5-9.8%2C4L68%2C105.9c-5.4%2C5.4-5.4%2C14.2%2C0%2C19.6l131.5%2C130L68.4%2C387.1%20%20c-2.6%2C2.6-4.1%2C6.1-4.1%2C9.8c0%2C3.7%2C1.4%2C7.2%2C4.1%2C9.8l37.4%2C37.6c2.7%2C2.7%2C6.2%2C4.1%2C9.8%2C4.1c3.5%2C0%2C7.1-1.3%2C9.8-4.1L256%2C313.1l130.7%2C131.1%20%20c2.7%2C2.7%2C6.2%2C4.1%2C9.8%2C4.1c3.5%2C0%2C7.1-1.3%2C9.8-4.1l37.4-37.6c2.6-2.6%2C4.1-6.1%2C4.1-9.8C447.7%2C393.2%2C446.2%2C389.7%2C443.6%2C387.1z%22%2F%3E%3C%2Fsvg%3E\" \n                    onClick={() => onRemoveSelectedItem(value)}>\n                    </img>\n                </span>\n            ));\n        }\n    }\n\n    \n    function onRemoveSelectedItem(item) {\n        if (item === \"2000's\") {\n            setSelectedList(selectedList.filter(year => !aughts.includes(year)))\n            Array.from(document.querySelectorAll('.aughts')).forEach((el) => el.classList.remove('year-selected'));\n            document.getElementById('select-all-aughts').innerHTML = 'Select All';\n        } else if (item === \"2010's\") {\n            setSelectedList(selectedList.filter(year => !teens.includes(year)))\n            Array.from(document.querySelectorAll('.teens')).forEach((el) => el.classList.remove('year-selected'));\n            document.getElementById('select-all-teens').innerHTML = 'Select All';\n        } else if (item === \"2020's\") {\n            setSelectedList(selectedList.filter(year => !twenties.includes(year)))\n            Array.from(document.querySelectorAll('.twenties')).forEach((el) => el.classList.remove('year-selected'));\n            document.getElementById('select-all-twenties').innerHTML = 'Select All';\n        } else {\n            setSelectedList(selectedList.filter(year => year !== item));\n            document.getElementById(item).classList.remove(\"year-selected\");\n            if (document.getElementById(item).classList.contains('aughts')) {\n                document.getElementById('select-all-aughts').classList.remove(\"year-selected\");\n                document.getElementById('select-all-aughts').innerHTML = 'Select All';\n            } else if (document.getElementById(item).classList.contains('teens')) {\n                document.getElementById('select-all-teens').classList.remove(\"year-selected\");\n                document.getElementById('select-all-teens').innerHTML = 'Select All';\n            } else if (document.getElementById(item).classList.contains('twenties')) {\n                document.getElementById('select-all-twenties').classList.remove(\"year-selected\");\n                document.getElementById('select-all-twenties').innerHTML = 'Select All';\n            }\n        }\n\t\t\n    }\n\n    function toggleCalendar() {\n        setCount(1);\n        setIsOpen(!isOpen);\n    }\n\n    function handleLabelClick(event) {\n        if (event.target !== event.currentTarget) {\n        } else {\n            toggleCalendar();\n        }\n    }\n\n    const disableYears = () => {\n        let years = $('.year').map(function(_, x) {return x.id; }).get();\n        let filteredAlbums = props.albums.map(album => album);\n        let aughtsDefault = ['2000', '2001', '2002', '2003', '2004', '2005', '2006', '2007', '2008', '2009'];\n        let teensDefault = ['2010', '2011', '2012', '2013', '2014', '2015', '2016', '2017', '2018', '2019'];\n        let twentiesDefault = ['2020', '2021', '2022'];\n\n        if (props.artistFilter.length > 0) {\n            props.albums.forEach(album => {\n                if (Array.isArray(album.attributes.artistName)) {\n                  if (album.attributes.artistName.some(artist => props.artistFilter.includes(artist)) === false) {\n                    filteredAlbums.splice(filteredAlbums.findIndex(filterAlbum => filterAlbum === album), 1);\n                  } \n                } else {\n                  if ((props.artistFilter.some(artist => artist === album.attributes.artistName)) === false) {\n                    filteredAlbums.splice(filteredAlbums.findIndex(filterAlbum => filterAlbum === album), 1);\n                  }\n                }\n            });\n        }\n\n        if (props.typeFilter && props.typeFilter.length > 0) {\n            let typeAlbums = props.albums.filter(album => props.typeFilter.includes(album.type));\n            filteredAlbums = filteredAlbums.filter(album => typeAlbums.includes(album));\n            console.log(filteredAlbums);\n        }\n\n        const albumYears = filteredAlbums.map(album => album.attributes.releaseDate.split('-')[0]);\n        const uniqueYears = [...new Set(albumYears)];\n        const yearsNotInData = years.filter(year => !uniqueYears.includes(year));\n        years.forEach(year => {\n            uniqueYears.includes(year) ? document.getElementById(year).disabled = false : document.getElementById(year).disabled = true;\n        });\n        \n        let aughtsFiltered = aughtsDefault.filter(year => uniqueYears.includes(year));\n        setAughts(aughtsFiltered);\n        let teensFiltered = teensDefault.filter(year => uniqueYears.includes(year));\n        setTeens(teensFiltered);\n        let twentiesFiltered = twentiesDefault.filter(year => uniqueYears.includes(year));\n        setTwenties(twentiesFiltered);\n\n        if (aughts.every(year => document.getElementById(year).disabled) || aughts.length === 0) {\n            document.getElementById('select-all-aughts').disabled = true;\n        }\n        if (twenties.some(year => document.getElementById(year).disabled === false) || twenties.length === 0) {\n            document.getElementById('select-all-aughts').disabled = false;\n        }\n        if (teens.every(year => document.getElementById(year).disabled) || teens.length === 0) {\n            document.getElementById('select-all-teens').disabled = true;\n        }\n        if (twenties.some(year => document.getElementById(year).disabled === false) || twenties.length === 0) {\n            document.getElementById('select-all-teens').disabled = false;\n        }\n        if (twenties.every(year => document.getElementById(year).disabled) || twenties.length === 0) {\n            document.getElementById('select-all-twenties').disabled = true;\n        }\n        if (twenties.some(year => document.getElementById(year).disabled === false) || twenties.length === 0) {\n            document.getElementById('select-all-twenties').disabled = false;\n        }\n\n        if (document.getElementById('select-all-aughts').classList.contains('year-selected')) {\n            let pushedArray = aughtsDefault.filter(year => uniqueYears.includes(year)).filter(year => !selectedList.includes(year));\n            console.log(pushedArray);\n            setSelectedList([...selectedList, ...pushedArray]);\n        }\n        if (document.getElementById('select-all-teens').classList.contains('year-selected')) {\n            let pushedArray = teensDefault.filter(year => uniqueYears.includes(year)).filter(year => !selectedList.includes(year));\n            console.log(pushedArray);\n            setSelectedList([...selectedList, ...pushedArray]);\n        }\n        if (document.getElementById('select-all-twenties').classList.contains('year-selected')) {\n            let pushedArray = twentiesDefault.filter(year => uniqueYears.includes(year)).filter(year => !selectedList.includes(year));\n            console.log(pushedArray);\n            setSelectedList([...selectedList, ...pushedArray]);\n        }\n    }\n\n\n    return (\n        <div ref={calendarRef} id={props.id}>\n            <div className='year-filter-container' id={`${props.id}-container`} >\n                <div className='chip-wrapper' onClick={handleLabelClick}>\n                    {renderSelectedList()}\n                </div>\n            </div>\n            <div className='calendar-wrapper display' id={props.filterId}>\n                <Carousal>\n                    <CarousalItem>\n                        <div className='years-wrapper'>\n                            <button className='year aughts first-year' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2000'>2000</button>\n                            <button className='year aughts' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2001'>2001</button>\n                            <button className='year aughts' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2002' >2002</button>\n                            <button className='year aughts' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2003' >2003</button>\n                            <button className='year aughts' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2004' >2004</button>\n                            <button className='year aughts' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2005' >2005</button>\n                            <button className='year aughts' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2006' >2006</button>\n                            <button className='year aughts' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2007' >2007</button>\n                            <button className='year aughts' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2008' >2008</button>\n                            <button className='year aughts' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2009' >2009</button>\n                            <button className='select-all aughts' id='select-all-aughts' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectDecade} >Select All</button>\n                        </div>\n                    </CarousalItem>\n                    <CarousalItem>\n                        <div className='years-wrapper'>\n                            <button className='year teens first-year' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2010'>2010</button>\n                            <button className='year teens' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2011'>2011</button>\n                            <button className='year teens' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2012' >2012</button>\n                            <button className='year teens' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2013' >2013</button>\n                            <button className='year teens' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2014' >2014</button>\n                            <button className='year teens' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2015' >2015</button>\n                            <button className='year teens' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2016' >2016</button>\n                            <button className='year teens' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2017' >2017</button>\n                            <button className='year teens' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2018' >2018</button>\n                            <button className='year teens' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2019' >2019</button>\n                            <button className='select-all teens' id='select-all-teens' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectDecade} >Select All</button>\n                        </div>\n                    </CarousalItem>\n                    <CarousalItem>\n                        <div className='years-wrapper'>\n                            <button className='year twenties first-year' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2020'>2020</button>\n                            <button className='year twenties' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2021'>2021</button>\n                            <button className='year twenties' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2022' >2022</button>\n                            <button className='year twenties' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2023' >2023</button>\n                            <button className='year twenties' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2024' >2024</button>\n                            <button className='year twenties' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2025' >2025</button>\n                            <button className='year twenties' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2026' >2026</button>\n                            <button className='year twenties' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2027' >2027</button>\n                            <button className='year twenties' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2028' >2028</button>\n                            <button className='year twenties' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectYear} id='2029' >2029</button>\n                            <button className='select-all twenties' id='select-all-twenties' onMouseEnter={yearHover} onMouseLeave={yearHoverLeave} onClick={selectDecade} >Select All</button>\n                        </div>\n                    </CarousalItem>\n                </Carousal>                 \n            </div>           \n        </div>\n    )\n}","import React, { useEffect } from \"react\";\nimport './Header.css';\nimport logo from '../../Images/rankabl-logo.png';\nimport { Link } from \"react-router-dom\";\n\nconst Header = (props) => {\n    useEffect(() => {\n        if (window.location.pathname === '/') {\n            document.getElementById('rank').classList.add('active');\n        }\n        if (window.location.pathname === '/rankings') {\n            document.getElementById('rankings').classList.add('active');\n        }\n    }, [])\n\n    return (\n        <header className=\"header\">\n            <div className=\"header-logo\">\n                <img src={logo} alt='rankabl-logo' className='logo' />\n                <h1 className=\"brand\">rankabl</h1>\n            </div>\n            <div className=\"nav-container\">\n                <nav className=\"nav\">\n                    <ul className=\"nav-list\">\n                        <li className=\"nav-item\" id='rank'>\n                            <Link to={`/${(props.artistFilter && props.artistFilter.length > 0 && props.yearFilter && props.yearFilter > 0) ? '?artist=' + props.artistFilter.join('%2C') + '&years=' + props.yearFilter.join('%2C') : (props.artistFilter && props.artistFilter.length > 0) ? '?artist=' + props.artistFilter.join('%2C') : (props.yearFilter && props.yearFilter.length > 0) ? '?years=' + props.yearFilter.join('%2C') : ''}`}>RANK</Link>\n                        </li>\n                        <li className=\"nav-item\" id='rankings'>\n                            <Link to={props.headerParams ? '/rankings' + '?' + props.headerParams.toString() : '/rankings' }>RANKINGS</Link>\n                        </li>\n                    </ul>\n                </nav>\n            </div>\n        </header>\n    );\n}\n\nexport default Header;","import React, { useEffect, useRef, useState } from \"react\";\nimport './RankingFilter.css';\nimport $ from 'jquery';\nimport { ExpandMoreRounded } from \"@mui/icons-material\";\nimport { ThemeProvider } from \"@mui/system\";\nimport { theme } from '../MuiTheme/Theme';\nimport { Slider } from \"@mui/material\";\nimport { RadioGroup } from \"@mui/material\";\nimport {FormControl} from \"@mui/material\";\nimport {FormControlLabel} from \"@mui/material\";\nimport {FormLabel} from \"@mui/material\";\nimport { Radio } from \"@mui/material\";\n\nexport const RankingFilter = (props) => {\n    let [selectedList, setSelectedList] = useState([]);\n    let [isOpen, setIsOpen] = useState(false);\n    let [count, setCount] = useState(0);\n    let [sliderValue, setSliderValue] = useState();\n    let [aughts, setAughts] = useState(['2000', '2001', '2002', '2003', '2004', '2005', '2006', '2007', '2008', '2009']);\n    let [teens, setTeens] = useState(['2010', '2011', '2012', '2013', '2014', '2015', '2016', '2017', '2018', '2019']);\n    let [twenties, setTwenties] = useState(['2020', '2021', '2022']);\n    \n    useEffect(() => {\n        if (count > 0) {\n            document.getElementById(props.filterId).classList.toggle('display');\n        }\n    }, [isOpen]);\n\n    useEffect(() => {\n        if (props.albums.length > 0) {\n            setSliderValue(props.albums.length);\n        }\n    }, [props.albums]);\n\n    let calendarRef= useRef();\n\n    useEffect(() => {\n        let handler = (event) => {\n            if (!calendarRef.current.contains(event.target)) {\n                document.getElementById(props.filterId).classList.add('display');\n            }\n        };\n\n        document.addEventListener('mousedown', handler);\n\n        return () => {\n            document.removeEventListener('mousedown', handler);\n        };\n    });\n\n    useEffect(() => {\n        // props.onChange(selectedList);\n    }, [selectedList]);\n\n\n    let searchParams = new URLSearchParams(window.location.search);\n\n    \n    function renderSelectedList() { \n        let chipValue; \n        let sliderValues = [10, 20, 50, 100, 200]\n        if (sliderValues.some(value => value === sliderValue)) {\n            return (\n                <div className='chip-container'>\n                    <span className='chip-ranking'>\n                        {`Top ${sliderValue}`} <img\n                        className=\"icon_cancel closeIcon\" \n                        alt='Cancel icon'\n                        src=\"data:image/svg+xml,%3Csvg%20height%3D%22512px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20width%3D%22512px%22%20xml%3Aspace%3D%22preserve%22%20%20%20%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20%20%20%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%20%20%20%20%3Cstyle%20type%3D%22text%2Fcss%22%3E%20%20%20%20%20%20%20%20.st0%7B%20%20%20%20%20%20%20%20%20%20%20%20fill%3A%23fff%3B%20%20%20%20%20%20%20%20%7D%20%3C%2Fstyle%3E%20%20%20%20%3Cpath%20class%3D%22st0%22%20d%3D%22M443.6%2C387.1L312.4%2C255.4l131.5-130c5.4-5.4%2C5.4-14.2%2C0-19.6l-37.4-37.6c-2.6-2.6-6.1-4-9.8-4c-3.7%2C0-7.2%2C1.5-9.8%2C4%20%20L256%2C197.8L124.9%2C68.3c-2.6-2.6-6.1-4-9.8-4c-3.7%2C0-7.2%2C1.5-9.8%2C4L68%2C105.9c-5.4%2C5.4-5.4%2C14.2%2C0%2C19.6l131.5%2C130L68.4%2C387.1%20%20c-2.6%2C2.6-4.1%2C6.1-4.1%2C9.8c0%2C3.7%2C1.4%2C7.2%2C4.1%2C9.8l37.4%2C37.6c2.7%2C2.7%2C6.2%2C4.1%2C9.8%2C4.1c3.5%2C0%2C7.1-1.3%2C9.8-4.1L256%2C313.1l130.7%2C131.1%20%20c2.7%2C2.7%2C6.2%2C4.1%2C9.8%2C4.1c3.5%2C0%2C7.1-1.3%2C9.8-4.1l37.4-37.6c2.6-2.6%2C4.1-6.1%2C4.1-9.8C447.7%2C393.2%2C446.2%2C389.7%2C443.6%2C387.1z%22%2F%3E%3C%2Fsvg%3E\" \n                        onClick={() => onRemoveSelectedItem(chipValue)}>\n                        </img>\n                    </span>\n                    <ThemeProvider theme={theme}>\n                        <ExpandMoreRounded color=\"primary\" baseClassName=\"icon\" id={`${props.id}-icon-chip`} onClick={toggleSlider}/>\n                    </ThemeProvider>\n                </div>\n            );\n        } else {\n            return (\n                <div className='placeholder' onClick={toggleSlider} >\n                    <p className='placeholder-text'>Ranking</p>\n                    <ThemeProvider theme={theme}>\n                        <ExpandMoreRounded color=\"primary\" baseClassName=\"icon\" id={`${props.id}-icon`}/>\n                    </ThemeProvider>\n                </div>\n            )\n        }\n    }\n\n    \n    function onRemoveSelectedItem(item) {\n        if (item === \"2000's\") {\n            setSelectedList(selectedList.filter(year => !aughts.includes(year)))\n            Array.from(document.querySelectorAll('.aughts')).forEach((el) => el.classList.remove('year-selected'));\n            document.getElementById('select-all-aughts').innerHTML = 'Select All';\n        } else if (item === \"2010's\") {\n            setSelectedList(selectedList.filter(year => !teens.includes(year)))\n            Array.from(document.querySelectorAll('.teens')).forEach((el) => el.classList.remove('year-selected'));\n            document.getElementById('select-all-teens').innerHTML = 'Select All';\n        } else if (item === \"2020's\") {\n            setSelectedList(selectedList.filter(year => !twenties.includes(year)))\n            Array.from(document.querySelectorAll('.twenties')).forEach((el) => el.classList.remove('year-selected'));\n            document.getElementById('select-all-twenties').innerHTML = 'Select All';\n        } else {\n            setSelectedList(selectedList.filter(year => year !== item));\n            document.getElementById(item).classList.remove(\"year-selected\");\n            if (document.getElementById(item).classList.contains('aughts')) {\n                document.getElementById('select-all-aughts').classList.remove(\"year-selected\");\n                document.getElementById('select-all-aughts').innerHTML = 'Select All';\n            } else if (document.getElementById(item).classList.contains('teens')) {\n                document.getElementById('select-all-teens').classList.remove(\"year-selected\");\n                document.getElementById('select-all-teens').innerHTML = 'Select All';\n            } else if (document.getElementById(item).classList.contains('twenties')) {\n                document.getElementById('select-all-twenties').classList.remove(\"year-selected\");\n                document.getElementById('select-all-twenties').innerHTML = 'Select All';\n            }\n        }\n\t\t\n    }\n\n    function toggleSlider() {\n        setCount(1);\n        setIsOpen(!isOpen);\n    }\n\n    function handleLabelClick(event) {\n        if (event.target !== event.currentTarget) {\n        } else {\n            toggleSlider();\n        }\n    }\n\n    const sliderValueChange = (event, newValue) => {\n        setSliderValue(newValue);\n        props.filterRanking(newValue);\n    }\n    \n\n    const sliderMarks = [{value: 10, label: '10'}, {value: 20, label: '20'}, {value: props.albums.length, label: 'All'}];\n\n    return (\n        <div ref={calendarRef} id={props.id}>\n            <div className='ranking-filter-container' id='ranking-filter-container' >\n                <div className='chip-wrapper' onClick={handleLabelClick}>\n                    {renderSelectedList()}\n                </div>\n            </div>\n            <div className='ranking-slider display' id={props.filterId}>\n                <ThemeProvider theme={theme}>\n                    <FormControl>\n                        <RadioGroup row defaultValue=\"global\" color='primary'>\n                            <FormControlLabel value=\"global\" control={<Radio color='secondary' size='small'/>} label=\"Global\" sx={{color: '#cfcfcf', marginRight: '24px'}}/>\n                            <FormControlLabel value=\"personal\" control={<Radio color='secondary' size='small' id='radio-personal' />} label=\"Personal\" sx={{color: '#cfcfcf'}}/>\n                        </RadioGroup>\n                    </FormControl>\n                    <Slider \n                    color=\"secondary\"\n                    marks={sliderMarks}\n                    step={null}\n                    defaultValue={48}\n                    max={props.albums.length} \n                    onChange={sliderValueChange}/>\n                    \n                </ThemeProvider>\n            </div>           \n        </div>\n    )\n}","import m4th from 'm4th';\n\nconst solveRanking = (results) => {\n    let formattedResults = [];\n    results.forEach(result => {\n        let newResult = {};\n        newResult[result.album1.id] = result.album1.result;\n        newResult[result.album2.id] = result.album2.result;\n        formattedResults.push(newResult);\n    });\n    console.log(formattedResults);\n    let ids = [];\n    for (let i = 0; i < formattedResults.length; i++) {\n        ids.push(Object.keys(formattedResults[i]))\n    };\n    console.log(ids);\n    let flatIds = ids.flat();\n    console.log(flatIds);\n    let uniqueIds = [...new Set(flatIds)];\n    console.log(uniqueIds);\n    let matrix = m4th.matrix(uniqueIds.length);\n    matrix = matrix.map(function(element){\n        return 0;\n      });\n    for (let i = 0; i < uniqueIds.length; i++) {\n        matrix.set(i, i, flatIds.filter(id => id === uniqueIds[i]).length + 2);\n        for (let j = i+1; j < uniqueIds.length; j++) {\n            let gameCount = matrix.get(i, j) || 0;\n            for (let k = 0; k < formattedResults.length; k++) {\n                if (uniqueIds[i] in formattedResults[k] && uniqueIds[j] in formattedResults[k]) {\n                    matrix.set(i, j, gameCount-1);\n                    matrix.set(j, i, gameCount-1);\n                }\n            }\n        }\n    }\n    console.log(matrix);\n    let ratings = [];\n    for (let i = 0; i < uniqueIds.length; i++) {\n        let albumWL = [];\n        for (let j = 0; j < formattedResults.length; j++) {\n            if (uniqueIds[i] in formattedResults[j]) {\n                albumWL.push(formattedResults[j][uniqueIds[i]])\n            }\n        };\n        let albumRating = 1 + 0.5 * (albumWL.reduce((previousValue, currentValue) => previousValue + currentValue,\n        0));\n        ratings.push(albumRating);\n    }\n    let y = m4th.matrix(uniqueIds.length, ratings);\n    const solution = m4th.lu(matrix).solve(y);\n    const rankings = [];\n    for (let i = 0; i < uniqueIds.length; i++) {\n        rankings.push({\n            albumId: uniqueIds[i],\n            rating: solution.array[i]\n        })\n    };\n    const sortedRankings = rankings.sort((a, b) => b.rating - a.rating);\n    return sortedRankings;\n}\n\nexport default solveRanking;","import './Rank.css';\nimport AlbumContainer from '../AlbumContainer/AlbumContainer';\nimport React, { useState, useEffect } from 'react';\nimport ArtistFilter from '../ArtistFilter/ArtistFilter';\nimport { YearFilter } from '../YearFilter/YearFilter';\nimport axios from 'axios';\nimport jsCookie from 'js-cookie';\nimport uuid from 'uuid';\nimport Header from '../Header/Header';\nimport { RankingFilter } from '../RankingFilter/RankingFilter';\nimport solveRanking from '../../util/solveRanking';\nimport { Button } from '@mui/material';\nimport { FilterAltRounded } from '@mui/icons-material';\nimport { ThemeProvider } from '@mui/system';\nimport { theme, filterTheme } from '../MuiTheme/Theme';\nimport { IconButton } from '@mui/material';\nimport { CloseRounded } from '@mui/icons-material';\n\nconst App = () => {\n\n  let [artistFilter, setArtistFilter] = useState([]);\n  let [yearFilter, setYearFilter] = useState([]);\n  let [rankingFilterValue, setRankingFilterValue] = useState(0);\n  let [allAlbums, setAllAlbums] = useState([]);\n  let [availableAlbums, setAvailableAlbums] = useState([]);\n  let [loadedAlbums, setLoadedAlbums] = useState(false);\n  let [filtersEnabled, setFiltersEnabled] = useState(false);\n  let [userId, setUserId] = useState('');\n  let [userData, setUserData] = useState({ _id: '', userId: '', results: [], seenPairs: [] });\n  let [loadedUserData, setLoadedUserData] = useState(false);\n  let [artistParams, setArtistParams] = useState('');\n  let [resultsGlobal, setResultsGlobal] = useState([]);\n  let [resultsUser, setResultsUser] = useState([]);\n  let [rankingGlobal, setRankingGlobal] = useState([]);\n  let [rankingUser, setRankingUser] = useState([]);\n  let [filterButtonColor, setFilterButtonColor] = useState('primary');\n\n  useEffect(() => {\n    getUserId();\n    fetchAlbums();\n    fetchResults();\n    setArtistParams(splitArtistParams());\n  }, []) \n\n  useEffect(() => {\n    if (userId !== '') {\n      getUserData();\n    }\n  }, [userId]);\n\n  useEffect(() => {\n    if (resultsGlobal.length > 0) {\n        setRankingGlobal(solveRanking(resultsGlobal));\n    }\n  }, [resultsGlobal]);\n\n  useEffect(() => {\n    if (resultsUser.length > 0) {\n        setRankingUser(solveRanking(resultsUser));\n    }\n  }, [resultsUser]);\n\n  useEffect(() => {\n    filterAlbums();\n    if (artistFilter.length > 0 || yearFilter.length > 0 || rankingFilterValue !== allAlbums.length) {\n      setFiltersEnabled(true);\n    } else {\n      setFiltersEnabled(false);\n    }\n    if (artistFilter.length === 0) {\n      searchParams.delete('artist');\n      var newRelativePathQuery = window.location.pathname + '?' + searchParams.toString();\n      window.history.pushState(null, '', newRelativePathQuery);\n    }\n    if (yearFilter.length === 0) {\n      searchParams.delete('years');\n      var newRelativePathQuery = window.location.pathname + '?' + searchParams.toString();\n      window.history.pushState(null, '', newRelativePathQuery);\n    }\n      \n  }, [artistFilter, yearFilter, rankingFilterValue]);\n\n  useEffect(() => {\n    filterAlbums();\n  }, [rankingFilterValue]);\n\n  useEffect(() => {\n    if (allAlbums.length > 0) {\n      setLoadedAlbums(true);\n      setArtistFilter(artistParams);\n      setRankingFilterValue(allAlbums.length);\n    }\n  }, [allAlbums])\n\n  useEffect(() => {\n    if (filtersEnabled) {\n      setFilterButtonColor('secondary');\n    } else {\n      setFilterButtonColor('primary');\n    }\n  }, [filtersEnabled])\n\n  let searchParams = new URLSearchParams(window.location.search);\n\n  const fetchAlbums = () => {\n    axios.get('https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/albums', {\n      params: {\n        \"verification_method\": \"SECRET_AS_QUERY_PARAM\",\n        \"secret\": \"temperature\"\n      }\n    })\n    .then(response => {\n      setAllAlbums(response.data);\n      setAvailableAlbums(response.data);\n    })\n    .catch(err => {\n      console.log(err);\n    });\n  }\n\n  const getUserId = () => {\n    if (!jsCookie.get('user')) {\n      jsCookie.set('user', uuid.v4(), { expires: 10000 });\n      setUserId(jsCookie.get('user'));\n    } else {\n      setUserId(jsCookie.get('user'));\n    }\n  }\n\n  const getUserData = () => {\n    if (userId !== '') {\n      axios.get('https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/getuser', {\n        params: {\n          userId: userId\n        }\n      }).then (response => {\n        if (response.data !== null) {\n        setUserData(response.data);\n        setLoadedUserData(true);\n        setResultsUser(response.data.results);\n        } else {\n          setLoadedUserData(true);\n        }\n      })\n    }\n  }\n\n  const fetchResults = () => {\n    axios.get('https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/getResults', {\n    })\n    .then(response => {\n        setResultsGlobal(response.data);\n    })\n    .catch(err => {\n        console.log(err);\n     });\n}\n\n  const splitArtistParams = () => {\n    let artistParams = searchParams.get('artist');\n    if (artistParams !== null) {\n        let artistArray = artistParams.split(',');\n        console.log('filter set from params');\n        return artistArray;\n    } else {\n        return [];\n    }\n  }\n\n  const filterAlbums = () => {\n    console.log(rankingFilterValue);\n    if (artistFilter.length === 0 && yearFilter.length === 0 && rankingFilterValue === allAlbums.length) {\n      setAvailableAlbums(allAlbums);\n    } else {\n      let filteredAlbums = allAlbums.map(album => album);\n      if (artistFilter.length > 0) {\n        allAlbums.forEach(album => {\n            if (Array.isArray(album.attributes.artistName)) {\n              if (album.attributes.artistName.some(artist => artistFilter.includes(artist)) === false) {\n                filteredAlbums.splice(filteredAlbums.findIndex(filterAlbum => filterAlbum === album), 1);\n              } \n            } else {\n              if ((artistFilter.some(artist => artist === album.attributes.artistName)) === false) {\n                filteredAlbums.splice(filteredAlbums.findIndex(filterAlbum => filterAlbum === album), 1);\n              }\n            }\n          });\n          searchParams.set('artist', artistFilter);\n          var newRelativePathQuery = window.location.pathname + '?' + searchParams.toString();\n          window.history.pushState(null, '', newRelativePathQuery);\n      }\n      if (yearFilter.length > 0) {\n        filteredAlbums = filteredAlbums.filter(album => yearFilter.some(year => album.attributes.releaseDate.includes(year)));\n        searchParams.set('years', yearFilter);\n        var newRelativePathQuery = window.location.pathname + '?' + searchParams.toString();\n        window.history.pushState(null, '', newRelativePathQuery);\n      }\n      if (rankingGlobal.length > 0 && rankingFilterValue < allAlbums.length) {\n        const rankingFilterAlbums = rankingGlobal.map(album => album.albumId).slice(0, rankingFilterValue);\n        console.log(rankingFilterAlbums);\n        filteredAlbums = filteredAlbums.filter(album => rankingFilterAlbums.includes(album.id));\n        console.log(filteredAlbums);\n      }\n      setAvailableAlbums(filteredAlbums);   \n    }\n  }\n\n  const filterArtist = (selectedList) => {\n    const artistFilter = selectedList.map(artist => artist.name);\n    setArtistFilter(artistFilter);\n  }\n\n  const filterYear = (selectedList) => {\n    setYearFilter(selectedList);\n  }\n\n  const filterRanking = (value) => {\n    setRankingFilterValue(value);\n  }\n\n  const openFilterDrawer = () => {\n    document.getElementById('filter-drawer').style.top = '0';\n    document.getElementById('rank-page-container').style.overflow = 'hidden';\n  }\n\n  const closeFilterDrawer = () => {\n    document.getElementById('filter-drawer').style.top = '100%';\n    document.getElementById('rank-page-container').style.overflow = 'auto';\n  }\n\n  const clearFilters = () => {\n    setArtistFilter([]);\n    setYearFilter([]);\n    setRankingFilterValue(allAlbums.length);\n  }\n\n  return (\n    <div classNyarn run deployame=\"page-container\" id=\"rank-page-container\">\n      <Header headerParams={searchParams}/>\n      <div className=\"container\">\n        <div className=\"Rank\">\n          <div className='filters'>\n            <ArtistFilter id='artist-filter' onSelect={filterArtist} onRemove={filterArtist} albums={allAlbums} queryParams={artistFilter} yearFilter={yearFilter}/>\n            <YearFilter id='year-filter' filterId='calendar' onChange={filterYear} albums={allAlbums} artistFilter={artistFilter} />\n            <RankingFilter id='ranking-filter' filterId='ranking-slider' albums={allAlbums} filterRanking={filterRanking}/>\n            <ThemeProvider theme={filterTheme}>\n              <Button id='filter-button' onClick={openFilterDrawer} variant=\"outlined\" color={filterButtonColor} size=\"small\" sx={{ textTransform: \"none\", borderRadius: \"15px\" }}endIcon={<FilterAltRounded size=\"small\" />}>\n                Filters\n              </Button>\n            </ThemeProvider>\n          </div>\n          <AlbumContainer albums={availableAlbums} albumsLoaded={loadedAlbums} filters={filtersEnabled} userId={userId} seenPairs={userData.seenPairs} loadedUserData={loadedUserData}/>\n        </div>\n      </div>\n      <div className=\"filter-drawer\" id=\"filter-drawer\">\n        <div className=\"filter-drawer-content\">\n          <div className=\"filter-drawer-header\">\n            <div></div>\n            <div className=\"filter-drawer-header-title\">\n              Filters\n            </div>\n            <ThemeProvider theme={theme}>\n              <IconButton color='primary' size=\"large\" onClick={closeFilterDrawer}>\n                <CloseRounded fontSize=\"inherit\"/>\n              </IconButton>\n            </ThemeProvider>\n          </div>\n          <hr/>\n          <div className=\"filter-drawer-body\">\n            <ArtistFilter id='artist-filter-drawer' onSelect={filterArtist} onRemove={filterArtist} albums={allAlbums} queryParams={artistFilter} yearFilter={yearFilter}/>\n            <YearFilter id='year-filter-drawer' filterId='calendar-drawer' onChange={filterYear} albums={allAlbums} artistFilter={artistFilter} />\n            <RankingFilter id='ranking-filter-drawer' filterId='ranking-slider-drawer' albums={allAlbums} filterRanking={filterRanking}/>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React, { useState } from \"react\";\nimport './TableRowCarousel.css';\n\n\n\nexport const CarouselItem = ({children, width}) => {\n    return (\n        <div className=\"carousal-item\" style={{width: width}}>\n            {children}\n        </div>\n    );\n}\n\nexport const Carousel = ({children}) => {\n    const [activeIndex, setActiveIndex] = useState(0);\n    \n    const updateIndex = (newIndex) => {\n        setActiveIndex(newIndex);\n    }\n\n    return (\n        <div className=\"carousel\">\n            <div className=\"inner\" style={{ transform: `translateX(-${activeIndex * 100}%)` }}>\n                {React.Children.map(children, (child, index) => {\n                    return React.cloneElement(child, {width: \"100%\" });\n                })}\n            </div>\n            <div className='carousel-dots'>\n                    <div className={`dot ${ activeIndex === 0 ? 'active' : ''}`} id='dot-0' onClick={() => updateIndex(0)}></div>\n                    <div className={`dot ${ activeIndex === 1 ? 'active' : ''}`} id='dot-1' onClick={() => updateIndex(1)}></div>\n            </div>\n        </div>\n    );\n}","import React, { useState } from \"react\";\nimport './MobileTableRowCarousel.css';\nimport { useSwipeable } from \"react-swipeable\";\n\n\nexport const MobileCarouselItem = ({children, width}) => {\n    return (\n        <div className=\"mobile-carousal-item\" style={{width: width}}>\n            {children}\n        </div>\n    );\n}\n\nexport const MobileCarousel = ({children}) => {\n    const [activeIndex, setActiveIndex] = useState(0);\n    \n    const updateIndex = (newIndex) => {\n        setActiveIndex(newIndex);\n    }\n\n    const handlers = useSwipeable({\n        onSwipedLeft: () => {activeIndex !== React.Children.count(children) - 1 && updateIndex(activeIndex + 1)},\n        onSwipedRight: () => {activeIndex !== 0 && updateIndex(activeIndex - 1)},\n        preventDefaultTouchmoveEvent: true,\n        preventScrollOnSwipe: true\n    });\n\n\n    return (\n        <div {...handlers} className=\"mobile-carousel\">\n            <div className=\"mobile-inner\" style={{ transform: `translateX(-${activeIndex * 100}%)` }}>\n                {React.Children.map(children, (child, index) => {\n                    return React.cloneElement(child, {width: \"100%\" });\n                })}\n            </div>\n            <div className='mobile-carousel-dots'>\n                {React.Children.map(children, (child, index) => {\n                    return (\n                    <div className={`mobile-dot ${ activeIndex === index ? 'active' : ''}`} id={`dot-${index}`} onClick={() => updateIndex(index)}></div>\n                    );\n                })}\n            </div>\n        </div>\n    );\n}","import React, { useState, useEffect } from \"react\";\nimport './TableRow.css';\nimport moment from \"moment\";\nimport newShade from \"../../util/newShade\";\nimport { Carousel, CarouselItem } from \"./TableRowCarousel.js\";\nimport { MobileCarousel, MobileCarouselItem } from \"./MobileTableRowCarousel.js\";\nimport { ExpandMoreRounded } from \"@mui/icons-material\";\n\nconst TableRow = (props) => {\n    let [style, setStyle] = useState({});\n\n    const formatDate = (date) => {\n    return moment(date).format('MMMM Do, YYYY');\n    }\n\n    useEffect(() => {\n        if (props.album) {\n            if (props.album.attributes.editorialNotes && document.getElementById('editorial-notes-' + props.rank) !== null) {\n                document.getElementById('editorial-notes-' + props.rank).innerHTML = props.album.attributes.editorialNotes.standard;\n            }\n            setStyle({\n                '--bg-color': '#' + props.album.attributes.artwork.bgColor, \n                '--text-color-1': '#' + props.album.attributes.artwork.textColor1, \n                '--text-color-2': '#' + props.album.attributes.artwork.textColor2, \n                '--text-color-3': '#' + props.album.attributes.artwork.textColor3, \n                '--text-color-4': '#' + props.album.attributes.artwork.textColor4,\n                '--shadow': '#' + props.album.attributes.artwork.textColor4 + '25',\n                '--shadow-hover': '#' + props.album.attributes.artwork.textColor4 + '80',\n                '--bg-gradient': '#' + newShade(props.album.attributes.artwork.bgColor, 4),\n            });\n        }\n    }, [props.album]);\n\n    const getArtistName = () => {\n        if (Array.isArray(props.album.attributes.artistName)) {\n          return props.album.attributes.artistName.join(' & ');\n        } else {\n          return props.album.attributes.artistName;\n        }\n    }\n\n    const replaceUrl = (url) => {\n        let coverArtUrl = url.replace('{w}', '600').replace('{h}', '600')\n        return coverArtUrl;\n      }\n\n    const expandTableRow = () => {\n        if (window.screen.width > 500 && document.getElementById(`table-row-${props.rank}`).classList.contains('closed')) {\n            setTimeout(() => {\n                document.getElementById(`table-row-${props.rank}`).scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n            }, 300);\n            document.getElementById(`chevron ${props.rank}`).style.transform = 'rotate(180deg)';\n            document.getElementById(`chevron ${props.rank}`).style.visibility = 'visible';\n            document.getElementById(`more ${props.rank}`).style.visibility = 'visible';\n            document.getElementById(`table-row-${props.rank}`).classList.remove('closed');\n            document.getElementById(`table-row-${props.rank}`).classList.add('open');\n            props.isExpanded(props.rank);\n        } else if (window.screen.width > 500) {\n            document.getElementById(`chevron ${props.rank}`).style.transform = 'rotate(0deg)';\n            document.getElementById(`more ${props.rank}`).style.visibility = '';\n            document.getElementById(`chevron ${props.rank}`).style.visibility = '';\n            document.getElementById(`table-row-${props.rank}`).classList.remove('open');\n            document.getElementById(`table-row-${props.rank}`).classList.add('closed');\n            props.isExpanded('')\n        }  else if (window.screen.width <= 500 && document.getElementById(`table-row-${props.rank}`).classList.contains('closed')) {\n            document.getElementById(`chevron ${props.rank}`).style.transform = 'rotate(180deg)';\n            document.getElementById(`table-row-${props.rank}`).classList.remove('closed');\n            document.getElementById(`table-row-${props.rank}`).classList.add('open');\n            props.isExpanded(props.rank)\n        } else if (window.screen.width <= 500) {\n            document.getElementById(`chevron ${props.rank}`).style.transform = 'rotate(0deg)';\n            document.getElementById(`table-row-${props.rank}`).classList.remove('open');\n            document.getElementById(`table-row-${props.rank}`).classList.add('closed');\n            props.isExpanded('')\n        }\n    }\n\n    const getOtherAlbums = (artistInput) => {\n        const sameArtist = [];\n        props.albums.forEach(album => {\n            if (Array.isArray(album.attributes.artistName)) {\n                if (album.attributes.artistName.some(artist => artist === artistInput)) {\n                    sameArtist.push(album);\n                  }\n            } else { \n                if (album.attributes.artistName === artistInput) {\n                    sameArtist.push(album);\n                }\n            }\n        });\n        props.albums.filter(album => album.attributes.artistName === artistInput);\n        const otherAlbums = sameArtist.filter(album => album.id !== props.album.id);\n        let rankings = [];\n        let globalIds = props.rankingGlobal.map(ranking => ranking.albumId);\n        let userIds = props.rankingUser.map(ranking => ranking.albumId);\n        if (props.selectedRanking === 'global') {\n            rankings = otherAlbums.filter(album => globalIds.includes(album.id)).map(album => {\n                return {\n                    album: album,\n                    ranking: props.rankingGlobal.findIndex(ranking => ranking.albumId === album.id) + 1\n                }\n            });\n        } else {\n            rankings = otherAlbums.filter(album => userIds.includes(album.id)).map(album => {\n                return {\n                    album: album,\n                    ranking: props.rankingUser.findIndex(ranking => ranking.albumId === album.id) + 1\n                }\n            });\n        }\n        const sortedAlbums = rankings.sort((a, b) => a.ranking - b.ranking);\n        return sortedAlbums;\n    }\n\n    const getAllArtistAlbums = (artistInput) => {\n        let sameArtist = [];\n        props.albums.forEach(album => {\n            if (Array.isArray(album.attributes.artistName)) {\n                if (album.attributes.artistName.some(artist => artist === artistInput)) {\n                    sameArtist.push(album);\n                  }\n            } else { \n                if (album.attributes.artistName === artistInput) {\n                    sameArtist.push(album);\n                }\n            }\n        });\n        let rankings = [];\n        let globalIds = props.rankingGlobal.map(ranking => ranking.albumId);\n        let userIds = props.rankingUser.map(ranking => ranking.albumId);\n        if (props.selectedRanking === 'global') {\n            rankings = sameArtist.filter(album => globalIds.includes(album.id)).map(album => {\n                return {\n                    album: album,\n                    ranking: props.rankingGlobal.findIndex(ranking => ranking.albumId === album.id) + 1\n                }\n            });\n        } else {    \n            rankings = sameArtist.filter(album => userIds.includes(album.id)).map(album => {\n                return {\n                    album: album,\n                    ranking: props.rankingUser.findIndex(ranking => ranking.albumId === album.id) + 1\n                }\n            });\n        }\n        const sortedAlbums = rankings.sort((a, b) => a.ranking - b.ranking);\n        return sortedAlbums;\n    }\n\n    const renderOtherAlbums = (artistInput) => {\n        return getOtherAlbums(artistInput).map((album, index) => (\n            <div className='other-album' key={index}>\n                <div className='other-album-rank'>\n                    {album.ranking}\n                </div>\n                <img src={replaceUrl(album.album.attributes.artwork.url)} alt={album.album.attributes.name} className='other-album-image'/>\n                <p className='other-album-name'>{album.album.attributes.name}</p>\n            </div>\n        ))\n    };\n\n    const getRecentResults = () => {\n        let results = [];\n        if (props.selectedRanking === 'global') {\n            results = props.resultsGlobal\n        } else {\n            results = props.resultsUser\n        }\n        const filteredResults = results.filter(result => result.album1.id === props.album.id || result.album2.id === props.album.id);\n        let recentResults = [];\n        filteredResults.map(result => {\n            if (result.album1.id === props.album.id) {\n                recentResults.push({\n                    album: props.albums.find(album => album.id === result.album2.id),\n                    result: result.album2.result\n                });\n            } else if (result.album2.id === props.album.id) {\n                recentResults.push({\n                    album: props.albums.find(album => album.id === result.album1.id),\n                    result: result.album1.result\n                });\n            }\n        });\n        return recentResults.reverse().slice(0, 20);\n    }\n\n    const renderRecentResults = () => {\n        return getRecentResults().map((result, index) => (\n            <div className='recent-result' key={index}>\n                <div className='recent-result-outcome'>\n                    {result.result === -1 ? 'Win' : 'Loss'}\n                </div>\n                <img src={replaceUrl(result.album.attributes.artwork.url)} alt={result.album.attributes.name} className='recent-result-image'/>\n                <p className='recent-result-name'>{result.album.attributes.name}</p>\n            </div>\n        ))\n    }\n\n    const getArtistArtworkUrl = (artistInput) => { \n        if (props.artists.length > 0 && props.album && getAllArtistAlbums(artistInput).length > 0) {\n            return props.artists.find(artist => artist.attributes.name === artistInput).attributes.artwork.url.replace('{w}', '300').replace('{h}', '300');\n        }\n    }\n\n    /* const getWinLoss = () => {\n        let albumWL = [];\n        for (let i = 0; i < props.resultsGlobal.length; i++) {\n            if (props.album.id in formattedResults[i]) {\n                albumWL.push(formattedResults[j][uniqueIds[i]])\n            }\n        };\n    } */\n\n    if (props.album) {\n        return (\n            <div className=\"table-row closed\" id={`table-row-${props.rank}`} style={style} onClick={window.screen.width < 500 && expandTableRow}>\n                <div className=\"row-default\">\n                    <div className=\"table-cell\" id=\"rank-cell\">\n                        <div className='rank-container'>\n                            <p>{props.rank}</p>\n                        </div>\n                    </div>\n                    <div className=\"table-cell\" id=\"album-cell\">\n                        {props.album &&\n                        <div className=\"album-info\">\n                            <img src={replaceUrl(props.album.attributes.artwork.url)} alt=\"album artwork\" className=\"albumArtwork\"/>\n                            <div className=\"album-name-artist\">\n                                <div className=\"album-text\">\n                                    <p className=\"album-name-table\">{props.album.attributes.name}</p>\n                                    <p className=\"album-artist-table\">{getArtistName()}</p>\n                                </div>\n                            </div>\n                        </div>\n                        }\n                    </div>\n                    <div className=\"table-cell\" id=\"release-cell\">\n                        <p>{props.album && formatDate(props.album.attributes.releaseDate)}</p>\n                    </div>\n                    <div className=\"table-cell\" id=\"more-cell\">\n                        <button className='more' id={`more-button-${props.rank}`} onClick={window.screen.width > 500 && expandTableRow}><p className='button-text' id={`more ${props.rank}`}></p><ExpandMoreRounded size='small' id={`chevron ${props.rank}`}></ExpandMoreRounded></button>\n                    </div>\n                </div>\n                <div className=\"row-expanded\" id={`row-expanded-${props.rank}`}>\n                    { window.screen.width > 500 ?\n                    <div className='expanded-row-content'>\n                        <div className='album-info-expanded'>\n                            <div className='album-facts'>\n                                    <p className=\"label\">PROJECT TYPE:</p>\n                                    <p>{props.album && props.album.type}</p>\n                                    <p className=\"label\">GENRE:</p>\n                                    <p>{props.album && props.album.attributes.genreNames[0]}</p>\n                                    <p className=\"label\">TRACKS:</p>\n                                    <p>{props.album && props.album.attributes.trackCount}</p>\n                            </div>\n                            {props.album.attributes.editorialNotes && <div className='editorial-notes'>\n                                <p id='editorial-label'>EDITORIAL NOTES:</p>\n                                <p className='editorial-notes-standard' id={'editorial-notes-' + props.rank}></p>\n                            </div>}\n                        </div>\n                        <div className=\"recent-results\">\n                            <p className='label'>RECENT RESULTS:</p>\n                            <div className='recent-results-albums'>\n                                {renderRecentResults()}\n                            </div>\n                        </div>\n                        <div className='vl'></div>\n                        { !Array.isArray(props.album.attributes.artistName) ?\n                        <div className=\"artist\">\n                            <div className=\"artist-info\">\n                                <div className=\"artist-image-name\">\n                                    <img src={getArtistArtworkUrl(props.album.attributes.artistName)} alt=\"artist artwork\" className=\"artist-artwork\"/>\n                                    <p className='artist-name'>{props.album.attributes.artistName}</p>\n                                </div>\n                                <div className='artist-stats'>\n                                    <div className='artist-stats-labels'>\n                                        <p>{`Highest album rank: `}</p>\n                                        <p>{`Lowest album rank: `}</p>\n                                        <p>{`Average album rank: `}</p>\n                                    </div>\n                                    <div className='artist-stats-values'>\n                                        <p>{getAllArtistAlbums(props.album.attributes.artistName).length > 0 && `#${getAllArtistAlbums(props.album.attributes.artistName)[0].ranking}`}</p>\n                                        <p>{getAllArtistAlbums(props.album.attributes.artistName).length > 0 && `#${getAllArtistAlbums(props.album.attributes.artistName)[getAllArtistAlbums(props.album.attributes.artistName).length - 1].ranking}`}</p>\n                                        <p>{getAllArtistAlbums(props.album.attributes.artistName).length > 0 && `#${(getAllArtistAlbums(props.album.attributes.artistName).reduce((a, b) => a + b.ranking, 0 ) / getAllArtistAlbums(props.album.attributes.artistName).length).toFixed(1)}`}</p>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"other-albums-container\">\n                                <p className='label'>OTHER ALBUMS:</p>\n                                <div className=\"other-albums\">\n                                    {renderOtherAlbums(props.album.attributes.artistName)}\n                                </div>\n                            </div>\n                        </div>\n                        : <Carousel>\n                                {props.album.attributes.artistName.map((artist, index) => {\n                                    return <CarouselItem index={index}>\n                                        <div className=\"artist\">\n                                            <div className=\"artist-info\">\n                                                <img src={getArtistArtworkUrl(artist)} alt=\"artist artwork\" className=\"artist-artwork\"/>\n                                                <p className='artist-name'>{artist}</p>\n                                                <div className='artist-stats'>\n                                                    <div className='artist-stats-labels'>\n                                                        <p>{`Highest album rank: `}</p>\n                                                        <p>{`Lowest album rank: `}</p>\n                                                        <p>{`Average album rank: `}</p>\n                                                    </div>\n                                                    <div className='artist-stats-values'>\n                                                        <p>{getAllArtistAlbums(artist).length > 0 && `#${getAllArtistAlbums(artist)[0].ranking}`}</p>\n                                                        <p>{getAllArtistAlbums(artist).length > 0 && `#${getAllArtistAlbums(artist)[getAllArtistAlbums(artist).length - 1].ranking}`}</p>\n                                                        <p>{getAllArtistAlbums(artist).length > 0 && `#${(getAllArtistAlbums(artist).reduce((a, b) => a + b.ranking, 0 ) / getAllArtistAlbums(artist).length).toFixed(1)}`}</p>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <div className=\"other-albums-container\">\n                                                <p className='label'>OTHER ALBUMS:</p>\n                                                <div className=\"other-albums\">\n                                                    {renderOtherAlbums(artist)}\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </CarouselItem> }\n                                )}\n                        </Carousel> }\n                    </div> :\n                    <div className='expanded-row-content'>\n                        <MobileCarousel>\n                            <MobileCarouselItem>\n                                <div className='album-carousel'>\n                                    <div className='album-info-expanded'>\n                                        <div className='album-facts'>\n                                                <p className=\"label\">PROJECT TYPE:</p>\n                                                <p>{props.album && props.album.type}</p>\n                                                <p className=\"label\">GENRE:</p>\n                                                <p>{props.album && props.album.attributes.genreNames[0]}</p>\n                                                <p className=\"label\">TRACKS:</p>\n                                                <p>{props.album && props.album.attributes.trackCount}</p>\n                                                <p className =\"label\">RELEASE DATE:</p>\n                                                <p>{props.album && formatDate(props.album.attributes.releaseDate)}</p>\n                                        </div>\n                                    </div>\n                                    <div className=\"recent-results\">\n                                        <p className='label'>RECENT RESULTS:</p>\n                                        <div className='recent-results-albums'>\n                                            {renderRecentResults()}\n                                        </div>\n                                    </div>\n                                </div>\n                            </MobileCarouselItem>\n                            { !Array.isArray(props.album.attributes.artistName) ?\n                            <MobileCarouselItem>\n                                <div className=\"artist\">\n                                    <div className=\"artist-info\">\n                                        <div className=\"artist-image-name\">\n                                            <img src={getArtistArtworkUrl(props.album.attributes.artistName)} alt=\"artist artwork\" className=\"artist-artwork\"/>\n                                            <p className='artist-name'>{props.album.attributes.artistName}</p>\n                                        </div>\n                                        <div className='artist-stats'>\n                                            <div className='artist-stats-labels'>\n                                                <p>{`Highest album rank: `}</p>\n                                                <p>{`Lowest album rank: `}</p>\n                                                <p>{`Average album rank: `}</p>\n                                            </div>\n                                            <div className='artist-stats-values'>\n                                                <p>{getAllArtistAlbums(props.album.attributes.artistName).length > 0 && `#${getAllArtistAlbums(props.album.attributes.artistName)[0].ranking}`}</p>\n                                                <p>{getAllArtistAlbums(props.album.attributes.artistName).length > 0 && `#${getAllArtistAlbums(props.album.attributes.artistName)[getAllArtistAlbums(props.album.attributes.artistName).length - 1].ranking}`}</p>\n                                                <p>{getAllArtistAlbums(props.album.attributes.artistName).length > 0 && `#${(getAllArtistAlbums(props.album.attributes.artistName).reduce((a, b) => a + b.ranking, 0 ) / getAllArtistAlbums(props.album.attributes.artistName).length).toFixed(1)}`}</p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div className=\"other-albums-container\">\n                                        <p className='label'>OTHER ALBUMS:</p>\n                                        <div className=\"other-albums\">\n                                            {renderOtherAlbums(props.album.attributes.artistName)}\n                                        </div>\n                                    </div>\n                                </div>\n                            </MobileCarouselItem>\n                            : props.album.attributes.artistName.map((artist, index) => {\n                                    return <MobileCarouselItem index={index}>\n                                        <div className=\"artist\">\n                                            <div className=\"artist-info\">\n                                                <div className=\"artist-image-name\">\n                                                    <img src={getArtistArtworkUrl(artist)} alt=\"artist artwork\" className=\"artist-artwork\"/>\n                                                    <p className='artist-name'>{artist}</p>\n                                                </div>\n                                                <div className='artist-stats'>\n                                                    <div className='artist-stats-labels'>\n                                                        <p>{`Highest album rank: `}</p>\n                                                        <p>{`Lowest album rank: `}</p>\n                                                        <p>{`Average album rank: `}</p>\n                                                    </div>\n                                                    <div className='artist-stats-values'>\n                                                        <p>{getAllArtistAlbums(artist).length > 0 && `#${getAllArtistAlbums(artist)[0].ranking}`}</p>\n                                                        <p>{getAllArtistAlbums(artist).length > 0 && `#${getAllArtistAlbums(artist)[getAllArtistAlbums(artist).length - 1].ranking}`}</p>\n                                                        <p>{getAllArtistAlbums(artist).length > 0 && `#${(getAllArtistAlbums(artist).reduce((a, b) => a + b.ranking, 0 ) / getAllArtistAlbums(artist).length).toFixed(1)}`}</p>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <div className=\"other-albums-container\">\n                                                <p className='label'>OTHER ALBUMS:</p>\n                                                <div className=\"other-albums\">\n                                                    {renderOtherAlbums(artist)}\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </MobileCarouselItem> }\n                                )}\n                        </MobileCarousel>\n                    </div> }\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default TableRow;","import React from \"react\";\nimport './TableHeader.css';\n\nconst TableHeader = () => {\n    return (\n        <div className=\"table-header\">\n            <div className=\"table-label\" id=\"rank-label\">RANK</div>\n            <div className=\"table-label\" id=\"album-label\">ALBUM</div>\n            <div className=\"table-label\" id=\"release-label\">RELEASE DATE</div>\n        </div>\n    );\n}\n\nexport default TableHeader;","import Multiselect from \"multiselect-react-dropdown\";\nimport React, { useEffect, useState } from \"react\";\nimport './RankingSelect.css';\nimport { ExpandMoreRounded } from \"@mui/icons-material\";\nimport { ThemeProvider } from \"@mui/system\";\nimport { theme } from '../MuiTheme/Theme';\n\nconst RankingSelect = (props) => {\n    let [selectedValues, setSelectedValues] = useState([{ label: \"Global\", value: \"global\" }]);\n\n    const options = [\n        { label: \"Global\", value: \"global\" },\n        { label: \"Personal\", value: \"personal\" }\n    ];\n\n    useEffect(() => {\n        if (props.queryParams === 'personal') {\n            setSelectedValues([{ label: \"Personal\", value: \"personal\" }]);\n        } else {\n            setSelectedValues([{ label: \"Global\", value: \"global\" }]);\n        }\n    }, [props.queryParams])\n\n\n\n\n    return (\n        <Multiselect id='ranking-select'\n            options={options}\n            displayValue=\"label\"\n            avoidHighlightFirstOption=\"true\"\n            singleSelect=\"true\"\n            selectedValues={selectedValues}\n            hidePlaceholder=\"true\"\n            placeholder=\"\"\n            showArrow=\"true\"\n            onSelect={props.onSelect}\n            customArrow={<ThemeProvider theme={theme}><ExpandMoreRounded color=\"primary\"/></ThemeProvider>}\n        />\n    )\n}\n\nexport default RankingSelect;","import Multiselect from \"multiselect-react-dropdown\";\nimport React, { useState, useEffect } from \"react\";\nimport './TypeSelect.css';\nimport { ExpandMoreRounded } from \"@mui/icons-material\";\nimport { ThemeProvider } from \"@mui/system\";\nimport { theme } from '../MuiTheme/Theme';\nimport { type } from \"@testing-library/user-event/dist/type\";\n\nconst TypeSelect = (props) => {\n    let [selectedValues, setSelectedValues] = useState([]);\n    let [options, setOptions] = useState([]);\n\n    useEffect(() => {\n        if (props.albums.length > 0) {\n            setOptions(getTypeOptions(props.albums));\n        }\n    },  [props.albums])\n\n    useEffect(() => {\n        if (props.queryParams.length > 0 && options.length > 0) {\n            setSelectedValues(props.queryParams.map(type => options.find(option => option.label === type)));\n        }\n    }, [options])\n\n    useEffect(() => {\n        if (props.albums.length > 0) {\n            setOptions(getTypeOptions(filterTypes()));\n        }\n    }, [props.yearFilter, props.artistFilter])\n\n    const getTypeOptions = (albums) => {\n        let options = [];\n        albums.forEach(album => {\n            if (!options.some(type => type.label === album.type)) {\n                options.push({\n                    label: album.type,\n                    value: album.type.toLowerCase,\n                    count: albums.filter(albumA => albumA.type === album.type).length\n                });\n            }\n\n        });\n        const sortedOptions = options.sort((a, b) => b.count - a.count);\n        return sortedOptions;\n    }\n\n    const filterTypes = () => {\n        let filteredAlbums = props.albums.map(album => album);\n        if (props.artistFilter.length > 0) {\n            props.albums.forEach(album => {\n                if (Array.isArray(album.attributes.artistName)) {\n                    if (album.attributes.artistName.some(artist => props.artistFilter.includes(artist)) === false) {\n                        filteredAlbums.splice(filteredAlbums.findIndex(foundAlbum => foundAlbum === album), 1);\n                    }\n                } else { \n                    if ((props.artistFilter.some(artist => artist === album.attributes.artistName)) === false) {\n                        filteredAlbums.splice(filteredAlbums.findIndex(foundAlbum => foundAlbum === album), 1);\n                    }\n                }\n            });\n        }\n        if (props.yearFilter.length > 0) {\n            let years = props.albums.filter(album => props.yearFilter.some(year => album.attributes.releaseDate.includes(year))).map(album => album);\n            filteredAlbums = filteredAlbums.filter(album => years.includes(album));\n        }\n        console.log(filteredAlbums);\n        return filteredAlbums;\n    }\n\n\n\n    return (\n        <Multiselect id={props.id}\n            options={options}\n            selectedValues={selectedValues}\n            displayValue=\"label\"\n            avoidHighlightFirstOption=\"true\"\n            singleSelect=\"true\"\n            placeholder=\"Type\"\n            showArrow=\"true\"\n            onSelect={props.onSelect}\n            onRemove={props.onRemove}\n            closeIcon={'cancel'}\n            customArrow={<ThemeProvider theme={theme}><ExpandMoreRounded color=\"primary\"/></ThemeProvider>}\n        />\n    )\n}\n\nexport default TypeSelect;","import React, { useState, useEffect, useRef } from \"react\";\nimport TableRow from \"../TableRow/TableRow\";\nimport axios from \"axios\";\nimport TableHeader from \"../TableHeader/TableHeader\";\nimport './Rankings.css';\nimport RankingSelect from \"../RankingSelect/RankingSelect\";\nimport ArtistFilter from \"../ArtistFilter/ArtistFilter\";\nimport { YearFilter } from \"../YearFilter/YearFilter\";\nimport solveRanking from \"../../util/solveRanking\";\nimport jsCookie from \"js-cookie\";\nimport uuid from \"uuid\";\nimport TypeSelect from \"../TypeSelect/TypeSelect\";\nimport { ShareOutlined, FilterAltRounded } from \"@mui/icons-material\";\nimport { Button } from \"@mui/material\";\nimport { ThemeProvider } from \"@mui/system\";\nimport { theme, filterTheme } from '../MuiTheme/Theme';\nimport Header from \"../Header/Header\";\nimport { IconButton } from '@mui/material';\nimport { CloseRounded } from '@mui/icons-material';\n\nconst Rankings = () => {\n\n    let [albums, setAlbums] = useState([]);\n    let [artists, setArtists] = useState([]);\n    let [resultsGlobal, setResultsGlobal] = useState([]);\n    let [resultsUser, setResultsUser] = useState([]);\n    let [rankingGlobal, setRankingGlobal] = useState([]);\n    let [rankingUser, setRankingUser] = useState([]);\n    let [currentRanking, setCurrentRanking] = useState([]);\n    let [userId, setUserId] = useState('');\n    let [selectedRanking, setSelectedRanking] = useState('global');\n    let [isLoading, setIsLoading] = useState(false);\n    let [rowExpanded, setRowExpanded] = useState('');\n    let [artistFilter, setArtistFilter] = useState([]);\n    let [yearFilter, setYearFilter] = useState([]);\n    let [typeFilter, setTypeFilter] = useState([]);\n    let [filterButtonColor, setFilterButtonColor] = useState('primary');\n\n    useEffect(() => {\n        getUserId();\n        fetchAlbums();\n        fetchArtists();\n        fetchResults();\n        setIsLoading(true);\n        setArtistFilter(splitArtistParams());\n        setTypeFilter(searchParams.getAll('type'));\n        if(searchParams.get('ranking') !== null) {\n            setSelectedRanking(searchParams.get('ranking'));\n        };\n    }, []);\n\n    useEffect(() => {\n        getUserData();\n    }, [userId]);\n\n    useEffect(() => {\n        if (resultsGlobal.length > 0) {\n            setRankingGlobal(solveRanking(resultsGlobal));\n        }\n    }, [resultsGlobal]);\n\n    useEffect(() => {\n        if (resultsUser.length > 0) {\n            setRankingUser(solveRanking(resultsUser));\n        }\n    }, [resultsUser]);\n\n    useEffect(() => {\n        if (selectedRanking === 'global') {\n            setCurrentRanking(rankingGlobal);\n        }\n        if (rankingGlobal.length > 0) {\n           setIsLoading(false);\n        }\n    }, [rankingGlobal]);\n\n    useEffect(() => {\n        if (selectedRanking === 'personal') {\n            setCurrentRanking(rankingUser);\n        }\n        if (rankingUser.length > 0) {\n           setIsLoading(false);\n        }\n    }, [rankingGlobal]);\n\n    useEffect(() => {\n        filterRankings();\n        searchParams.set('ranking', selectedRanking);\n        var newRelativePathQuery = window.location.pathname + '?' + searchParams.toString();\n        window.history.pushState(null, '', newRelativePathQuery);\n\n    }, [selectedRanking]);\n\n    useEffect(() => {\n        filterRankings(); \n        if (rowExpanded !== '') {\n            closeRow(rowExpanded);\n        }\n        if (artistFilter.length === 0) {\n            searchParams.delete('artist');\n            var newRelativePathQuery = window.location.pathname + '?' + searchParams.toString();\n            window.history.pushState(null, '', newRelativePathQuery);\n        }\n        if (artistFilter.length > 0) {\n            searchParams.set('artist', artistFilter);\n            var newRelativePathQuery = window.location.pathname + '?' + searchParams.toString();\n            window.history.pushState(null, '', newRelativePathQuery);\n        }\n        if (yearFilter.length === 0) {\n            searchParams.delete('years');\n            var newRelativePathQuery = window.location.pathname + '?' + searchParams.toString();\n            window.history.pushState(null, '', newRelativePathQuery);\n        }\n        if (typeFilter.length === 0) {\n            searchParams.delete('type');\n            var newRelativePathQuery = window.location.pathname + '?' + searchParams.toString();\n            window.history.pushState(null, '', newRelativePathQuery);\n        }\n        if (typeFilter.length > 0) {\n            searchParams.set('type', typeFilter[0]);\n            var newRelativePathQuery = window.location.pathname + '?' + searchParams.toString();\n            window.history.pushState(null, '', newRelativePathQuery);\n        }   \n    }, [artistFilter, yearFilter, typeFilter]);\n\n    useEffect(() => {\n        if (rankingGlobal) {\n            filterRankings();\n        }\n    }, [rankingGlobal, albums]);\n\n    useEffect(() => {\n        if (rankingUser) {\n            filterRankings();\n        }\n    }, [rankingUser, albums]);\n\n    useEffect(() => {\n        if (prevRow !== '' && rowExpanded !== '') {\n            closeRow(prevRow);\n        }\n    }, [rowExpanded]);\n\n    function usePrevious(value) {\n        const ref = useRef();\n        useEffect(() => {\n          ref.current = value;\n        });\n        return ref.current;\n      }\n\n    const prevRow = usePrevious(rowExpanded);\n\n    let searchParams = new URLSearchParams(window.location.search);\n        \n    const getUserId = () => {\n        if (!jsCookie.get('user')) {\n          jsCookie.set('user', uuid.v4(), { expires: 10000 });\n        } else {\n          setUserId(jsCookie.get('user'));\n        }\n      }\n\n    const fetchAlbums = () => {\n        axios.get('https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/albums', {\n          params: {\n            \"verification_method\": \"SECRET_AS_QUERY_PARAM\",\n            \"secret\": \"temperature\"\n          }\n        })\n        .then(response => {\n          setAlbums(response.data);\n        })\n        .catch(err => {\n          console.log(err);\n        });\n      }\n\n      const fetchArtists = () => {\n        axios.get('https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/artists', {\n        })\n        .then(response => {\n          setArtists(response.data);\n        })\n        .catch(err => {\n          console.log(err);\n        });\n      }\n\n    const fetchResults = () => {\n        axios.get('https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/getResults', {\n        })\n        .then(response => {\n            setResultsGlobal(response.data);\n        })\n        .catch(err => {\n            console.log(err);\n         });\n    }\n\n    const getUserData = () => {\n        if (userId !== '') {\n          axios.get('https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/getuser', {\n            params: {\n              userId: userId\n            }\n          }).then (response => {\n            if (response.data !== null) {\n            setResultsUser(response.data.results);\n            }\n          })\n        }\n      }\n\n    const splitArtistParams = () => {\n        let artistParams = searchParams.get('artist');\n        if (artistParams !== null) {\n            let artistArray = artistParams.split(',');\n            return artistArray;\n        } else {\n            return [];\n        }\n    }\n\n    const splitYearParams = () => {\n        let yearParams = searchParams.get('years');\n        if (yearParams !== null) {\n            let yearArray = yearParams.split(',');\n            return yearArray;\n        } else {\n            return [];\n        }\n    }\n\n    const changeRanking = (selectedItem) => {\n        setSelectedRanking(selectedItem[0].value);\n    };\n\n    const shareRanking = () => {\n        let artistFilterShare = artistFilter.map(artist => artist)\n        let artistFilterLast = artistFilterShare.pop();\n        let type = '';\n        if (typeFilter.length > 0)  {\n            type = typeFilter[0].toLowerCase();\n        }\n        let yearFilterShare = yearFilter.map(year => year)\n        let yearFilterLast = yearFilterShare.pop();\n        let shareRanking = [];\n        artistFilter.length === 1 ? shareRanking = currentRanking : shareRanking = currentRanking.slice(0, 10)\n        const sharedText = `My top ranked ${artistFilter.length > 1 ? `${artistFilterShare.join(', ') + ' & ' + artistFilterLast + ' '}` : artistFilter.length > 0 ? `${artistFilter[0]} ` : ''}${typeFilter.length > 0 ? `${type}s` : `albums`} of ${document.getElementById('select-all-twenties').classList.contains('year-selected') ? `the 2020's` : document.getElementById('select-all-teens').classList.contains('year-selected') ? `the 2010's` : document.getElementById('select-all-aughts').classList.contains('year-selected') ? `the 2000's` : yearFilter.length > 1 ? `${yearFilterShare.join(', ') + ' & ' + yearFilterLast}` : yearFilter.length > 0 ? `${yearFilter[0]}` : `all time`}: \\n\\n${shareRanking.map((result, index) => `${index + 1}. ${albums.find(album => album.id === result.albumId).attributes.name} ${albums.find(album => album.id === result.albumId).attributes.emoji !== undefined ? albums.find(album => album.id === result.albumId).attributes.emoji : '' }`).join('\\n')}`;\n        navigator.clipboard.writeText(sharedText);\n    }\n\n    const isExpanded = (id) => {\n        setRowExpanded(id);\n    };\n\n    const filterArtist = (selectedList) => {\n        const artistFilter = selectedList.map(artist => artist.name);\n        setArtistFilter(artistFilter);\n    }\n\n    const filterYear = (selectedList) => {\n        setYearFilter(selectedList);\n    }\n\n    const filterType = (selectedList) => {\n        const typeFilter = selectedList.map(type => type.label);\n        setTypeFilter(typeFilter);\n    }\n\n    const filterRankings = () => {\n        if (artistFilter.length === 0 && yearFilter.length === 0 && typeFilter.length === 0) {\n            if (selectedRanking === 'global') {\n                setCurrentRanking(rankingGlobal);\n            } else if (selectedRanking === 'personal') {\n                setCurrentRanking(rankingUser);\n            }\n        } else {\n            let filteredIds = albums.map(album => album.id);\n            if (artistFilter.length > 0) {\n                albums.forEach(album => {\n                    if (Array.isArray(album.attributes.artistName)) {\n                        if (album.attributes.artistName.some(artist => artistFilter.includes(artist)) === false) {\n                            filteredIds.splice(filteredIds.findIndex(id => id === album.id), 1);\n                        }\n                    } else { \n                        if ((artistFilter.some(artist => artist === album.attributes.artistName)) === false) {\n                            filteredIds.splice(filteredIds.findIndex(id => id === album.id), 1);\n                        }\n                    }\n                });\n            }\n            if (yearFilter.length > 0) {\n                let yearIds = albums.filter(album => yearFilter.some(year => album.attributes.releaseDate.includes(year))).map(album => album.id);\n                filteredIds = filteredIds.filter(id => yearIds.includes(id));\n                searchParams.set('years', yearFilter);\n                var newRelativePathQuery = window.location.pathname + '?' + searchParams.toString();\n                window.history.pushState(null, '', newRelativePathQuery);\n            }\n            if (typeFilter.length > 0) {\n                let typeIds = albums.filter(album => typeFilter.includes(album.type)).map(album => album.id);\n                filteredIds = filteredIds.filter(id => typeIds.includes(id));\n            }\n            let filteredRanking = [];\n            selectedRanking === 'global' ? filteredRanking = rankingGlobal.filter(album => filteredIds.includes(album.albumId)) : filteredRanking = rankingUser.filter(album => filteredIds.includes(album.albumId));\n            setCurrentRanking(filteredRanking);\n        }\n    };\n\n    const closeRow = (id) => {\n        if (window.screen.width > 500) {\n            document.getElementById(`table-row-${id}`).classList.remove('open');\n            document.getElementById(`table-row-${id}`).classList.add('closed');\n            document.getElementById(`chevron ${id}`).style.transform = 'rotate(0deg)';\n            document.getElementById(`more ${id}`).style.visibility = '';\n            document.getElementById(`chevron ${id}`).style.visibility = '';\n        } else {\n            document.getElementById(`table-row-${id}`).classList.remove('open');\n            document.getElementById(`table-row-${id}`).classList.add('closed');\n            document.getElementById(`chevron ${id}`).style.transform = 'rotate(0deg)';\n        }\n    }\n\n    const openFilterDrawer = () => {\n        document.getElementById('filter-drawer').style.top = '0';\n        document.getElementById('rankings-page-container').style.overflow = 'hidden';\n    }\n    \n    const closeFilterDrawer = () => {\n        document.getElementById('filter-drawer').style.top = '100%';\n        document.getElementById('rankings-page-container').style.overflow = 'auto';\n    }\n\n    const renderTable = () => {\n        if (isLoading) {\n            return <span className='loader' ></span>\n        } else {\n            return currentRanking.map((result, index) => (\n                <TableRow \n                    key={index} \n                    album={albums.find(album => album.id === result.albumId)} \n                    rank={index + 1} \n                    albums={albums} \n                    artists={artists}\n                    rankingGlobal={rankingGlobal} \n                    rankingUser={rankingUser}\n                    resultsGlobal={resultsGlobal} \n                    resultsUser={resultsUser}\n                    selectedRanking={selectedRanking}\n                    isExpanded={isExpanded}\n                />\n            ));\n        }\n    }\n\n    return (\n        <div id=\"rankings-page-container\">\n            <Header artistFilter={artistFilter} yearFilter={yearFilter}/>\n            <div className='filters-rankings'>\n                <RankingSelect onSelect={changeRanking} queryParams={selectedRanking}/>\n                <ArtistFilter id='artist-filter' albums={albums} onSelect={filterArtist} onRemove={filterArtist} queryParams={artistFilter} yearFilter={yearFilter} typeFilter={typeFilter} />\n                <YearFilter id='year-filter' filterId='calendar' onChange={filterYear} queryParams={yearFilter} albums={albums} artistFilter={artistFilter} typeFilter={typeFilter} />\n                <TypeSelect id='type-select' onSelect={filterType} onRemove={filterType} queryParams={typeFilter} albums={albums} artistFilter={artistFilter} yearFilter={yearFilter} />\n                <ThemeProvider theme={filterTheme}>\n                    <Button id='filter-button-rankings' onClick={openFilterDrawer} variant=\"outlined\" color={filterButtonColor} size=\"small\" sx={{ textTransform: \"none\", borderRadius: \"15px\", height: '30.75px' }}endIcon={<FilterAltRounded size=\"small\" />}>\n                        Filters\n                    </Button>\n                </ThemeProvider>\n                <div className='share' >\n                    {selectedRanking === 'personal' ? \n                    <ThemeProvider theme={theme}>\n                        <Button id=\"share\" variant=\"contained\" onClick ={shareRanking} color='secondary' sx={{ borderRadius: '20px', height: '40px', padding: '0px 32px 0px 32px', textTransform: 'none', fontSize: '16px', fontFamily: 'Helvetica', color: '#FFFFFF' }} endIcon={<ShareOutlined size='small'/>} >\n                            Share\n                        </Button> \n                    </ThemeProvider>\n                    : null}\n                </div>\n            </div>\n            <TableHeader />\n            <div className='table-container' id='table-container'>\n                {renderTable()}\n            </div>\n            <div className=\"filter-drawer\" id=\"filter-drawer\">\n                <div className=\"filter-drawer-content\">\n                    <div className=\"filter-drawer-header\">\n                        <div></div>\n                        <div className=\"filter-drawer-header-title\">\n                            Filters\n                        </div>\n                        <ThemeProvider theme={theme}>\n                            <IconButton color='primary' size=\"large\" onClick={closeFilterDrawer}>\n                                <CloseRounded fontSize=\"inherit\"/>\n                            </IconButton>\n                        </ThemeProvider>\n                    </div>\n                    <hr/>\n                    <div className=\"filter-drawer-body\">\n                        <ArtistFilter id='artist-filter-drawer' albums={albums} onSelect={filterArtist} onRemove={filterArtist} queryParams={artistFilter} yearFilter={yearFilter} typeFilter={typeFilter} />\n                        <YearFilter id='year-filter-drawer' filterId='calendar' onChange={filterYear} queryParams={yearFilter} albums={albums} artistFilter={artistFilter} typeFilter={typeFilter} />\n                        <TypeSelect id='type-select-drawer' onSelect={filterType} onRemove={filterType} queryParams={typeFilter} albums={albums} artistFilter={artistFilter} yearFilter={yearFilter} />\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Rankings;","import React from \"react\";\nimport Rank from \"./Components/Rank/Rank\";\nimport Rankings from \"./Components/Ranking/Rankings\";\nimport { Outlet, Link } from \"react-router-dom\";\n\nfunction App() {\n    return (\n        <>\n            <Outlet />\n        </>\n    )\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter, Routes, Route } from 'react-router-dom';\nimport Rank from './Components/Rank/Rank';\nimport Rankings from './Components/Ranking/Rankings';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n    <BrowserRouter basename=\"/rankable\">\n        <Routes>\n            <Route path=\"/\" element={<App />} />\n            <Route index element={<Rank />} />\n            <Route path=\"rankings\" element={<Rankings />} />\n\n        </Routes>\n    </BrowserRouter>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}