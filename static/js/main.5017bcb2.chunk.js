(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{119:function(e,t,a){e.exports=a(404)},127:function(e,t,a){},130:function(e,t,a){},132:function(e,t,a){},136:function(e,t,a){},163:function(e,t,a){},172:function(e,t,a){e.exports=a.p+"static/media/rankabl-logo.251c7ee4.png"},176:function(e,t,a){},178:function(e,t,a){},180:function(e,t,a){},185:function(e,t,a){},187:function(e,t,a){},189:function(e,t,a){},191:function(e,t,a){},193:function(e,t,a){},195:function(e,t,a){},197:function(e,t,a){},404:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(105),c=a.n(l),s=(a(127),a(4)),i=(a(130),a(70)),o=a(108),u=a(109),m=a(112),d=a(110),f=a(113),b=(a(132),function(e,t){var a=parseInt(e,16),n=Math.round(2.55*t),r=(a>>16)+n,l=(a>>8&255)+n,c=(255&a)+n;return(16777216+65536*(r<255?r<1?0:r:255)+256*(l<255?l<1?0:l:255)+(c<255?c<1?0:c:255)).toString(16).slice(1)}),g=a(45),h=a.n(g),E=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"getArtistName",value:function(){return Array.isArray(this.props.album.attributes.artistName)?this.props.album.attributes.artistName.join(" & "):this.props.album.attributes.artistName}},{key:"replaceUrl",value:function(e){return e.replace("{w}","600").replace("{h}","600")}},{key:"render",value:function(){if(this.props.album){var e={"--bg-color":"#"+this.props.album.attributes.artwork.bgColor,"--text-color-1":"#"+this.props.album.attributes.artwork.textColor1,"--text-color-2":"#"+this.props.album.attributes.artwork.textColor2,"--text-color-3":"#"+this.props.album.attributes.artwork.textColor3,"--text-color-4":"#"+this.props.album.attributes.artwork.textColor4,"--shadow":"#"+this.props.album.attributes.artwork.textColor4+"25","--shadow-hover":"#"+this.props.album.attributes.artwork.textColor4+"50","--bg-gradient":"#"+b(this.props.album.attributes.artwork.bgColor,8)};return r.a.createElement("div",{className:"album",id:this.props.id,style:e,onMouseDown:this.mouseDown,onMouseUp:this.mouseUp,onClick:this.props.onClick},r.a.createElement("img",{src:this.replaceUrl(this.props.album.attributes.artwork.url),alt:this.props.album.attributes.name}),r.a.createElement("h1",{className:"album-title"},this.props.album.attributes.name),r.a.createElement("h2",{className:"album-artist"},this.getArtistName()))}}}]),t}(r.a.Component);a(136);var p=a(24),v=a.n(p);function y(){y=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",l=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function s(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(L){s=function(e,t,a){return e[t]=a}}function i(e,t,a,n){var r=t&&t.prototype instanceof m?t:m,l=Object.create(r.prototype),c=new C(n||[]);return l._invoke=function(e,t,a){var n="suspendedStart";return function(r,l){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw l;return j()}for(a.method=r,a.arg=l;;){var c=a.delegate;if(c){var s=w(c,a);if(s){if(s===u)continue;return s}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var i=o(e,t,a);if("normal"===i.type){if(n=a.done?"completed":"suspendedYield",i.arg===u)continue;return{value:i.arg,done:a.done}}"throw"===i.type&&(n="completed",a.method="throw",a.arg=i.arg)}}}(e,a,c),l}function o(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(L){return{type:"throw",arg:L}}}e.wrap=i;var u={};function m(){}function d(){}function f(){}var b={};s(b,r,function(){return this});var g=Object.getPrototypeOf,h=g&&g(g(O([])));h&&h!==t&&a.call(h,r)&&(b=h);var E=f.prototype=m.prototype=Object.create(b);function p(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function v(e,t){var n;this._invoke=function(r,l){function c(){return new t(function(n,c){!function n(r,l,c,s){var i=o(e[r],e,l);if("throw"!==i.type){var u=i.arg,m=u.value;return m&&"object"==typeof m&&a.call(m,"__await")?t.resolve(m.__await).then(function(e){n("next",e,c,s)},function(e){n("throw",e,c,s)}):t.resolve(m).then(function(e){u.value=e,c(u)},function(e){return n("throw",e,c,s)})}s(i.arg)}(r,l,n,c)})}return n=n?n.then(c,c):c()}}function w(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=o(a,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var r=n.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function O(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,l=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return l.next=l}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=f,s(E,"constructor",f),s(f,"constructor",d),d.displayName=s(f,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},p(v.prototype),s(v.prototype,l,function(){return this}),e.AsyncIterator=v,e.async=function(t,a,n,r,l){void 0===l&&(l=Promise);var c=new v(i(t,a,n,r),l);return e.isGeneratorFunction(a)?c:c.next().then(function(e){return e.done?e.value:c.next()})},p(E),s(E,c,"Generator"),s(E,r,function(){return this}),s(E,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var n=t.pop();if(n in e)return a.value=n,a.done=!1,a}return a.done=!0,a}},e.values=O,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return c.type="throw",c.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var l=this.tryEntries[r],c=l.completion;if("root"===l.tryLoc)return n("end");if(l.tryLoc<=this.prev){var s=a.call(l,"catchLoc"),i=a.call(l,"finallyLoc");if(s&&i){if(this.prev<l.catchLoc)return n(l.catchLoc,!0);if(this.prev<l.finallyLoc)return n(l.finallyLoc)}else if(s){if(this.prev<l.catchLoc)return n(l.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return n(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var l=r;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var c=l?l.completion:{};return c.type=e,c.arg=t,l?(this.method="next",this.next=l.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),k(a),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;k(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:O(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}},e}a(48);var w=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)([]),u=Object(s.a)(o,2),m=u[0],d=u[1],f=Object(n.useState)([]),b=Object(s.a)(f,2),g=b[0],h=b[1],p=Object(n.useState)([]),w=Object(s.a)(p,2),N=w[0],k=w[1],C=Object(n.useState)(!1),O=Object(s.a)(C,2),j=O[0],L=O[1],I=Object(n.useState)([]),S=Object(s.a)(I,2),x=S[0],A=S[1],B=Object(n.useState)(!1),M=Object(s.a)(B,2),F=M[0],T=M[1];Object(n.useEffect)(function(){L(!0)},[]),Object(n.useEffect)(function(){0===l.length&&e.albumsLoaded&&e.loadedUserData&&A(e.seenPairs)},[e.albumsLoaded,e.loadedUserData]),Object(n.useEffect)(function(){if(e.loadedUserData&&e.albums){var t=P(e.albums);c(t)}},[x]),Object(n.useEffect)(function(){l.length>0?(T(!0),console.log("new pair")):e.albumsLoaded&&e.loadedUserData&&(setTimeout(function(){L(!1)},300),console.log(" no more albums "))},[l]),Object(n.useEffect)(function(){F&&l.length>0&&H(l).then(function(){T(!1),L(!1)})},[F]),Object(n.useEffect)(function(){e.albumsLoaded&&(console.log("albums changed"),L(!0),setTimeout(function(){c(P(e.albums))},300))},[e.albums]);var R,P=function(e){for(var t=function(e){for(var t=[],a=0;a<e.length-1;a++)for(var n=a+1;n<e.length;n++)t.push([e[a].id,e[n].id]);return t}(e),a=[],n=0;n<x.length;n++)for(var r=0;r<t.length;r++)x[n].includes(t[r][0])&&x[n].includes(t[r][1])&&a.push(t[r]);return t.filter(function(e){return!a.includes(e)})},D=function(e){return e[Math.floor(Math.random()*e.length)]},H=function(){var t=Object(i.a)(y().mark(function t(a){var n,r,l,c,s;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=D(a),r=Math.floor(Math.random()*n.length),l=1-r,t.next=5,d(n);case 5:return t.next=7,h(e.albums.find(function(e){return e.id===n[r]}));case 7:return t.next=9,k(e.albums.find(function(e){return e.id===n[l]}));case 9:c=Array.from(document.getElementsByClassName("skip-error-message")),s=Array.from(document.getElementsByClassName("skip-button")),c.forEach(function(e){e.style.visibility="hidden"}),s.forEach(function(e){e.removeAttribute("disabled")});case 13:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),U=function(t){var a=g.id,n=N.id,r={};"album1"===t.currentTarget.id&&(r[a]=1,r[n]=-1,r={album1:{id:a,result:1},album2:{id:n,result:-1}},L(!0),v()({url:"https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/results/save",method:"POST",params:{userId:e.userId},data:{result:r,seenPair:m}}).then(function(e){A(e.data.userResult.seenPairs),console.log(e.data.userResult.seenPairs)}).catch(function(e){console.log(e)})),"album2"===t.currentTarget.id&&(r[a]=-1,r[n]=1,r={album1:{id:a,result:-1},album2:{id:n,result:1}},L(!0),v()({url:"https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/results/save",method:"POST",params:{userId:e.userId},data:{result:r,seenPair:m}}).then(function(e){A(e.data.userResult.seenPairs),console.log(e.data.userResult.seenPairs)}).catch(function(e){console.log(e)}))},_=function(){var e=Object(i.a)(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(t);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),q=function(t){var a=g.id,n=N.id;if("second"===t.target.id){var r=l.filter(function(e){return e.includes(a)&&!e.includes(n)});if(0===r.length)return document.getElementById("second").setAttribute("disabled","disabled"),document.getElementById("first").setAttribute("disabled","disabled"),void(document.getElementById("skip-error-second").style.visibility="visible");var c=D(r);d(c),k(e.albums.find(function(e){return e.id===c.find(function(e){return e!==a})}))}else if("first"===t.target.id){var s=l.filter(function(e){return e.includes(n)&&!e.includes(a)});if(0===s.length)return document.getElementById("first").setAttribute("disabled","disabled"),document.getElementById("second").setAttribute("disabled","disabled"),void(document.getElementById("skip-error-first").style.visibility="visible");var i=D(s);d(i),h(e.albums.find(function(e){return e.id===i.find(function(e){return e!==n})}))}},G=e.filters;return j?R=r.a.createElement("div",{className:"album-container"},r.a.createElement("span",{className:"loader"})):0===l.length?G?(R=r.a.createElement("h1",null,"No available pairs of albums. Widen filters and try again."),document.getElementById("first")&&document.getElementById("first").setAttribute("disabled","disabled"),document.getElementById("second")&&document.getElementById("second").setAttribute("disabled","disabled"),document.getElementById("skip-both")&&document.getElementById("skip-both").setAttribute("disabled","disabled")):(R=r.a.createElement("h1",null,"No available pairs of albums."),document.getElementById("first")&&document.getElementById("first").setAttribute("disabled","disabled"),document.getElementById("second")&&document.getElementById("second").setAttribute("disabled","disabled"),document.getElementById("skip-both")&&document.getElementById("skip-both").setAttribute("disabled","disabled")):R=r.a.createElement("div",{className:"album-container"},r.a.createElement(E,{className:"album",id:"album1",album:g,onClick:_}),r.a.createElement("button",{className:"skip skip-button",id:"first",onClick:q}),r.a.createElement("button",{className:"skip skip-button skip-both",id:"skip-both",onClick:function(){var t=g.id,a=N.id,n=l.filter(function(e){return!e.includes(t)&&!e.includes(a)});if(0===n.length)document.getElementById("skip-both").setAttribute("disabled","disabled"),document.getElementById("skip-error-both").classList.add("is-visible");else{var r=D(n),c=Math.floor(Math.random()*r.length),s=1-c;d(r),h(e.albums.find(function(e){return e.id===r[c]})),k(e.albums.find(function(e){return e.id===r[s]}))}}}),r.a.createElement(E,{className:"album",id:"album2",album:N,onClick:_}),r.a.createElement("button",{className:"skip skip-button",id:"second",onClick:q}),r.a.createElement("p",{className:"skip-error-message",id:"skip-error-first"},"No available albums"),r.a.createElement("p",{className:"skip-error-both",id:"skip-error-both"},"No available albums"),r.a.createElement("p",{className:"skip-error-message",id:"skip-error-second"},"No available albums")),r.a.createElement("div",{className:"view-container"},R)},N=a(39),k=a.n(N);a(163);var C=function(e){for(var t=[],a=0;a<e.length;a++)if(Array.isArray(e[a].attributes.artistName))for(var n=function(n){var r=e[a].attributes.artistName[n];t.some(function(e){return e.name===r})||t.push({name:r,id:t.length+1,count:e.filter(function(e){return e.attributes.artistName===r}).length})},r=0;r<e[a].attributes.artistName.length;r++)n(r);else!function(){var n=e[a].attributes.artistName;t.some(function(e){return e.name===n})||t.push({name:n,id:t.length+1,count:e.filter(function(e){return e.attributes.artistName===n}).length})}();return t.sort(function(e,t){return t.count-e.count})},O=a(422),j=a(441),L=a(405),I=Object(L.a)({palette:{primary:{main:"#CFCFCF",contrastText:"#fff"},secondary:{main:"#8673FA",contrastText:"#fff"}},mark:{color:"red"}}),S=Object(L.a)({palette:{primary:{main:"#CFCFCF",contrastText:"#fff"},secondary:{main:"#B1A5FA",contrastText:"#fff"}},mark:{color:"red"}}),x=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)([]),o=Object(s.a)(i,2),u=o[0],m=o[1];Object(n.useEffect)(function(){c(C(e.albums))},[e.albums]),Object(n.useEffect)(function(){l.length>0&&m(e.queryParams.map(function(e){return l.find(function(t){return t.name===e})}))},[l]),Object(n.useEffect)(function(){c(C(d()))},[e.yearFilter,e.typeFilter]);var d=function(){var t=e.albums.map(function(e){return e});if(e.yearFilter.length>0&&(t=t.filter(function(t){return e.yearFilter.some(function(e){return t.attributes.releaseDate.includes(e)})})),e.typeFilter&&e.typeFilter.length>0){var a=e.albums.filter(function(t){return e.typeFilter.includes(t.type)});t=t.filter(function(e){return a.includes(e)}),console.log(t)}return t};return r.a.createElement(k.a,{id:e.id,options:l,selectedValues:u,onSelect:e.onSelect,onRemove:e.onRemove,displayValue:"name",avoidHighlightFirstOption:"true",placeholder:"Artists",closeIcon:"cancel",hidePlaceholder:"true",closeOnSelect:"true",customArrow:r.a.createElement(j.a,{theme:I},r.a.createElement(O.a,{color:"primary",fontSize:"small"})),showArrow:"true"})},A=a(15),B=(a(176),a(69)),M=a.n(B),F=a(426),T=function(e){var t=e.children,a=e.width;return r.a.createElement("div",{className:"carousal-item",style:{width:a}},t)},R=function(e){var t=e.children,a=Object(n.useState)(2),l=Object(s.a)(a,2),c=l[0],i=l[1],o=function(e){e<0?e=0:e>=r.a.Children.count(t)&&(e=r.a.Children.count(t)-1),i(e)};return r.a.createElement("div",{className:"carousal"},r.a.createElement("div",{className:"indicators"},r.a.createElement("button",{className:"next-prev-button",onClick:function(){o(c-1)}},"\u2039"),r.a.createElement("span",{id:"decade"},function(e){switch(e){case 0:return"2000's";case 1:return"2010's";case 2:return"2020's";default:return"Select years"}}(c)),r.a.createElement("button",{className:"next-prev-button",onClick:function(){o(c+1)}},"\u203a")),r.a.createElement("div",{className:"inner",style:{transform:"translateX(-".concat(100*c,"%)")}},r.a.Children.map(t,function(e,t){return r.a.cloneElement(e,{width:"100%"})})))},P=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(!1),o=Object(s.a)(i,2),u=o[0],m=o[1],d=Object(n.useState)(0),f=Object(s.a)(d,2),b=f[0],g=f[1],h=Object(n.useState)(["2000","2001","2002","2003","2004","2005","2006","2007","2008","2009"]),E=Object(s.a)(h,2),p=E[0],v=E[1],y=Object(n.useState)(["2010","2011","2012","2013","2014","2015","2016","2017","2018","2019"]),w=Object(s.a)(y,2),N=w[0],k=w[1],C=Object(n.useState)(["2020","2021","2022"]),O=Object(s.a)(C,2),L=O[0],S=O[1];Object(n.useEffect)(function(){b>0&&(document.getElementById(e.filterId).classList.toggle("display"),console.log("filter display toggled"))},[u]);var x=Object(n.useRef)();Object(n.useEffect)(function(){var t=function(t){x.current.contains(t.target)||document.getElementById(e.filterId).classList.add("display")};return document.addEventListener("mousedown",t),function(){document.removeEventListener("mousedown",t)}}),Object(n.useEffect)(function(){e.onChange(l)},[l]),Object(n.useEffect)(function(){c(P)},[]),Object(n.useEffect)(function(){e.albums.length>0&&z()},[e.albums,e.artistFilter,e.typeFilter]);var B=new URLSearchParams(window.location.search),P=function(){var e=B.get("years");return null!==e?e.split(","):[]};function D(e){e.target.classList.add("hover")}function H(e){e.target.classList.remove("hover"),e.target.classList.remove("select-hover")}function U(e){if(e.target.classList.contains("year-selected"))q(e.target.innerHTML),e.target.classList.contains("aughts")?document.getElementById("select-all-aughts").classList.remove("year-selected"):e.target.classList.contains("teens")?document.getElementById("select-all-teens").classList.remove("year-selected"):e.target.classList.contains("twenties")&&document.getElementById("select-all-twenties").classList.remove("year-selected");else{e.target.classList.toggle("year-selected");var t=[].concat(Object(A.a)(l),[e.target.innerHTML]);c(t.sort())}}function _(e){if(e.target.classList.contains("aughts"))if(e.target.classList.contains("year-selected"))c(l.filter(function(e){return!p.includes(e)})),Array.from(document.querySelectorAll(".aughts")).forEach(function(e){return e.classList.remove("year-selected")}),document.getElementById("select-all-aughts").innerHTML="Select All";else{var t=p.filter(function(e){return!l.includes(e)});c([].concat(Object(A.a)(l),Object(A.a)(t))),Array.from(document.querySelectorAll(".aughts")).forEach(function(e){return e.classList.add("year-selected")})}else if(e.target.classList.contains("teens"))if(e.target.classList.contains("year-selected"))c(l.filter(function(e){return!N.includes(e)})),Array.from(document.querySelectorAll(".teens")).forEach(function(e){return e.classList.remove("year-selected")}),document.getElementById("select-all-teens").innerHTML="Select All";else{var a=N.filter(function(e){return!l.includes(e)});c([].concat(Object(A.a)(l),Object(A.a)(a))),Array.from(document.querySelectorAll(".teens")).forEach(function(e){return e.classList.add("year-selected")})}else if(e.target.classList.contains("twenties"))if(e.target.classList.contains("year-selected"))c(l.filter(function(e){return!L.includes(e)})),Array.from(document.querySelectorAll(".twenties")).forEach(function(e){return e.classList.remove("year-selected")}),document.getElementById("select-all-twenties").innerHTML="Select All";else{var n=L.filter(function(e){return!l.includes(e)});console.log(n),c([].concat(Object(A.a)(l),Object(A.a)(n))),Array.from(document.querySelectorAll(".twenties")).forEach(function(e){return e.classList.add("year-selected")})}}function q(e){"2000's"===e?(c(l.filter(function(e){return!p.includes(e)})),Array.from(document.querySelectorAll(".aughts")).forEach(function(e){return e.classList.remove("year-selected")}),document.getElementById("select-all-aughts").innerHTML="Select All"):"2010's"===e?(c(l.filter(function(e){return!N.includes(e)})),Array.from(document.querySelectorAll(".teens")).forEach(function(e){return e.classList.remove("year-selected")}),document.getElementById("select-all-teens").innerHTML="Select All"):"2020's"===e?(c(l.filter(function(e){return!L.includes(e)})),Array.from(document.querySelectorAll(".twenties")).forEach(function(e){return e.classList.remove("year-selected")}),document.getElementById("select-all-twenties").innerHTML="Select All"):(c(l.filter(function(t){return t!==e})),document.getElementById(e).classList.remove("year-selected"),document.getElementById(e).classList.contains("aughts")?(document.getElementById("select-all-aughts").classList.remove("year-selected"),document.getElementById("select-all-aughts").innerHTML="Select All"):document.getElementById(e).classList.contains("teens")?(document.getElementById("select-all-teens").classList.remove("year-selected"),document.getElementById("select-all-teens").innerHTML="Select All"):document.getElementById(e).classList.contains("twenties")&&(document.getElementById("select-all-twenties").classList.remove("year-selected"),document.getElementById("select-all-twenties").innerHTML="Select All"))}function G(){g(1),m(!u)}var z=function(){var t=M()(".year").map(function(e,t){return t.id}).get(),a=e.albums.map(function(e){return e}),n=["2000","2001","2002","2003","2004","2005","2006","2007","2008","2009"],r=["2010","2011","2012","2013","2014","2015","2016","2017","2018","2019"],s=["2020","2021","2022"];if(e.artistFilter.length>0&&e.albums.forEach(function(t){Array.isArray(t.attributes.artistName)?!1===t.attributes.artistName.some(function(t){return e.artistFilter.includes(t)})&&a.splice(a.findIndex(function(e){return e===t}),1):!1===e.artistFilter.some(function(e){return e===t.attributes.artistName})&&a.splice(a.findIndex(function(e){return e===t}),1)}),e.typeFilter&&e.typeFilter.length>0){var i=e.albums.filter(function(t){return e.typeFilter.includes(t.type)});a=a.filter(function(e){return i.includes(e)}),console.log(a)}var o=a.map(function(e){return e.attributes.releaseDate.split("-")[0]}),u=Object(A.a)(new Set(o));t.filter(function(e){return!u.includes(e)});t.forEach(function(e){u.includes(e)?document.getElementById(e).disabled=!1:document.getElementById(e).disabled=!0});var m=n.filter(function(e){return u.includes(e)});v(m);var d=r.filter(function(e){return u.includes(e)});k(d);var f=s.filter(function(e){return u.includes(e)});if(S(f),(p.every(function(e){return document.getElementById(e).disabled})||0===p.length)&&(document.getElementById("select-all-aughts").disabled=!0),(L.some(function(e){return!1===document.getElementById(e).disabled})||0===L.length)&&(document.getElementById("select-all-aughts").disabled=!1),(N.every(function(e){return document.getElementById(e).disabled})||0===N.length)&&(document.getElementById("select-all-teens").disabled=!0),(L.some(function(e){return!1===document.getElementById(e).disabled})||0===L.length)&&(document.getElementById("select-all-teens").disabled=!1),(L.every(function(e){return document.getElementById(e).disabled})||0===L.length)&&(document.getElementById("select-all-twenties").disabled=!0),(L.some(function(e){return!1===document.getElementById(e).disabled})||0===L.length)&&(document.getElementById("select-all-twenties").disabled=!1),document.getElementById("select-all-aughts").classList.contains("year-selected")){var b=n.filter(function(e){return u.includes(e)}).filter(function(e){return!l.includes(e)});console.log(b),c([].concat(Object(A.a)(l),Object(A.a)(b)))}if(document.getElementById("select-all-teens").classList.contains("year-selected")){var g=r.filter(function(e){return u.includes(e)}).filter(function(e){return!l.includes(e)});console.log(g),c([].concat(Object(A.a)(l),Object(A.a)(g)))}if(document.getElementById("select-all-twenties").classList.contains("year-selected")){var h=s.filter(function(e){return u.includes(e)}).filter(function(e){return!l.includes(e)});console.log(h),c([].concat(Object(A.a)(l),Object(A.a)(h)))}};return r.a.createElement("div",{ref:x,id:e.id},r.a.createElement("div",{className:"year-filter-container",id:"".concat(e.id,"-container")},r.a.createElement("div",{className:"chip-wrapper",onClick:function(e){e.target!==e.currentTarget||G()}},function(){var e=l;return p.length>0&&p.every(function(t){return e.includes(t)})&&((e=e.filter(function(e){return!p.includes(e)})).push("2000's"),e.sort(),document.getElementById("select-all-aughts").classList.add("year-selected"),document.getElementById("select-all-aughts").innerHTML="Remove All"),N.length>0&&N.every(function(t){return e.includes(t)})&&((e=e.filter(function(e){return!N.includes(e)})).push("2010's"),e.sort(),document.getElementById("select-all-teens").classList.add("year-selected"),document.getElementById("select-all-teens").innerHTML="Remove All"),L.length>0&&L.every(function(t){return e.includes(t)})&&((e=e.filter(function(e){return!L.includes(e)})).push("2020's"),e.sort(),document.getElementById("select-all-twenties").classList.add("year-selected"),document.getElementById("select-all-twenties").innerHTML="Remove All"),0===l.length?r.a.createElement("div",{className:"placeholder",onClick:G},r.a.createElement("p",{className:"placeholder-text"},"Years"),r.a.createElement(j.a,{theme:I},r.a.createElement(F.a,{color:"primary",baseClassName:"icon",id:"year-filter-icon"}))):e.map(function(e,t){return r.a.createElement("span",{className:"chip-year",key:t},e," ",r.a.createElement("img",{className:"icon_cancel closeIcon",alt:"Cancel icon",src:"data:image/svg+xml,%3Csvg%20height%3D%22512px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20width%3D%22512px%22%20xml%3Aspace%3D%22preserve%22%20%20%20%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20%20%20%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%20%20%20%20%3Cstyle%20type%3D%22text%2Fcss%22%3E%20%20%20%20%20%20%20%20.st0%7B%20%20%20%20%20%20%20%20%20%20%20%20fill%3A%23fff%3B%20%20%20%20%20%20%20%20%7D%20%3C%2Fstyle%3E%20%20%20%20%3Cpath%20class%3D%22st0%22%20d%3D%22M443.6%2C387.1L312.4%2C255.4l131.5-130c5.4-5.4%2C5.4-14.2%2C0-19.6l-37.4-37.6c-2.6-2.6-6.1-4-9.8-4c-3.7%2C0-7.2%2C1.5-9.8%2C4%20%20L256%2C197.8L124.9%2C68.3c-2.6-2.6-6.1-4-9.8-4c-3.7%2C0-7.2%2C1.5-9.8%2C4L68%2C105.9c-5.4%2C5.4-5.4%2C14.2%2C0%2C19.6l131.5%2C130L68.4%2C387.1%20%20c-2.6%2C2.6-4.1%2C6.1-4.1%2C9.8c0%2C3.7%2C1.4%2C7.2%2C4.1%2C9.8l37.4%2C37.6c2.7%2C2.7%2C6.2%2C4.1%2C9.8%2C4.1c3.5%2C0%2C7.1-1.3%2C9.8-4.1L256%2C313.1l130.7%2C131.1%20%20c2.7%2C2.7%2C6.2%2C4.1%2C9.8%2C4.1c3.5%2C0%2C7.1-1.3%2C9.8-4.1l37.4-37.6c2.6-2.6%2C4.1-6.1%2C4.1-9.8C447.7%2C393.2%2C446.2%2C389.7%2C443.6%2C387.1z%22%2F%3E%3C%2Fsvg%3E",onClick:function(){return q(e)}}))})}())),r.a.createElement("div",{className:"calendar-wrapper display",id:e.filterId},r.a.createElement(R,null,r.a.createElement(T,null,r.a.createElement("div",{className:"years-wrapper"},r.a.createElement("button",{className:"year aughts first-year",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2000"},"2000"),r.a.createElement("button",{className:"year aughts",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2001"},"2001"),r.a.createElement("button",{className:"year aughts",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2002"},"2002"),r.a.createElement("button",{className:"year aughts",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2003"},"2003"),r.a.createElement("button",{className:"year aughts",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2004"},"2004"),r.a.createElement("button",{className:"year aughts",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2005"},"2005"),r.a.createElement("button",{className:"year aughts",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2006"},"2006"),r.a.createElement("button",{className:"year aughts",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2007"},"2007"),r.a.createElement("button",{className:"year aughts",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2008"},"2008"),r.a.createElement("button",{className:"year aughts",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2009"},"2009"),r.a.createElement("button",{className:"select-all aughts",id:"select-all-aughts",onMouseEnter:D,onMouseLeave:H,onClick:_},"Select All"))),r.a.createElement(T,null,r.a.createElement("div",{className:"years-wrapper"},r.a.createElement("button",{className:"year teens first-year",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2010"},"2010"),r.a.createElement("button",{className:"year teens",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2011"},"2011"),r.a.createElement("button",{className:"year teens",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2012"},"2012"),r.a.createElement("button",{className:"year teens",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2013"},"2013"),r.a.createElement("button",{className:"year teens",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2014"},"2014"),r.a.createElement("button",{className:"year teens",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2015"},"2015"),r.a.createElement("button",{className:"year teens",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2016"},"2016"),r.a.createElement("button",{className:"year teens",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2017"},"2017"),r.a.createElement("button",{className:"year teens",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2018"},"2018"),r.a.createElement("button",{className:"year teens",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2019"},"2019"),r.a.createElement("button",{className:"select-all teens",id:"select-all-teens",onMouseEnter:D,onMouseLeave:H,onClick:_},"Select All"))),r.a.createElement(T,null,r.a.createElement("div",{className:"years-wrapper"},r.a.createElement("button",{className:"year twenties first-year",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2020"},"2020"),r.a.createElement("button",{className:"year twenties",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2021"},"2021"),r.a.createElement("button",{className:"year twenties",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2022"},"2022"),r.a.createElement("button",{className:"year twenties",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2023"},"2023"),r.a.createElement("button",{className:"year twenties",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2024"},"2024"),r.a.createElement("button",{className:"year twenties",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2025"},"2025"),r.a.createElement("button",{className:"year twenties",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2026"},"2026"),r.a.createElement("button",{className:"year twenties",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2027"},"2027"),r.a.createElement("button",{className:"year twenties",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2028"},"2028"),r.a.createElement("button",{className:"year twenties",onMouseEnter:D,onMouseLeave:H,onClick:U,id:"2029"},"2029"),r.a.createElement("button",{className:"select-all twenties",id:"select-all-twenties",onMouseEnter:D,onMouseLeave:H,onClick:_},"Select All"))))))},D=a(32),H=a.n(D),U=(a(178),a(172)),_=a.n(U),q=a(41),G=function(e){return Object(n.useEffect)(function(){"/"===window.location.pathname&&document.getElementById("rank").classList.add("active"),"/rankings"===window.location.pathname&&document.getElementById("rankings").classList.add("active")},[]),r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"header-logo"},r.a.createElement("img",{src:_.a,alt:"rankabl-logo",className:"logo"}),r.a.createElement("h1",{className:"brand"},"rankabl")),r.a.createElement("div",{className:"nav-container"},r.a.createElement("nav",{className:"nav"},r.a.createElement("ul",{className:"nav-list"},r.a.createElement("li",{className:"nav-item",id:"rank"},r.a.createElement(q.b,{to:"/".concat(e.artistFilter&&e.artistFilter.length>0&&e.yearFilter&&e.yearFilter>0?"?artist="+e.artistFilter.join("%2C")+"&years="+e.yearFilter.join("%2C"):e.artistFilter&&e.artistFilter.length>0?"?artist="+e.artistFilter.join("%2C"):e.yearFilter&&e.yearFilter.length>0?"?years="+e.yearFilter.join("%2C"):"")},"RANK")),r.a.createElement("li",{className:"nav-item",id:"rankings"},r.a.createElement(q.b,{to:e.headerParams?"/rankings?"+e.headerParams.toString():"/rankings"},"RANKINGS"))))))},z=(a(180),a(434)),Y=a(438),V=a(437),K=a(439),J=a(436),X=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(!1),o=Object(s.a)(i,2),u=o[0],m=o[1],d=Object(n.useState)(0),f=Object(s.a)(d,2),b=f[0],g=f[1],h=Object(n.useState)(),E=Object(s.a)(h,2),p=E[0],v=E[1],y=Object(n.useState)(["2000","2001","2002","2003","2004","2005","2006","2007","2008","2009"]),w=Object(s.a)(y,2),N=w[0],k=(w[1],Object(n.useState)(["2010","2011","2012","2013","2014","2015","2016","2017","2018","2019"])),C=Object(s.a)(k,2),O=C[0],L=(C[1],Object(n.useState)(["2020","2021","2022"])),S=Object(s.a)(L,2),x=S[0];S[1];Object(n.useEffect)(function(){b>0&&document.getElementById(e.filterId).classList.toggle("display")},[u]),Object(n.useEffect)(function(){e.albums.length>0&&v(e.albums.length)},[e.albums]);var A=Object(n.useRef)();Object(n.useEffect)(function(){var t=function(t){A.current.contains(t.target)||document.getElementById(e.filterId).classList.add("display")};return document.addEventListener("mousedown",t),function(){document.removeEventListener("mousedown",t)}}),Object(n.useEffect)(function(){},[l]);new URLSearchParams(window.location.search);function B(){g(1),m(!u)}var M=[{value:10,label:"10"},{value:20,label:"20"},{value:e.albums.length,label:"All"}];return r.a.createElement("div",{ref:A,id:e.id},r.a.createElement("div",{className:"ranking-filter-container",id:"ranking-filter-container"},r.a.createElement("div",{className:"chip-wrapper",onClick:function(e){e.target!==e.currentTarget||B()}},[10,20,50,100,200].some(function(e){return e===p})?r.a.createElement("div",{className:"chip-container"},r.a.createElement("span",{className:"chip-ranking"},"Top ".concat(p)," ",r.a.createElement("img",{className:"icon_cancel closeIcon",alt:"Cancel icon",src:"data:image/svg+xml,%3Csvg%20height%3D%22512px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20width%3D%22512px%22%20xml%3Aspace%3D%22preserve%22%20%20%20%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20%20%20%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%20%20%20%20%3Cstyle%20type%3D%22text%2Fcss%22%3E%20%20%20%20%20%20%20%20.st0%7B%20%20%20%20%20%20%20%20%20%20%20%20fill%3A%23fff%3B%20%20%20%20%20%20%20%20%7D%20%3C%2Fstyle%3E%20%20%20%20%3Cpath%20class%3D%22st0%22%20d%3D%22M443.6%2C387.1L312.4%2C255.4l131.5-130c5.4-5.4%2C5.4-14.2%2C0-19.6l-37.4-37.6c-2.6-2.6-6.1-4-9.8-4c-3.7%2C0-7.2%2C1.5-9.8%2C4%20%20L256%2C197.8L124.9%2C68.3c-2.6-2.6-6.1-4-9.8-4c-3.7%2C0-7.2%2C1.5-9.8%2C4L68%2C105.9c-5.4%2C5.4-5.4%2C14.2%2C0%2C19.6l131.5%2C130L68.4%2C387.1%20%20c-2.6%2C2.6-4.1%2C6.1-4.1%2C9.8c0%2C3.7%2C1.4%2C7.2%2C4.1%2C9.8l37.4%2C37.6c2.7%2C2.7%2C6.2%2C4.1%2C9.8%2C4.1c3.5%2C0%2C7.1-1.3%2C9.8-4.1L256%2C313.1l130.7%2C131.1%20%20c2.7%2C2.7%2C6.2%2C4.1%2C9.8%2C4.1c3.5%2C0%2C7.1-1.3%2C9.8-4.1l37.4-37.6c2.6-2.6%2C4.1-6.1%2C4.1-9.8C447.7%2C393.2%2C446.2%2C389.7%2C443.6%2C387.1z%22%2F%3E%3C%2Fsvg%3E",onClick:function(){var e;"2000's"===(e=void 0)?(c(l.filter(function(e){return!N.includes(e)})),Array.from(document.querySelectorAll(".aughts")).forEach(function(e){return e.classList.remove("year-selected")}),document.getElementById("select-all-aughts").innerHTML="Select All"):"2010's"===e?(c(l.filter(function(e){return!O.includes(e)})),Array.from(document.querySelectorAll(".teens")).forEach(function(e){return e.classList.remove("year-selected")}),document.getElementById("select-all-teens").innerHTML="Select All"):"2020's"===e?(c(l.filter(function(e){return!x.includes(e)})),Array.from(document.querySelectorAll(".twenties")).forEach(function(e){return e.classList.remove("year-selected")}),document.getElementById("select-all-twenties").innerHTML="Select All"):(c(l.filter(function(t){return t!==e})),document.getElementById(e).classList.remove("year-selected"),document.getElementById(e).classList.contains("aughts")?(document.getElementById("select-all-aughts").classList.remove("year-selected"),document.getElementById("select-all-aughts").innerHTML="Select All"):document.getElementById(e).classList.contains("teens")?(document.getElementById("select-all-teens").classList.remove("year-selected"),document.getElementById("select-all-teens").innerHTML="Select All"):document.getElementById(e).classList.contains("twenties")&&(document.getElementById("select-all-twenties").classList.remove("year-selected"),document.getElementById("select-all-twenties").innerHTML="Select All"))}})),r.a.createElement(j.a,{theme:I},r.a.createElement(F.a,{color:"primary",baseClassName:"icon",id:"".concat(e.id,"-icon-chip"),onClick:B}))):r.a.createElement("div",{className:"placeholder",onClick:B},r.a.createElement("p",{className:"placeholder-text"},"Ranking"),r.a.createElement(j.a,{theme:I},r.a.createElement(F.a,{color:"primary",baseClassName:"icon",id:"".concat(e.id,"-icon")}))))),r.a.createElement("div",{className:"ranking-slider display",id:e.filterId},r.a.createElement(j.a,{theme:I},r.a.createElement(V.a,null,r.a.createElement(Y.a,{row:!0,defaultValue:"global",color:"primary"},r.a.createElement(K.a,{value:"global",control:r.a.createElement(J.a,{color:"secondary",size:"small"}),label:"Global",sx:{color:"#cfcfcf",marginRight:"24px"}}),r.a.createElement(K.a,{value:"personal",control:r.a.createElement(J.a,{color:"secondary",size:"small",id:"radio-personal"}),label:"Personal",sx:{color:"#cfcfcf"}}))),r.a.createElement(z.a,{color:"secondary",marks:M,step:null,defaultValue:48,max:e.albums.length,onChange:function(t,a){v(a),e.filterRanking(a)}}))))},Q=a(48),W=a.n(Q),Z=function(e){var t=[];e.forEach(function(e){var a={};a[e.album1.id]=e.album1.result,a[e.album2.id]=e.album2.result,t.push(a)}),console.log(t);for(var a=[],n=0;n<t.length;n++)a.push(Object.keys(t[n]));console.log(a);var r=a.flat();console.log(r);var l=Object(A.a)(new Set(r));console.log(l);var c=W.a.matrix(l.length);c=c.map(function(e){return 0});for(var s=function(e){c.set(e,e,r.filter(function(t){return t===l[e]}).length+2);for(var a=e+1;a<l.length;a++)for(var n=c.get(e,a)||0,s=0;s<t.length;s++)l[e]in t[s]&&l[a]in t[s]&&(c.set(e,a,n-1),c.set(a,e,n-1))},i=0;i<l.length;i++)s(i);console.log(c);for(var o=[],u=0;u<l.length;u++){for(var m=[],d=0;d<t.length;d++)l[u]in t[d]&&m.push(t[d][l[u]]);var f=1+.5*m.reduce(function(e,t){return e+t},0);o.push(f)}for(var b=W.a.matrix(l.length,o),g=W.a.lu(c).solve(b),h=[],E=0;E<l.length;E++)h.push({albumId:l[E],rating:g.array[E]});return h.sort(function(e,t){return t.rating-e.rating})},$=a(442),ee=a(430),te=a(443),ae=a(431),ne=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)([]),i=Object(s.a)(c,2),o=i[0],u=i[1],m=Object(n.useState)(0),d=Object(s.a)(m,2),f=d[0],b=d[1],g=Object(n.useState)([]),E=Object(s.a)(g,2),p=E[0],y=E[1],N=Object(n.useState)([]),k=Object(s.a)(N,2),C=k[0],O=k[1],L=Object(n.useState)(!1),A=Object(s.a)(L,2),B=A[0],M=A[1],F=Object(n.useState)(!1),T=Object(s.a)(F,2),R=T[0],D=T[1],U=Object(n.useState)(""),_=Object(s.a)(U,2),q=_[0],z=_[1],Y=Object(n.useState)({_id:"",userId:"",results:[],seenPairs:[]}),V=Object(s.a)(Y,2),K=V[0],J=V[1],Q=Object(n.useState)(!1),W=Object(s.a)(Q,2),ne=W[0],re=W[1],le=Object(n.useState)(""),ce=Object(s.a)(le,2),se=ce[0],ie=ce[1],oe=Object(n.useState)([]),ue=Object(s.a)(oe,2),me=ue[0],de=ue[1],fe=Object(n.useState)([]),be=Object(s.a)(fe,2),ge=be[0],he=be[1],Ee=Object(n.useState)([]),pe=Object(s.a)(Ee,2),ve=pe[0],ye=pe[1],we=Object(n.useState)([]),Ne=Object(s.a)(we,2),ke=(Ne[0],Ne[1]),Ce=Object(n.useState)("primary"),Oe=Object(s.a)(Ce,2),je=Oe[0],Le=Oe[1];Object(n.useEffect)(function(){xe(),Se(),Be(),ie(Me())},[]),Object(n.useEffect)(function(){""!==q&&Ae()},[q]),Object(n.useEffect)(function(){me.length>0&&ye(Z(me))},[me]),Object(n.useEffect)(function(){ge.length>0&&ke(Z(ge))},[ge]),Object(n.useEffect)(function(){if(Fe(),a.length>0||o.length>0||f!==p.length?D(!0):D(!1),0===a.length){Ie.delete("artist");var e=window.location.pathname+"?"+Ie.toString();window.history.pushState(null,"",e)}0===o.length&&(Ie.delete("years"),e=window.location.pathname+"?"+Ie.toString(),window.history.pushState(null,"",e))},[a,o,f]),Object(n.useEffect)(function(){Fe()},[f]),Object(n.useEffect)(function(){p.length>0&&(M(!0),l(se),b(p.length))},[p]),Object(n.useEffect)(function(){Le(R?"secondary":"primary")},[R]);var Ie=new URLSearchParams(window.location.search),Se=function(){v.a.get("https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/albums",{params:{verification_method:"SECRET_AS_QUERY_PARAM",secret:"temperature"}}).then(function(e){y(e.data),O(e.data)}).catch(function(e){console.log(e)})},xe=function(){H.a.get("user")?z(H.a.get("user")):(H.a.set("user",h.a.v4(),{expires:1e4}),z(H.a.get("user")))},Ae=function(){""!==q&&v.a.get("https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/getuser",{params:{userId:q}}).then(function(e){null!==e.data?(J(e.data),re(!0),he(e.data.results)):re(!0)})},Be=function(){v.a.get("https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/getResults",{}).then(function(e){de(e.data)}).catch(function(e){console.log(e)})},Me=function(){var e=Ie.get("artist");if(null!==e){var t=e.split(",");return console.log("filter set from params"),t}return[]},Fe=function(){if(console.log(f),0===a.length&&0===o.length&&f===p.length)O(p);else{var e=p.map(function(e){return e});if(a.length>0){p.forEach(function(t){Array.isArray(t.attributes.artistName)?!1===t.attributes.artistName.some(function(e){return a.includes(e)})&&e.splice(e.findIndex(function(e){return e===t}),1):!1===a.some(function(e){return e===t.attributes.artistName})&&e.splice(e.findIndex(function(e){return e===t}),1)}),Ie.set("artist",a);var t=window.location.pathname+"?"+Ie.toString();window.history.pushState(null,"",t)}if(o.length>0&&(e=e.filter(function(e){return o.some(function(t){return e.attributes.releaseDate.includes(t)})}),Ie.set("years",o),t=window.location.pathname+"?"+Ie.toString(),window.history.pushState(null,"",t)),ve.length>0&&f<p.length){var n=ve.map(function(e){return e.albumId}).slice(0,f);console.log(n),e=e.filter(function(e){return n.includes(e.id)}),console.log(e)}O(e)}},Te=function(e){var t=e.map(function(e){return e.name});l(t)},Re=function(e){u(e)},Pe=function(e){b(e)};return r.a.createElement("div",{classNyarn:!0,run:!0,deployame:"page-container",id:"rank-page-container"},r.a.createElement(G,{headerParams:Ie}),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"Rank"},r.a.createElement("div",{className:"filters"},r.a.createElement(x,{id:"artist-filter",onSelect:Te,onRemove:Te,albums:p,queryParams:a,yearFilter:o}),r.a.createElement(P,{id:"year-filter",filterId:"calendar",onChange:Re,albums:p,artistFilter:a}),r.a.createElement(X,{id:"ranking-filter",filterId:"ranking-slider",albums:p,filterRanking:Pe}),r.a.createElement(j.a,{theme:S},r.a.createElement($.a,{id:"filter-button",onClick:function(){document.getElementById("filter-drawer").style.top="0",document.getElementById("rank-page-container").style.overflow="hidden"},variant:"outlined",color:je,size:"small",sx:{textTransform:"none",borderRadius:"15px"},endIcon:r.a.createElement(ee.a,{size:"small"})},"Filters"))),r.a.createElement(w,{albums:C,albumsLoaded:B,filters:R,userId:q,seenPairs:K.seenPairs,loadedUserData:ne}))),r.a.createElement("div",{className:"filter-drawer",id:"filter-drawer"},r.a.createElement("div",{className:"filter-drawer-content"},r.a.createElement("div",{className:"filter-drawer-header"},r.a.createElement("div",null),r.a.createElement("div",{className:"filter-drawer-header-title"},"Filters"),r.a.createElement(j.a,{theme:I},r.a.createElement(te.a,{color:"primary",size:"large",onClick:function(){document.getElementById("filter-drawer").style.top="100%",document.getElementById("rank-page-container").style.overflow="auto"}},r.a.createElement(ae.a,{fontSize:"inherit"})))),r.a.createElement("hr",null),r.a.createElement("div",{className:"filter-drawer-body"},r.a.createElement(x,{id:"artist-filter-drawer",onSelect:Te,onRemove:Te,albums:p,queryParams:a,yearFilter:o}),r.a.createElement(P,{id:"year-filter-drawer",filterId:"calendar-drawer",onChange:Re,albums:p,artistFilter:a}),r.a.createElement(X,{id:"ranking-filter-drawer",filterId:"ranking-slider-drawer",albums:p,filterRanking:Pe})))))},re=(a(185),a(183)),le=a.n(re),ce=(a(187),function(e){var t=e.children,a=e.width;return r.a.createElement("div",{className:"carousal-item",style:{width:a}},t)}),se=function(e){var t=e.children,a=Object(n.useState)(0),l=Object(s.a)(a,2),c=l[0],i=l[1],o=function(e){i(e)};return r.a.createElement("div",{className:"carousel"},r.a.createElement("div",{className:"inner",style:{transform:"translateX(-".concat(100*c,"%)")}},r.a.Children.map(t,function(e,t){return r.a.cloneElement(e,{width:"100%"})})),r.a.createElement("div",{className:"carousel-dots"},r.a.createElement("div",{className:"dot ".concat(0===c?"active":""),id:"dot-0",onClick:function(){return o(0)}}),r.a.createElement("div",{className:"dot ".concat(1===c?"active":""),id:"dot-1",onClick:function(){return o(1)}})))},ie=(a(189),a(184)),oe=function(e){var t=e.children,a=e.width;return r.a.createElement("div",{className:"mobile-carousal-item",style:{width:a}},t)},ue=function(e){var t=e.children,a=Object(n.useState)(0),l=Object(s.a)(a,2),c=l[0],i=l[1],o=function(e){i(e)},u=Object(ie.a)({onSwipedLeft:function(){c!==r.a.Children.count(t)-1&&o(c+1)},onSwipedRight:function(){0!==c&&o(c-1)},preventDefaultTouchmoveEvent:!0,preventScrollOnSwipe:!0});return r.a.createElement("div",Object.assign({},u,{className:"mobile-carousel"}),r.a.createElement("div",{className:"mobile-inner",style:{transform:"translateX(-".concat(100*c,"%)")}},r.a.Children.map(t,function(e,t){return r.a.cloneElement(e,{width:"100%"})})),r.a.createElement("div",{className:"mobile-carousel-dots"},r.a.Children.map(t,function(e,t){return r.a.createElement("div",{className:"mobile-dot ".concat(c===t?"active":""),id:"dot-".concat(t),onClick:function(){return o(t)}})})))},me=function(e){var t=Object(n.useState)({}),a=Object(s.a)(t,2),l=a[0],c=a[1],i=function(e){return le()(e).format("MMMM Do, YYYY")};Object(n.useEffect)(function(){e.album&&(e.album.attributes.editorialNotes&&null!==document.getElementById("editorial-notes-"+e.rank)&&(document.getElementById("editorial-notes-"+e.rank).innerHTML=e.album.attributes.editorialNotes.standard),c({"--bg-color":"#"+e.album.attributes.artwork.bgColor,"--text-color-1":"#"+e.album.attributes.artwork.textColor1,"--text-color-2":"#"+e.album.attributes.artwork.textColor2,"--text-color-3":"#"+e.album.attributes.artwork.textColor3,"--text-color-4":"#"+e.album.attributes.artwork.textColor4,"--shadow":"#"+e.album.attributes.artwork.textColor4+"25","--shadow-hover":"#"+e.album.attributes.artwork.textColor4+"80","--bg-gradient":"#"+b(e.album.attributes.artwork.bgColor,4)}))},[e.album]);var o=function(e){return e.replace("{w}","600").replace("{h}","600")},u=function(t){var a=[];e.albums.forEach(function(e){Array.isArray(e.attributes.artistName)?e.attributes.artistName.some(function(e){return e===t})&&a.push(e):e.attributes.artistName===t&&a.push(e)});var n=e.rankingGlobal.map(function(e){return e.albumId}),r=e.rankingUser.map(function(e){return e.albumId});return("global"===e.selectedRanking?a.filter(function(e){return n.includes(e.id)}).map(function(t){return{album:t,ranking:e.rankingGlobal.findIndex(function(e){return e.albumId===t.id})+1}}):a.filter(function(e){return r.includes(e.id)}).map(function(t){return{album:t,ranking:e.rankingUser.findIndex(function(e){return e.albumId===t.id})+1}})).sort(function(e,t){return e.ranking-t.ranking})},m=function(t){return function(t){var a=[];e.albums.forEach(function(e){Array.isArray(e.attributes.artistName)?e.attributes.artistName.some(function(e){return e===t})&&a.push(e):e.attributes.artistName===t&&a.push(e)}),e.albums.filter(function(e){return e.attributes.artistName===t});var n=a.filter(function(t){return t.id!==e.album.id}),r=e.rankingGlobal.map(function(e){return e.albumId}),l=e.rankingUser.map(function(e){return e.albumId});return("global"===e.selectedRanking?n.filter(function(e){return r.includes(e.id)}).map(function(t){return{album:t,ranking:e.rankingGlobal.findIndex(function(e){return e.albumId===t.id})+1}}):n.filter(function(e){return l.includes(e.id)}).map(function(t){return{album:t,ranking:e.rankingUser.findIndex(function(e){return e.albumId===t.id})+1}})).sort(function(e,t){return e.ranking-t.ranking})}(t).map(function(e,t){return r.a.createElement("div",{className:"other-album",key:t},r.a.createElement("div",{className:"other-album-rank"},e.ranking),r.a.createElement("img",{src:o(e.album.attributes.artwork.url),alt:e.album.attributes.name,className:"other-album-image"}),r.a.createElement("p",{className:"other-album-name"},e.album.attributes.name))})},d=function(){return function(){var t=("global"===e.selectedRanking?e.resultsGlobal:e.resultsUser).filter(function(t){return t.album1.id===e.album.id||t.album2.id===e.album.id}),a=[];return t.map(function(t){t.album1.id===e.album.id?a.push({album:e.albums.find(function(e){return e.id===t.album2.id}),result:t.album2.result}):t.album2.id===e.album.id&&a.push({album:e.albums.find(function(e){return e.id===t.album1.id}),result:t.album1.result})}),a.reverse().slice(0,20)}().map(function(e,t){return r.a.createElement("div",{className:"recent-result",key:t},r.a.createElement("div",{className:"recent-result-outcome"},-1===e.result?"Win":"Loss"),r.a.createElement("img",{src:o(e.album.attributes.artwork.url),alt:e.album.attributes.name,className:"recent-result-image"}),r.a.createElement("p",{className:"recent-result-name"},e.album.attributes.name))})},f=function(t){if(e.artists.length>0&&e.album&&u(t).length>0)return e.artists.find(function(e){return e.attributes.name===t}).attributes.artwork.url.replace("{w}","300").replace("{h}","300")};if(e.album)return r.a.createElement("div",{className:"table-row closed",id:"table-row-".concat(e.rank),style:l},r.a.createElement("div",{className:"row-default"},r.a.createElement("div",{className:"table-cell",id:"rank-cell"},r.a.createElement("div",{className:"rank-container"},r.a.createElement("p",null,e.rank))),r.a.createElement("div",{className:"table-cell",id:"album-cell"},e.album&&r.a.createElement("div",{className:"album-info"},r.a.createElement("img",{src:o(e.album.attributes.artwork.url),alt:"album artwork",className:"albumArtwork"}),r.a.createElement("div",{className:"album-name-artist"},r.a.createElement("div",{className:"album-text"},r.a.createElement("p",{className:"album-name-table"},e.album.attributes.name),r.a.createElement("p",{className:"album-artist-table"},Array.isArray(e.album.attributes.artistName)?e.album.attributes.artistName.join(" & "):e.album.attributes.artistName))))),r.a.createElement("div",{className:"table-cell",id:"release-cell"},r.a.createElement("p",null,e.album&&i(e.album.attributes.releaseDate))),r.a.createElement("div",{className:"table-cell",id:"more-cell"},r.a.createElement("button",{className:"more",id:"more-button-".concat(e.rank),onClick:function(){window.screen.width>500&&document.getElementById("table-row-".concat(e.rank)).classList.contains("closed")?(setTimeout(function(){document.getElementById("table-row-".concat(e.rank)).scrollIntoView({behavior:"smooth",block:"nearest"})},300),document.getElementById("chevron ".concat(e.rank)).style.transform="rotate(180deg)",document.getElementById("chevron ".concat(e.rank)).style.visibility="visible",document.getElementById("more ".concat(e.rank)).style.visibility="visible",document.getElementById("table-row-".concat(e.rank)).classList.remove("closed"),document.getElementById("table-row-".concat(e.rank)).classList.add("open"),e.isExpanded(e.rank)):window.screen.width>500?(document.getElementById("chevron ".concat(e.rank)).style.transform="rotate(0deg)",document.getElementById("more ".concat(e.rank)).style.visibility="",document.getElementById("chevron ".concat(e.rank)).style.visibility="",document.getElementById("table-row-".concat(e.rank)).classList.remove("open"),document.getElementById("table-row-".concat(e.rank)).classList.add("closed"),e.isExpanded("")):window.screen.width<=500&&document.getElementById("table-row-".concat(e.rank)).classList.contains("closed")?(document.getElementById("chevron ".concat(e.rank)).style.transform="rotate(180deg)",document.getElementById("table-row-".concat(e.rank)).classList.remove("closed"),document.getElementById("table-row-".concat(e.rank)).classList.add("open"),e.isExpanded(e.rank)):window.screen.width<=500&&(document.getElementById("chevron ".concat(e.rank)).style.transform="rotate(0deg)",document.getElementById("table-row-".concat(e.rank)).classList.remove("open"),document.getElementById("table-row-".concat(e.rank)).classList.add("closed"),e.isExpanded(""))}},r.a.createElement("p",{className:"button-text",id:"more ".concat(e.rank)}),r.a.createElement(F.a,{size:"small",id:"chevron ".concat(e.rank)})))),r.a.createElement("div",{className:"row-expanded",id:"row-expanded-".concat(e.rank)},window.screen.width>500?r.a.createElement("div",{className:"expanded-row-content"},r.a.createElement("div",{className:"album-info-expanded"},r.a.createElement("div",{className:"album-facts"},r.a.createElement("p",{className:"label"},"PROJECT TYPE:"),r.a.createElement("p",null,e.album&&e.album.type),r.a.createElement("p",{className:"label"},"GENRE:"),r.a.createElement("p",null,e.album&&e.album.attributes.genreNames[0]),r.a.createElement("p",{className:"label"},"TRACKs:"),r.a.createElement("p",null,e.album&&e.album.attributes.trackCount)),e.album.attributes.editorialNotes&&r.a.createElement("div",{className:"editorial-notes"},r.a.createElement("p",{id:"editorial-label"},"EDITORIAL NOTES:"),r.a.createElement("p",{className:"editorial-notes-standard",id:"editorial-notes-"+e.rank}))),r.a.createElement("div",{className:"recent-results"},r.a.createElement("p",{className:"label"},"RECENT RESULTS:"),r.a.createElement("div",{className:"recent-results-albums"},d())),r.a.createElement("div",{className:"vl"}),Array.isArray(e.album.attributes.artistName)?r.a.createElement(se,null,e.album.attributes.artistName.map(function(e,t){return r.a.createElement(ce,{index:t},r.a.createElement("div",{className:"artist"},r.a.createElement("div",{className:"artist-info"},r.a.createElement("img",{src:f(e),alt:"artist artwork",className:"artist-artwork"}),r.a.createElement("p",{className:"artist-name"},e),r.a.createElement("div",{className:"artist-stats"},r.a.createElement("div",{className:"artist-stats-labels"},r.a.createElement("p",null,"Highest album rank: "),r.a.createElement("p",null,"Lowest album rank: "),r.a.createElement("p",null,"Average album rank: ")),r.a.createElement("div",{className:"artist-stats-values"},r.a.createElement("p",null,u(e).length>0&&"#".concat(u(e)[0].ranking)),r.a.createElement("p",null,u(e).length>0&&"#".concat(u(e)[u(e).length-1].ranking)),r.a.createElement("p",null,u(e).length>0&&"#".concat((u(e).reduce(function(e,t){return e+t.ranking},0)/u(e).length).toFixed(1)))))),r.a.createElement("div",{className:"other-albums-container"},r.a.createElement("p",{className:"label"},"OTHER ALBUMS:"),r.a.createElement("div",{className:"other-albums"},m(e)))))})):r.a.createElement("div",{className:"artist"},r.a.createElement("div",{className:"artist-info"},r.a.createElement("div",{className:"artist-image-name"},r.a.createElement("img",{src:f(e.album.attributes.artistName),alt:"artist artwork",className:"artist-artwork"}),r.a.createElement("p",{className:"artist-name"},e.album.attributes.artistName)),r.a.createElement("div",{className:"artist-stats"},r.a.createElement("div",{className:"artist-stats-labels"},r.a.createElement("p",null,"Highest album rank: "),r.a.createElement("p",null,"Lowest album rank: "),r.a.createElement("p",null,"Average album rank: ")),r.a.createElement("div",{className:"artist-stats-values"},r.a.createElement("p",null,u(e.album.attributes.artistName).length>0&&"#".concat(u(e.album.attributes.artistName)[0].ranking)),r.a.createElement("p",null,u(e.album.attributes.artistName).length>0&&"#".concat(u(e.album.attributes.artistName)[u(e.album.attributes.artistName).length-1].ranking)),r.a.createElement("p",null,u(e.album.attributes.artistName).length>0&&"#".concat((u(e.album.attributes.artistName).reduce(function(e,t){return e+t.ranking},0)/u(e.album.attributes.artistName).length).toFixed(1)))))),r.a.createElement("div",{className:"other-albums-container"},r.a.createElement("p",{className:"label"},"OTHER ALBUMS:"),r.a.createElement("div",{className:"other-albums"},m(e.album.attributes.artistName))))):r.a.createElement("div",{className:"expanded-row-content"},r.a.createElement(ue,null,r.a.createElement(oe,null,r.a.createElement("div",{className:"album-carousel"},r.a.createElement("div",{className:"album-info-expanded"},r.a.createElement("div",{className:"album-facts"},r.a.createElement("p",{className:"label"},"PROJECT TYPE:"),r.a.createElement("p",null,e.album&&e.album.type),r.a.createElement("p",{className:"label"},"GENRE:"),r.a.createElement("p",null,e.album&&e.album.attributes.genreNames[0]),r.a.createElement("p",{className:"label"},"TRACKs:"),r.a.createElement("p",null,e.album&&e.album.attributes.trackCount),r.a.createElement("p",{className:"label"},"RELEASE DATE:"),r.a.createElement("p",null,e.album&&i(e.album.attributes.releaseDate)))),r.a.createElement("div",{className:"recent-results"},r.a.createElement("p",{className:"label"},"RECENT RESULTS:"),r.a.createElement("div",{className:"recent-results-albums"},d())))),Array.isArray(e.album.attributes.artistName)?e.album.attributes.artistName.map(function(e,t){return r.a.createElement(oe,{index:t},r.a.createElement("div",{className:"artist"},r.a.createElement("div",{className:"artist-info"},r.a.createElement("div",{className:"artist-image-name"},r.a.createElement("img",{src:f(e),alt:"artist artwork",className:"artist-artwork"}),r.a.createElement("p",{className:"artist-name"},e)),r.a.createElement("div",{className:"artist-stats"},r.a.createElement("div",{className:"artist-stats-labels"},r.a.createElement("p",null,"Highest album rank: "),r.a.createElement("p",null,"Lowest album rank: "),r.a.createElement("p",null,"Average album rank: ")),r.a.createElement("div",{className:"artist-stats-values"},r.a.createElement("p",null,u(e).length>0&&"#".concat(u(e)[0].ranking)),r.a.createElement("p",null,u(e).length>0&&"#".concat(u(e)[u(e).length-1].ranking)),r.a.createElement("p",null,u(e).length>0&&"#".concat((u(e).reduce(function(e,t){return e+t.ranking},0)/u(e).length).toFixed(1)))))),r.a.createElement("div",{className:"other-albums-container"},r.a.createElement("p",{className:"label"},"OTHER ALBUMS:"),r.a.createElement("div",{className:"other-albums"},m(e)))))}):r.a.createElement(oe,null,r.a.createElement("div",{className:"artist"},r.a.createElement("div",{className:"artist-info"},r.a.createElement("div",{className:"artist-image-name"},r.a.createElement("img",{src:f(e.album.attributes.artistName),alt:"artist artwork",className:"artist-artwork"}),r.a.createElement("p",{className:"artist-name"},e.album.attributes.artistName)),r.a.createElement("div",{className:"artist-stats"},r.a.createElement("div",{className:"artist-stats-labels"},r.a.createElement("p",null,"Highest album rank: "),r.a.createElement("p",null,"Lowest album rank: "),r.a.createElement("p",null,"Average album rank: ")),r.a.createElement("div",{className:"artist-stats-values"},r.a.createElement("p",null,u(e.album.attributes.artistName).length>0&&"#".concat(u(e.album.attributes.artistName)[0].ranking)),r.a.createElement("p",null,u(e.album.attributes.artistName).length>0&&"#".concat(u(e.album.attributes.artistName)[u(e.album.attributes.artistName).length-1].ranking)),r.a.createElement("p",null,u(e.album.attributes.artistName).length>0&&"#".concat((u(e.album.attributes.artistName).reduce(function(e,t){return e+t.ranking},0)/u(e.album.attributes.artistName).length).toFixed(1)))))),r.a.createElement("div",{className:"other-albums-container"},r.a.createElement("p",{className:"label"},"OTHER ALBUMS:"),r.a.createElement("div",{className:"other-albums"},m(e.album.attributes.artistName)))))))))},de=(a(191),function(){return r.a.createElement("div",{className:"table-header"},r.a.createElement("div",{className:"table-label",id:"rank-label"},"RANK"),r.a.createElement("div",{className:"table-label",id:"album-label"},"ALBUM"),r.a.createElement("div",{className:"table-label",id:"release-label"},"RELEASE DATE"))}),fe=(a(193),a(195),function(e){var t=Object(n.useState)([{label:"Global",value:"global"}]),a=Object(s.a)(t,2),l=a[0],c=a[1];return Object(n.useEffect)(function(){"personal"===e.queryParams?c([{label:"Personal",value:"personal"}]):c([{label:"Global",value:"global"}])},[e.queryParams]),r.a.createElement(k.a,{id:"ranking-select",options:[{label:"Global",value:"global"},{label:"Personal",value:"personal"}],displayValue:"label",avoidHighlightFirstOption:"true",singleSelect:"true",selectedValues:l,hidePlaceholder:"true",placeholder:"",showArrow:"true",onSelect:e.onSelect,customArrow:r.a.createElement(j.a,{theme:I},r.a.createElement(F.a,{color:"primary"}))})}),be=(a(197),a(199),function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)([]),o=Object(s.a)(i,2),u=o[0],m=o[1];Object(n.useEffect)(function(){e.albums.length>0&&m(d(e.albums))},[e.albums]),Object(n.useEffect)(function(){e.queryParams.length>0&&u.length>0&&c(e.queryParams.map(function(e){return u.find(function(t){return t.label===e})}))},[u]),Object(n.useEffect)(function(){e.albums.length>0&&m(d(f()))},[e.yearFilter,e.artistFilter]);var d=function(e){var t=[];return e.forEach(function(a){t.some(function(e){return e.label===a.type})||t.push({label:a.type,value:a.type.toLowerCase,count:e.filter(function(e){return e.type===a.type}).length})}),t.sort(function(e,t){return t.count-e.count})},f=function(){var t=e.albums.map(function(e){return e});if(e.artistFilter.length>0&&e.albums.forEach(function(a){Array.isArray(a.attributes.artistName)?!1===a.attributes.artistName.some(function(t){return e.artistFilter.includes(t)})&&t.splice(t.findIndex(function(e){return e===a}),1):!1===e.artistFilter.some(function(e){return e===a.attributes.artistName})&&t.splice(t.findIndex(function(e){return e===a}),1)}),e.yearFilter.length>0){var a=e.albums.filter(function(t){return e.yearFilter.some(function(e){return t.attributes.releaseDate.includes(e)})}).map(function(e){return e});t=t.filter(function(e){return a.includes(e)})}return console.log(t),t};return r.a.createElement(k.a,{id:e.id,options:u,selectedValues:l,displayValue:"label",avoidHighlightFirstOption:"true",singleSelect:"true",placeholder:"Type",showArrow:"true",onSelect:e.onSelect,onRemove:e.onRemove,closeIcon:"cancel",customArrow:r.a.createElement(j.a,{theme:I},r.a.createElement(F.a,{color:"primary"}))})}),ge=a(432),he=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)([]),i=Object(s.a)(c,2),o=i[0],u=i[1],m=Object(n.useState)([]),d=Object(s.a)(m,2),f=d[0],b=d[1],g=Object(n.useState)([]),E=Object(s.a)(g,2),p=E[0],y=E[1],w=Object(n.useState)([]),N=Object(s.a)(w,2),k=N[0],C=N[1],O=Object(n.useState)([]),L=Object(s.a)(O,2),A=L[0],B=L[1],M=Object(n.useState)([]),F=Object(s.a)(M,2),T=F[0],R=F[1],D=Object(n.useState)(""),U=Object(s.a)(D,2),_=U[0],q=U[1],z=Object(n.useState)("global"),Y=Object(s.a)(z,2),V=Y[0],K=Y[1],J=Object(n.useState)(!1),X=Object(s.a)(J,2),Q=X[0],W=X[1],te=Object(n.useState)(""),ae=Object(s.a)(te,2),ne=ae[0],re=ae[1],le=Object(n.useState)([]),ce=Object(s.a)(le,2),se=ce[0],ie=ce[1],oe=Object(n.useState)([]),ue=Object(s.a)(oe,2),he=ue[0],Ee=ue[1],pe=Object(n.useState)([]),ve=Object(s.a)(pe,2),ye=ve[0],we=ve[1],Ne=Object(n.useState)("primary"),ke=Object(s.a)(Ne,2),Ce=ke[0];ke[1];Object(n.useEffect)(function(){Le(),Ie(),Se(),xe(),W(!0),ie(Be()),we(je.getAll("type")),null!==je.get("ranking")&&K(je.get("ranking"))},[]),Object(n.useEffect)(function(){Ae()},[_]),Object(n.useEffect)(function(){f.length>0&&C(Z(f))},[f]),Object(n.useEffect)(function(){p.length>0&&B(Z(p))},[p]),Object(n.useEffect)(function(){"global"===V&&R(k),k.length>0&&W(!1)},[k]),Object(n.useEffect)(function(){"personal"===V&&R(A),A.length>0&&W(!1)},[k]),Object(n.useEffect)(function(){Re(),je.set("ranking",V);var e=window.location.pathname+"?"+je.toString();window.history.pushState(null,"",e)},[V]),Object(n.useEffect)(function(){if(Re(),""!==ne&&Pe(ne),0===se.length){je.delete("artist");var e=window.location.pathname+"?"+je.toString();window.history.pushState(null,"",e)}se.length>0&&(je.set("artist",se),e=window.location.pathname+"?"+je.toString(),window.history.pushState(null,"",e)),0===he.length&&(je.delete("years"),e=window.location.pathname+"?"+je.toString(),window.history.pushState(null,"",e)),0===ye.length&&(je.delete("type"),e=window.location.pathname+"?"+je.toString(),window.history.pushState(null,"",e)),ye.length>0&&(je.set("type",ye[0]),e=window.location.pathname+"?"+je.toString(),window.history.pushState(null,"",e))},[se,he,ye]),Object(n.useEffect)(function(){k&&Re()},[k,a]),Object(n.useEffect)(function(){A&&Re()},[A,a]),Object(n.useEffect)(function(){""!==Oe&&""!==ne&&Pe(Oe)},[ne]);var Oe=function(e){var t=Object(n.useRef)();return Object(n.useEffect)(function(){t.current=e}),t.current}(ne),je=new URLSearchParams(window.location.search),Le=function(){H.a.get("user")?q(H.a.get("user")):H.a.set("user",h.a.v4(),{expires:1e4})},Ie=function(){v.a.get("https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/albums",{params:{verification_method:"SECRET_AS_QUERY_PARAM",secret:"temperature"}}).then(function(e){l(e.data)}).catch(function(e){console.log(e)})},Se=function(){v.a.get("https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/artists",{}).then(function(e){u(e.data)}).catch(function(e){console.log(e)})},xe=function(){v.a.get("https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/getResults",{}).then(function(e){b(e.data)}).catch(function(e){console.log(e)})},Ae=function(){""!==_&&v.a.get("https://data.mongodb-api.com/app/rankabl-bwhkm/endpoint/getuser",{params:{userId:_}}).then(function(e){null!==e.data&&y(e.data.results)})},Be=function(){var e=je.get("artist");return null!==e?e.split(","):[]},Me=function(e){re(e)},Fe=function(e){var t=e.map(function(e){return e.name});ie(t)},Te=function(e){var t=e.map(function(e){return e.label});we(t)},Re=function(){if(0===se.length&&0===he.length&&0===ye.length)"global"===V?R(k):"personal"===V&&R(A);else{var e=a.map(function(e){return e.id});if(se.length>0&&a.forEach(function(t){Array.isArray(t.attributes.artistName)?!1===t.attributes.artistName.some(function(e){return se.includes(e)})&&e.splice(e.findIndex(function(e){return e===t.id}),1):!1===se.some(function(e){return e===t.attributes.artistName})&&e.splice(e.findIndex(function(e){return e===t.id}),1)}),he.length>0){var t=a.filter(function(e){return he.some(function(t){return e.attributes.releaseDate.includes(t)})}).map(function(e){return e.id});e=e.filter(function(e){return t.includes(e)}),je.set("years",he);var n=window.location.pathname+"?"+je.toString();window.history.pushState(null,"",n)}if(ye.length>0){var r=a.filter(function(e){return ye.includes(e.type)}).map(function(e){return e.id});e=e.filter(function(e){return r.includes(e)})}var l=[];l="global"===V?k.filter(function(t){return e.includes(t.albumId)}):A.filter(function(t){return e.includes(t.albumId)}),R(l)}},Pe=function(e){window.screen.width>500?(document.getElementById("table-row-".concat(e)).classList.remove("open"),document.getElementById("table-row-".concat(e)).classList.add("closed"),document.getElementById("chevron ".concat(e)).style.transform="rotate(0deg)",document.getElementById("more ".concat(e)).style.visibility="",document.getElementById("chevron ".concat(e)).style.visibility=""):(document.getElementById("table-row-".concat(e)).classList.remove("open"),document.getElementById("table-row-".concat(e)).classList.add("closed"),document.getElementById("chevron ".concat(e)).style.transform="rotate(0deg)")};return r.a.createElement("div",null,r.a.createElement(G,{artistFilter:se,yearFilter:he}),r.a.createElement("div",{className:"filters-rankings"},r.a.createElement(fe,{onSelect:function(e){K(e[0].value)},queryParams:V}),r.a.createElement(x,{id:"artist-filter",albums:a,onSelect:Fe,onRemove:Fe,queryParams:se,yearFilter:he,typeFilter:ye}),r.a.createElement(P,{id:"year-filter",filterId:"calendar",onChange:function(e){Ee(e)},queryParams:he,albums:a,artistFilter:se,typeFilter:ye}),r.a.createElement(be,{id:"type-select",onSelect:Te,onRemove:Te,queryParams:ye,albums:a,artistFilter:se,yearFilter:he}),r.a.createElement(j.a,{theme:S},r.a.createElement($.a,{id:"filter-button-rankings",variant:"outlined",color:Ce,size:"small",sx:{textTransform:"none",borderRadius:"15px",height:"30.75px"},endIcon:r.a.createElement(ee.a,{size:"small"})},"Filters")),r.a.createElement("div",{className:"share"},"personal"===V?r.a.createElement(j.a,{theme:I},r.a.createElement($.a,{variant:"contained",onClick:function(){var e=se.map(function(e){return e}),t=e.pop(),n="";ye.length>0&&(n=ye[0].toLowerCase());var r=he.map(function(e){return e}),l=r.pop(),c=[];c=1===se.length?T:T.slice(0,10);var s="My top ranked ".concat(se.length>1?"".concat(e.join(", ")+" & "+t+" "):se.length>0?"".concat(se[0]," "):"").concat(ye.length>0?"".concat(n,"s"):"albums"," of ").concat(document.getElementById("select-all-twenties").classList.contains("year-selected")?"the 2020's":document.getElementById("select-all-teens").classList.contains("year-selected")?"the 2010's":document.getElementById("select-all-aughts").classList.contains("year-selected")?"the 2000's":he.length>1?"".concat(r.join(", ")+" & "+l):he.length>0?"".concat(he[0]):"all time",": \n\n").concat(c.map(function(e,t){return"".concat(t+1,". ").concat(a.find(function(t){return t.id===e.albumId}).attributes.name," ").concat(void 0!==a.find(function(t){return t.id===e.albumId}).attributes.emoji?a.find(function(t){return t.id===e.albumId}).attributes.emoji:"")}).join("\n"));navigator.clipboard.writeText(s)},color:"secondary",sx:{borderRadius:"20px",height:"40px",padding:"0px 32px 0px 32px",textTransform:"none",fontSize:"16px",fontFamily:"Helvetica",color:"#FFFFFF"},endIcon:r.a.createElement(ge.a,{size:"small"})},"Share")):null)),r.a.createElement(de,null),r.a.createElement("div",{className:"table-container",id:"table-container"},Q?r.a.createElement("span",{className:"loader"}):T.map(function(e,t){return r.a.createElement(me,{key:t,album:a.find(function(t){return t.id===e.albumId}),rank:t+1,albums:a,artists:o,rankingGlobal:k,rankingUser:A,resultsGlobal:f,resultsUser:p,selectedRanking:V,isExpanded:Me})})),r.a.createElement("div",{className:"embed"}))},Ee=a(3);var pe=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee.a,null))},ve=function(e){e&&e instanceof Function&&a.e(1).then(a.bind(null,433)).then(function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,l=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),l(e),c(e)})};c.a.createRoot(document.getElementById("root")).render(r.a.createElement(q.a,{basename:"/rankable"},r.a.createElement(Ee.d,null,r.a.createElement(Ee.b,{path:"/",element:r.a.createElement(pe,null)}),r.a.createElement(Ee.b,{index:!0,element:r.a.createElement(ne,null)}),r.a.createElement(Ee.b,{path:"rankings",element:r.a.createElement(he,null)})))),ve()}},[[119,3,2]]]);
//# sourceMappingURL=main.5017bcb2.chunk.js.map